/**
 * Loymax v2.2.63040 (http://loymax.ru)
 * Copyright 2011-2020 Loymax, Inc.
 * License: MIT
 *
 * LoymaxApp is released under the MIT license.
 * 
 * Copyright (c) 2019 Loymax, Inc.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

"use strict";window.lmxRegistrators&&(Array.isArray(window.lmxRegistrators)?window.lmxRegistrators.forEach(function(e){"function"==typeof e?e(angular):console.error('Элементы window.externalModuleRegistration должны быть типа "function"!')}):console.error('Свойство window.externalModuleRegistration должно быть типа "Array"!')),function(e){e.module("lmxApp",["ngMask","LocalStorageModule","ui.bootstrap","ui.bootstrap.datetimepicker","bowser","monospaced.qrcode","angular-barcode","ngSanitize","naif.base64","lmxCustomSelect","angular-toArrayFilter","focus-if","tmh.dynamicLocale","pascalprecht.translate","YAML","vcRecaptcha","markdown","templateCache"].concat(window.lmxDependencies||[])),e.module("lmxApp").config(["$locationProvider","$qProvider",function(e,o){e.hashPrefix(""),o.errorOnUnhandledRejections(!1)}]),e.module("lmxApp").run(["e2eService",function(e){e.init()}]),e.element(function(){e.bootstrap(document,["lmxApp"])})}(angular);
"use strict";!function(n){n.module("lmxApp").directive("lmxAnnouncement",["$log","$rootScope","$sce","announcementService","modalService","configurationService",function(e,t,o,a,r,i){return{restrict:"E",replace:!0,template:'<div><div ng-include="getContentUrl()"></div></div>',link:function(e,c,u){function s(n){e.isProgress=!0;var t=Object.assign({isLoadMore:!1,from:e.from},n);a.getPublishedAnnouncements(l,t.from).then(function(n){e.allCount=n.data.$allCount,t.isLoadMore?e.announcements.pushArray(m(n.data)):e.announcements=m(n.data)})["finally"](function(){e.isProgress=!1})}function m(n){return n.forEach(function(n){n.attributes=n.attributes.toDictionary("attributeLogicalName")}),n}var l=u.space||i.components.announcement.space;e.isProgress=!0,e.onPage=parseInt(u.onPage)||10,e.isPaginated=n.isUndefined(u.loadMoreButton),e.from=0,e.announcementsPath=t.appLocationParts[0],e.changeLocation=t.changeLocation,s(),e.increaseFrom=function(){e.from+=e.onPage,s({isLoadMore:!e.isPaginated})},e.firstPage=function(){e.from=0,s()},e.changePage=function(n){s({from:10*(n-1)})},e.getContentUrl=function(){return"app/directives/announcement/"+l+".html"},e.getAnnouncementImagePath=function(n){return a.getAnnouncementImagePath(n)},e.getTrustedHtmlContent=function(n){return o.trustAsHtml(n)},e.openAnnouncementModal=function(n){r.open({templateUrl:"app/directives/announcement/modal/announcementModal.html",controller:"announcementModalController",windowClass:"modal-announcement",backdrop:!0,keyboard:!0,resolve:{announcement:n}})}}}}])}(angular);
"use strict";!function(n){n.module("lmxApp").factory("announcementService",["$rootScope","$http","configurationService","modalService","offerService",function(n,t,e,o,a){function r(n,e,o){return t.get(m+"Announcements",{params:{"filter.spaceLogicalName":n,"filter.from":e||0,"filter.count":o||10}}).then(function(n){return n})}function u(n){return m+"Files/"+n}function i(n){var e={};return t.get(m+"Announcements/"+n).then(function(n){return e=n.data.attributes.toDictionary("attributeLogicalName"),n.data.attributes=e,n.data})}function c(){r("auth",0,1).then(function(n){if(0!==n.data.length){var t=n.data[0];t.attributesDictionary=t.attributes.toDictionary("attributeLogicalName"),o.open({templateUrl:"app/directives/announcement/modal/authAnnouncementModal.html",controller:"authAnnouncementModalController",windowClass:"auth-announcement-modal",backdrop:!0,keyboard:!0,resolve:{announcement:t}})}})}function f(n){return a.getOfferById(n).then(function(n){var t=n;t=a.transformOfferImages([t]),0!==t.length&&a.openCommunicationOfferModal(t[0])})}var m=e.host+"api/";return{getAnnouncementById:i,getAnnouncementImagePath:u,getPublishedAnnouncements:r,checkAuthAnnouncement:c,getOfferAndOpenCommunicationOfferModal:f}}])}(angular);
"use strict";!function(n){n.module("lmxApp").controller("announcementModalController",["$scope","$uibModalInstance","announcementService","announcement",function(n,e,t,o){n.announcement=o,n.close=e.dismiss,n.getAnnouncementImagePath=function(n){return t.getAnnouncementImagePath(n)}}])}(angular);
"use strict";!function(n){n.module("lmxApp").controller("authAnnouncementModalController",["$scope","$uibModalInstance","announcementService","announcement",function(n,e,t,o){n.announcement=o,n.close=e.dismiss,n.openOffer=function(){o.attributesDictionary.OfferId?(n.inProgress=!0,t.getOfferAndOpenCommunicationOfferModal(o.attributesDictionary.OfferId.value)["finally"](function(){n.inProgress=!1,e.dismiss()})):e.dismiss()},n.getAnnouncementImagePath=function(n){return t.getAnnouncementImagePath(n)}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxAnonymousFeedback",["$window","configurationService","userAlertService","translateFilter",function(e,s,t,o){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/anonymousFeedback/anonymousFeedback.html",link:function(a){var n=s.components.support.supportEmail||"support@loymax.ru";a.messageModel={message:"",subject:""},a.sendMail=function(s){s.$submitted=!1,e.location.href="mailto:"+n+"?subject="+a.messageModel.subject+"&body="+a.messageModel.message,t(o("anonymousFeedback.alerts.mailClient",{supportEmail:n}),"success")}}}}])}(angular);
"use strict";!function(t){t.module("lmxApp").directive("lmxAuthentication",["$log","$rootScope","$translate","authService","configurationService","resetPasswordService","routingService","shareAuthLoginToRegistration","notification","translateFilter","IDENTIFIERS",function(e,i,n,o,a,r,c,s,u,l,d){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/authentication/authentication.html",link:function(e){function n(){e.loginForm.$submitted=!1}function g(){var i;return i=e.cvcRequired?e.model.cvcData:e.model.loginData,t.copy(i)}e.model={loginData:{login:"",password:""},cvcData:{password:""},identifier:a.identifiers.authentication[0]},e.cvcRequired=!1,e.identifiers={arr:a.identifiers.authentication},e.IDENTIFIERS=d,e.registrationUrl=c.pages.registration;var f="login";o.setArea(f),e.resetFormModels=function(){e.model.loginData={login:"",password:""},e.model.cvcData.password="",n()},o.loggedIn()&&c.goToDefault(),e.authentication=o.authentication,e.login=function(){i.authInProcess=!0,e.authInProgress=!0;var t=g();o.login(t,e.cvcRequired).then(function(){o.loggedIn()?c.goToDefault():a.components.registration.forceRegistrationStartOnLoginAttempt||(e.authInProgress=!1)},function(t){e.authInProgress=!1,"TwoFactorAuthenticationCodeRequired"===t.data.error&&(n(),u.clearNotifications("login"),e.cvcRequired=!0,e.cvcMessage=t.data.error_description)})["finally"](function(){i.authInProcess=!1})},e.cancelCvcConfirmation=function(){e.resetFormModels(),e.cvcRequired=!1},e.resetPassword=function(){r.setResetPasswordConfirmationData({data:e.model.loginData.login,identifier:e.model.identifier}),c.goTo("reset-password")},e.resendCode=function(){e.authInProgress=!0,o.resendCode().then(function(){u.addMessage(l("authentication.resendCodeCompleted"),f)})["finally"](function(){e.authInProgress=!1})},a.components.authentication.shareAuthLoginToRegistration&&(e.$watch("model.loginData.login",function(t,e){t!==e&&(s.loginAuth=t)}),e.$watch("model.identifier",function(t,e){t!==e&&s.setIdentifier(t)}),e.$on("$locationChangeStart",function(t,e){"registration"!==c.getApplicationURL(e)&&s.clearLogin()}))}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxBalance",["numberFilter","translatePluralService","userService",function(e,n,t){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/balance/balance.html",link:function(i){i.inProgress=!0,i.selectedAccount={},i.getCurrencyNameCase=function(e){switch(n.getTranslationKey(e)){case"one":return"nominative";case"few":return"genitive";default:return"plural"}},t.getDetailedBalance().then(function(n){i.balanceAccounts=n.items,i.balanceAccounts.forEach(function(n){n.id=n.currency.id,n.title=e(n.amount,2)+" "+n.currency.nameCases.abbreviation,n.lifeTimesByPeriod=n.lifeTimesByPeriod.filter(function(e){return e.activationAmount||e.expirationAmount})})})["finally"](function(){i.inProgress=!1})}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("balanceInfo",function(){return{restrict:"E",replace:!0,templateUrl:"app/directives/balance/balanceInfo.html"}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("birthdayPicker",function(){return{require:"ngModel",restrict:"E",replace:!0,scope:{selectClass:"@sbSelectClass",min:"@min",max:"@max",disabled:"<isDisabled"},templateUrl:"app/directives/birthdayPicker/birthdayPicker.html",link:function(e,t,a,n){function o(){e.years=[];for(var t=h.year();t>=i.year();t--)e.years.push(t)}function r(){e.months=[];for(var t=e.year&&i.isSame([e.year],"year")?i.month():0,a=e.year&&h.isSame([e.year],"year")?h.month():11,n=moment.months(),o=t;o<=a;o++)e.months.push({name:n[o],value:o+1});(e.month-1>a||e.month-1<t)&&delete e.month}function m(){var t,a;t=e.year&&e.month&&i.isSame([e.year,e.month-1],"month")?i.date():1,a=e.year&&e.month&&h.isSame([e.year,e.month-1],"month")?h.date():e.year&&e.month?moment([e.year,e.month-1]).daysInMonth():31,e.dates=[];for(var n=t;n<=a;n++)e.dates.push(n);(e.date<t||e.date>a)&&delete e.date}var i,h;e.$watchCollection("[min, max]",function(e){i=moment(e[0]||"1900-01-01"),h=moment(e[1]),m(),r(),o()}),e.$watch("year",function(){r()}),e.$watchCollection("[month, year]",function(){m()}),e.$watchCollection("[date, month, year]",function(){if(e.year&&e.month&&e.date){var t=moment([e.year,e.month-1,e.date]);n.$setViewValue(t.toDate())}else n.$setViewValue()}),n.$render=function(){if(n.$viewValue){var t=moment(n.$viewValue);e.year=t.year(),e.month=t.month()+1,e.date=t.date()}}}}})}(angular);
"use strict";!function(n){n.module("lmxApp").directive("brand",["$log","$q","brandService",function(r,e,d){return{restrict:"E",replace:!0,scope:{brandId:"="},templateUrl:"app/directives/brand/brand.html",link:function(t){function a(){var n=[],r=d.getBrandById(t.brandId).then(function(n){t.brand=n});n.push(r);var a=d.getBrandMerchants(t.brandId).then(function(n){t.merchants=n});n.push(a),e.all(n)["finally"](function(){t.inProgress=!1})}return t.inProgress=!0,t.brandId?void(t.brandId&&(a(),t.$watch("brandId",function(r,e){n.isDefined(e)&&r!==e&&a()}))):void r.error("Должен быть указан идентификатор бренда")}}}])}(angular);
"use strict";!function(n){n.module("lmxApp").directive("lmxBrands",["brandService","configurationService","modalService",function(n,r,e){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/brands/brands.html",link:function(r){r.brands=[],r.inProgress=!0,n.getBrands().then(function(e){r.brands=e,r.brands.forEach(function(r){n.populateImagesUrlFromDescription(r)})})["finally"](function(){r.inProgress=!1}),r.openBrandViewModal=function(n){e.open({size:"lg",templateUrl:"app/directives/brands/modal/brandViewModal.html",controller:"brandViewModalController",windowClass:"modal-brand",resolve:{brand:n}})}}}}])}(angular);
"use strict";!function(t){t.module("lmxApp").service("brandService",["$http","configurationService",function(e,n){function r(){return e.get(n.host+s).then(function(t){return t.data})}function i(t){return e.get(n.host+s+t).then(function(t){return a(t.data),t.data})}function a(e){if(e=t.isArray(e)?e:[e],e.length){var r=e[0],i=r.images.getObjectByField("description",n.userPortalDescriptionType),a=r.images.getObjectByField("description","marker");r.imgUrl=i?n.host+"api/Files/"+i.fileId:"undefined",a&&(r.markerUrl=n.host+"api/Files/"+a.fileId)}}function o(t){return e.get(n.host+"api/Merchants?brandId="+t).then(function(t){return t.data})}var s="api/Brands/";return{getBrands:r,getBrandById:i,getBrandMerchants:o,populateImagesUrlFromDescription:a}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("brandsNames",function(){return{restrict:"E",replace:!0,scope:{brands:"<"},templateUrl:"app/directives/brandsNames/brandsNames.html"}})}(angular);
"use strict";!function(r){r.module("lmxApp").directive("card",function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/cards/card/card.html",link:function(c,e,a){c.card=c.$parent[a.card||"card"],c.card.isInGroup=r.isDefined(a.inGroup)}}})}(angular);
"use strict";!function(r){r.module("lmxApp").directive("lmxCards",["$q","$rootScope","$translate","cardsService","configurationService","devicePlatformService","modalService",function(a,e,n,t,o,c,s){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/cards/cards.html",link:function(l){function i(r){return r.getObjectByField("description",o.userPortalDescriptionType)}function d(a){for(var e,n,t=0;t<a.length;t++)if(e=a[t].cardCategory,r.isArray(e.images))for(var c=0;c<e.images.length;c++)n=i(e.images),a[t].imageUrl=n?o.host+"api/Files/"+n.fileId:"undefined"}function u(){return t.getCardsCountInfo().then(function(r){var a=r.maxCountOfMainCardsForUser>r.currentCountOfMainCards;l.maxCountOfMainCardsForUserNotReached=a})}function f(){var r=[];return l.platfotm={currentPlatform:c.currentPlatform.type},l.cards.personal.forEach(function(a){r.push(t.getWalletCardInfo(a.id).then(function(r){a.walletUrl=r.url}))}),a.all(r)}function p(){return t.getCards().then(function(r){if(d(r),l.cards=r.reduce(function(r,a){var n;return n=a.cardOwnerInfo.id===e.userInfo.id?"personal":"group",r[n].push(a),r},{personal:[],group:[]}),(o.components.cards.enableAppleWalletCards||o.components.cards.enableGoogleWalletCards)&&c.currentPlatform.isMobile)return f()})}function C(){return t.getCardsAttachStatus().then(function(r){l.isAttachCardAvailable=r.maximumPersonCountForGroup>1})}function m(){l.inProgress=!0;var r=[],e=p();r.push(e);var n=C();r.push(n);var t=u();r.push(t),a.all(r)["finally"](function(){l.inProgress=!1})}function h(a,e,n){var t=r.extend({templateUrl:"app/directives/cards/modal/"+a+".html",controller:a+"Controller",windowClass:"modal-cards"},n||{});e&&(t.resolve={card:function(){return e}}),s.open(t).result.then(function(){m()})}l.inProgress=!0,l.cardNumberGraphicalCodes=(o.components.cards.cardNumberGraphicalCode||"").split(/[^a-zA-Z]/).filter(function(r){return r.toLowerCase()}),l.blockStateChange=function(r){h("modalBlockStateChange",r)},l.replaceCard=function(r){h("modalReplaceCard",r)},l.attachCard=function(){h("modalAttachCard")},l.setCard=function(){h("modalSetCard")},l.displayCodes=function(r){var a={backdrop:!0,keyboard:!0};r.graphicalCodes=l.cardNumberGraphicalCodes,h("modalGraphicalCodes",r,a)},n(["cards.personalCards","cards.accountCards"]).then(function(r){l.tabs={personalCards:{name:r["cards.personalCards"]},accountCards:{name:r["cards.accountCards"]}},l.selectedTab={value:l.tabs.personalCards},l.isAttachCardAvailable=!1,m()})}}}])}(angular);
"use strict";!function(t){t.module("lmxApp").service("cardsService",["$http","configurationService","devicePlatformService",function(t,n,r){function e(t){A=t}function a(){return t.get(S+"Attach",{area:A}).then(function(t){return t.data})}function u(){return t.get(S,{area:A}).then(function(t){return t.data})}function c(n,r){return t.post(S+n+"/ChangeBlockState",JSON.stringify(r),{area:A})}function o(n,r){return t.post(S+n+"/Replace",r,{area:A}).then(function(t){return t})}function i(n,r){var e={cardNumber:n,password:r};return t.post(S+"Attach",e,{area:A}).then(function(t){return t})}function f(n){return t.post(S+"Attach/Confirm",n,{area:A}).then(function(t){return t})}function h(){return t.get(S+"Attach",{area:A}).then(function(t){return t.data})}function d(){return t.post(S+"Attach/Cancel",{area:A}).then(function(t){return t})}function s(){return t.post(S+"Attach/SendConfirmCode",null,{area:A}).then(function(t){return t})}function l(n){return t.post(S+"Set",n,{area:A}).then(function(t){return t})}function C(){return t.get(S+"Set",{area:A}).then(function(t){return t.data})}function p(){return t.get(S+"EmitVirtual").then(function(t){return t.data})}function g(){return t.put(S+"EmitVirtual").then(function(t){return t})}function m(e){return t.get(S+e+"/Wallet",{params:{platform:n.enums.platformType[r.currentPlatform.type]}}).then(function(t){return t.data})}var A,S=n.host+"api/Cards/";return{setArea:e,attachCard:i,attachCardConfirm:f,cancelAttachCard:d,changeBlockState:c,emitVirtualCard:g,getAttachState:h,getCards:u,getCardsAttachStatus:a,getVirtualCardInfo:p,replaceCard:o,sendConfirmCode:s,setCard:l,getWalletCardInfo:m,getCardsCountInfo:C}}])}(angular);
"use strict";!function(n){n.module("lmxApp").controller("modalAttachCardController",["$scope","$uibModalInstance","cardsService","notification","translateFilter",function(n,o,a,t,r){function c(o){n.inProgress=!0,o["finally"](function(){n.inProgress=!1})}function e(){var o=a.getAttachState().then(function(o){o.isStarted?n.confirmForm=!0:n.confirmForm=!1});c(o)}var i="cardModal";a.setArea(i),t.clearNotifications("cardModal"),n.inProgress=!1,n.confirmForm=void 0,n.model={cardNumber:"",password:"",confirmCode:""},e(),n.startAttachCard=function(){var o=a.attachCard(n.model.cardNumber,n.model.password).then(function(){n.confirmForm=!0});c(o)},n.confirm=function(){var t=a.attachCardConfirm(n.model.confirmCode).then(function(n){o.close(n.data)});c(t)},n.cancelAttachCard=function(){var n=a.cancelAttachCard().then(function(n){o.close(n.data)});c(n)},n.sendConfirmCode=function(){var n=a.sendConfirmCode().then(function(){t.addMessage(r("cards.attachCardModal.codeSent"),i)});c(n)},n.cancel=function(){o.dismiss()}}])}(angular);
"use strict";!function(o){o.module("lmxApp").controller("modalBlockStateChangeController",["$rootScope","$scope","$uibModalInstance","card","cardsService","notification",function(o,a,c,e,n,t){n.setArea("cardModal"),t.clearNotifications("cardModal"),a.inProgress=!1,a.model={cardId:e.id,password:""},a.isBlocked=e.block,a.blockStateChange=function(){a.inProgress=!0,n.changeBlockState(a.model.cardId,a.model.password).then(function(a){o.$broadcast("cardBlockStateChanged"),c.close(a.data)})["finally"](function(){a.inProgress=!1})},a.cancel=function(){c.dismiss()}}])}(angular);
"use strict";!function(a){a.module("lmxApp").controller("modalGraphicalCodesController",["$scope","$uibModalInstance","card",function(a,l,o){a.card=o,a.displayBarCode=o.graphicalCodes.includes("bar"),a.displayQrCode=o.graphicalCodes.includes("qr"),a.close=l.dismiss}])}(angular);
"use strict";!function(o){o.module("lmxApp").controller("modalReplaceCardController",["$rootScope","$scope","$uibModalInstance","card","cardsService","notification","configurationService",function(o,c,e,a,r,i,n){r.setArea("cardModal"),i.clearNotifications("cardModal"),c.inProgress=!1,c.model={cardNumber:"",password:""},c.cvcCodeCardsRegistration=n.options.cvcCodeCardsRegistration,c.cvcCodeCardsRegistration&&(c.model.cvcCode=""),c.replaceCard=function(){c.inProgress=!0,r.replaceCard(a.id,c.model).then(function(c){o.$broadcast("cardReplaced"),e.close(c.data)})["finally"](function(){c.inProgress=!1})},c.cancel=function(){e.dismiss()}}])}(angular);
"use strict";!function(o){o.module("lmxApp").controller("modalSetCardController",["$rootScope","$scope","$uibModalInstance","cardsService","notification","configurationService",function(o,e,c,n,r,a){n.setArea("cardModal"),r.clearNotifications("cardModal"),e.inProgress=!1,e.model={cardNumber:""},e.cvcCodeCardsRegistration=a.components.cards.cvcCodeCardsRegistration,e.cvcCodeCardsRegistration&&(e.model.cvcCode=""),e.setCard=function(){e.inProgress=!0,n.setCard(e.model).then(function(o){c.close(o.data)})["finally"](function(){e.inProgress=!1})},e.cancel=function(){c.dismiss()}}])}(angular);
"use strict";!function(n){n.module("lmxApp").directive("confirmClick",["$translate","userConfirmationService",function(n,i){return{link:function(c,e,r){n("alerts.areYouSure").then(function(n){var t=n,o=r.confirmClick||t,u=r.confirmedClick;e.bind("click",function(){i(o).then(function(){c.$eval(u)})})})}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("coupon",function(){return{restrict:"E",replace:!0,templateUrl:"app/directives/coupon/coupon.html"}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("datePicker",["$locale",function(t){return{restrict:"E",require:"ngModel",scope:{initDate:"=?",timezone:"@",inputClass:"@"},replace:!0,link:{pre:function(t,i,a){var n=e.element(i[0].children[0]);for(var r in a.$attr)a.$attr.hasOwnProperty(r)&&n.attr(a.$attr[r],a[r]);var o=new Date;t.modelOptions={allowInvalid:!0},t.modelOptions.timezone=t.timezone||o.getTimezoneOffset()*-1,t.initDate=t.initDate||o},post:function(t,i,a,n){function r(t){return e.isDefined(a.asUtc)&&e.isDefined(t)&&t instanceof Date}var o={ru:"dd.MM.yyyy"};t.dateFormat=o.ru,t.options={showWeeks:!1,initDate:t.initDate,formatMonth:"LLLL",formatDayTitle:"LLLL yyyy"},t.isOpen=!1,t.toggleCalendar=function(i,a){t.isOpen=e.isDefined(a)?a:!t.isOpen,t.isOpen||(t.$$childHead.showPicker="date")},t.$watch("model",function(i,a){!e.isDefined(a)&&e.isDefined(i)&&n.$setValidity("date",!0),r(i)&&(i=i.toUTCDate(!0)),n.$setViewValue(i),t.validateModel()}),t.validateModel=function(e){var i=!e||!e.target.value.length||t.model instanceof Date;n.$setValidity("date",i),n.$validators.hasOwnProperty("required")&&n.$$attr.required&&n.$setValidity("required",e&&e.target.value.length||!!t.model)},n.$render=function(){var e=n.$viewValue;r(e)&&(e=e.toUTCDate()),t.model=e},i.on("$destroy",function(){t.isOpen&&e.element("body").children("ul[date-picker-wrap].datetime-picker-dropdown").remove()})}},templateUrl:"app/directives/datePicker/datePickerView.html"}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("dateTimePicker",["$locale","$translate","datePickerDirective",function(t,i,a){function r(e){i(["datePicker.date","datePicker.time"]).then(function(t){var i={ru:"dd.MM.yyyy HH:mm"};e.dateFormat=i.ru,e.timepickerOptions={showMeridian:e.dateFormat.match(/h/)},e.buttonsOptions={show:!0,date:{show:!0,text:t["datePicker.date"]},time:{show:!0,text:t["datePicker.time"]},now:{show:!1},today:{show:!1},clear:{show:!1},close:{show:!1}}})}return r.$inject=["$scope"],e.extend({},a[0],{templateUrl:"app/directives/dateTimePicker/dateTimePickerView.html",controller:r})}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("endDateTimePicker",["dateTimePickerDirective",function(t){var n=t[0];return e.extend({},n,{controller:["$scope",function(t){n.controller(t),t.$watch("model",function(n){n&&e.isDate(n)&&t.model.setSeconds(59)})}]})}])}(angular);
"use strict";!function(n){n.module("lmxApp").directive("eventAction",["$log",function(n){return{restrict:"A",link:function(e,t,i){return i.event?void e.$on(i.event,function(){e.$eval(i.eventAction)}):void n.error("Не указан аттрибут event")}}}])}(angular);
"use strict";!function(a){a.module("lmxApp").directive("fallbackImage",["$log","configurationService",function(a,e){return{restrict:"A",scope:{fallbackTitle:"@",fallbackImage:"@"},link:function(i,t){var l=t[0];return"img"!==l.tagName.toLowerCase()?void a.warn("fallbackImage directive can be used with <img> tag only"):void(l.onerror=function(){this.onerror="",this.src=e.imagesPath+(i.fallbackImage||"noimage.png"),i.fallbackTitle&&(this.title=i.fallbackTitle)})}}}])}(angular);
"use strict";!function(o){o.module("lmxApp").directive("favoriteGood",["configurationService",function(o){return{restrict:"E",replace:!0,scope:{favoriteGood:"<",changeGood:"<"},templateUrl:"app/directives/favoriteGoods/favoriteGood/favoriteGood.html",link:function(e){e.favoriteGoodsImagesUrl=o.components.favoriteGoods.favoriteGoodsImagesUrl}}}])}(angular);
"use strict";!function(o){o.module("lmxApp").directive("lmxFavoriteGoods",["favoriteGoodsService","modalService","userConfirmationService","translateFilter","routingService",function(o,e,t,i,r){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/favoriteGoods/favoriteGoods.html",link:function(n){function a(){n.inProgress=!0,o.getFavoriteGoodsList({fromDate:new Date,toDate:new Date}).then(function(e){return 0===e.length?void(n.inProgress=!1):(f=e[0],void o.getFavoriteGoods(f.id).then(function(o){n.favoriteGoods=o})["finally"](function(){n.inProgress=!1}))})}function s(e,t){n["goodsInProgres_"+e]=!0,o.changeFavoriteGood(f.id,{position:e,goodsId:t}).then(function(){a()})["finally"](function(){n["goodsInProgres_"+e]=!1})}function d(o,e){var r=i("favoriteGoods.modal.selectFavoriteGood")+' "'+e.name;o.good&&0!==o.good.id&&(r+='" '+i("favoriteGoods.modal.instead")+' "'+o.good.name),r+='"?',t(r,"info").then(function(){s(o.position,e.id)})}function l(o,t){var i={templateUrl:"app/directives/favoriteGoods/modal/"+o+".html",size:"lg",controller:o+"Controller",backdrop:!0,keyboard:!0,windowClass:"modal-favorite-goods",resolve:{goodsGroupId:n.favoriteGoods.goodsGroupId}};e.open(i).result.then(function(o){d(t,o)})}n.inProgress=!0;var f={};n.offersUrl=r.pages.offers,a(),n.changeGood=function(o){l("modalSelectNewFavoriteGood",o)}}}}])}(angular);
"use strict";!function(t){t.module("lmxApp").service("favoriteGoodsService",["$http","configurationService",function(t,o){function e(t){u=t}function r(o){return t.get(s,{area:u,params:o}).then(function(t){return t.data})}function n(o){return t.get(s+o,{area:u}).then(function(t){return t.data})}function a(o,e){return t.get(c+o+"/catalog",{area:u,params:e}).then(function(t){return t.data})}function i(o,e){var r="?position=";return r+=e.position,r+="&goodsId=",r+=e.goodsId,t.post(s+o+r,{params:e},{area:u}).then(function(t){return t})}var u,s=o.host+"api/user/favoriteGoods/",c=o.host+"api/goodsGroups/";return{setArea:e,getFavoriteGoodsList:r,getFavoriteGoods:n,getCategories:a,changeFavoriteGood:i}}])}(angular);
"use strict";!function(o){o.module("lmxApp").directive("goodsOrCategory",["backendTypesService","favoriteGoodsService",function(o,e){return{restrict:"E",replace:!0,scope:{goodsGroupId:"<",goodsOrCategory:"<"},templateUrl:"app/directives/favoriteGoods/modal/goodsOrCategory/goodsOrCategory.html",link:function(r){function t(){if(!r.nodeItems){r.inProgress=!0;var o={parentNodeId:r.goodsOrCategory.id,from:0,count:1e5};e.getCategories(r.goodsGroupId,o).then(function(o){r.nodeItems=o})["finally"](function(){r.inProgress=!1})}}var i=o.enums.goodsCatalog;r.isCategory=r.goodsOrCategory.$type===i.node,r.isShow=!1,r.inProgress=!1,r.changeVisibilityCategoryList=function(){r.isShow=!r.isShow,r.nodeItems||r.inProgress||t()},r.selectNewFavoriteGood=function(){r.$emit("goodSelected",r.goodsOrCategory)}}}}])}(angular);
"use strict";!function(o){o.module("lmxApp").controller("modalSelectNewFavoriteGoodController",["$scope","$uibModalInstance","favoriteGoodsService","goodsGroupId",function(o,e,n,t){function r(){o.inProgress=!0,n.getCategories(t).then(function(e){var r=e[0],i={parentNodeId:r.id,from:0,count:1e5};n.getCategories(t,i).then(function(e){o.categories=e})["finally"](function(){o.inProgress=!1})},function(){o.inProgress=!1})}o.inProgress=!0,o.categories=[],o.cancel=e.dismiss,o.goodsGroupId=t,o.$on("goodSelected",function(o,n){e.close(n)}),r()}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxFeedback",["$q","feedbackService","$interval",function(e,n,t){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/feedback/feedback.html",link:function(s){function a(){s.messageModel={text:"",attachment:null}}function c(){return n.getMessages().then(function(e){s.messages=e,r()})["finally"](function(){s.inProgress=!1})}function r(){s.$broadcast("updateScroller")}s.inProgress=!0,a(),c();var i=t(function(){c()},6e4);s.$on("$destroy",function(){t.cancel(i)}),s.send=function(t){s.sendInProgress=!0;var r=[];r.push(n.sendMessage(s.messageModel.text)),s.messageModel.attachment&&r.push(n.sendAttachment(s.messageModel.attachment)),t.$submitted=!1,e.all(r)["finally"](function(){s.sendInProgress=!1,s.inProgress=!0,a(),c()})}}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").service("feedbackService",["$http","configurationService","backendTypesService",function(e,t,n){function s(){return e.get(c).then(function(e){return e.data})}function a(e){var t={$type:o.supportMessages.comment,message:e};return u(t)}function r(e){var t={$type:o.supportMessages.attachments,attachments:{$values:[{$type:o.support.attachment,FileName:e.filename,contentType:e.filetype,Content:{$type:"System.Byte[], mscorlib",$value:e.base64}}]}};return u(t)}function u(t){return e.post(c,t).then(function(e){return e.data})}var c=t.host+"api/Support/Messages",o=n.enums;return{getMessages:s,sendMessage:a,sendAttachment:r}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("fileInput",["$timeout","$translate",function(t,n){return{restrict:"E",replace:!0,require:{ngModel:"ngModel",form:"^^form"},scope:!0,templateUrl:"app/directives/fileInput/fileInput.html",link:function(o,r,i,a){function l(){t(function(){o.loader=!0})}function u(){t(function(){o.loader=!1})}function c(e){u(),o.loadError.value=!0,o.loadError.text=e,o.clearAttachment()}var f=a.ngModel,m=a.form;o.inputName="file",o.loader=!1,o.loadError={value:!1},f.$render=function(){o.attachment={fileInfo:f.$modelValue}},o.clearAttachment=function(e){e&&(e.stopPropagation(),e.preventDefault()),o.attachment.fileInfo=null},o.onFileLoadError=function(e,t){t.abort(),c()},o.onFileLoadSuccess=function(){u(),o.loadError.value=!1},o.onFileLoadStart=function(){l()},o.$watch("attachment",function(e){f.$setViewValue(e.fileInfo)},!0),o.$watch(function(){return m[o.inputName]?m[o.inputName].$error:void 0},function(t){e.isObject(t)&&Object.keys(t).length&&(t.maxsize?(n("file.maxsizeError").then(c),m[o.inputName].$setValidity("maxsize",!0)):c())},!0)}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("formGroup",["$filter","$translate","$rootScope","$timeout","passwordRequirementsService",function(r,t,i,n,a){function o(e){t("validationMessages."+e).then(function(r){l[e]=r})}for(var l={},s=["defaultMsg","email","minLength","maxLength","min","max","required","date","pattern","number","url","greaterThan","greaterThanEqual","lessThan","lessThanEqual","requiredItems","digitsAfterComma","integer","notEmptyGuid","isGuid","isPhone","isEmail","isEqualPasswords"],u=0;u<s.length;++u)o(s[u]);return{restrict:"E",require:"^form",transclude:!0,scope:{labelText:"@",labelAlign:"@",viewMode:"=",viewModeValue:"=",hint:"@"},templateUrl:"app/directives/formGroup/formGroupTemplate.html",link:function(t,o,s,u){t.labelAlign=t.labelAlign||"left",n(function(){return e.element(o[0].querySelector("[id]"))}).then(function(n){function o(r,t){var i=e.unNormalizeDirective(t);return r.attr("data-ng-"+i)||r.attr("ng-"+i)||r.attr(i)}function s(e,r){for(;null!==e;){var t=e.$eval(r);if(void 0!==t)return t;e=e.$parent}}if(n&&0!==n.length&&""!==u.$name){t.itemId=n.attr("id"),t.form=u;var m=t.$watch(function(){return u[n.attr("name")]},function(r){e.isDefined(r)&&(t.model=r,m())},!0);i.$on("validationErrors",function(r,i){var n=t.model?t.model.$name.toLowerCase():"";i.hasOwnProperty(n)&&(t.model.$error.validationErrors=i[n],t.model.$setValidity("validationError",!1));var a=t.$watch("model.$viewValue",function(r,i){e.isDefined(i)&&r!==i&&(delete t.model.$error.validationErrors,t.model.$setValidity("validationError",!0),a())})}),t.errorMessage=function(e,i){var u=o(n,e),m=o(n,e+"Filter"),d=o(n,e+"Message"),f=d||l[e]||a.getErrorsDictionary()[e].description;if(f.match(/{\d+}/)){var c=s(t,u);if(m)if(m.match(/,/))for(var v=m.split(","),g=0;g<v.length;g++)c=r(v[g])(c);else c=r(m)(c);var h=[i];["minLength","maxLength"].contains(e)&&(h=[i.length]),f=f.format([c],h)}return f}}})}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxHistory",["historyService","cardsService","configurationService","routingService",function(r,t,a,n){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/history/history.html",link:function(o,i,s){function c(e){for(var r,t={},a=0;a<e.length;a++){r=e[a],t[r.rewardType]||(t[r.rewardType]={});var n=r.amount.currency;t[r.rewardType][n]=currency(t[r.rewardType][n]||0).add(currency(r.amount.amount)).value}return t}function d(e){for(var r,t={},a=0;a<e.length;a++)r=e[a],t[r.rewardType]=r.amount.currency;return t}function u(t){o.inProgress=!0;var n=Object.assign({isLoadMore:!1,from:o.from},t),i=o.fromDate?new Date(o.fromDate.setHours(0,0,0,0)):null,s=o.toDate?new Date(o.toDate.setHours(23,59,59,999)):null;r.query(n.from,o.onPage,i,s,parseInt(o.selectedCard,10)||null).then(function(r){r.rows.forEach(function(e){if(Array.isArray(e.data.rewards)&&e.data.rewards.length&&(e.rewardsResult=c(e.data.rewards),e.rewardsType=d(e.data.rewards)),e.brand&&e.brand.images){var r=e.brand.images.getObjectByField("description","logo_square");e.logoSquareUrl=r?a.host+"api/Files/"+r.fileId:void 0}}),n.isLoadMore?e.extend(o.history,r,{rows:o.history.rows.pushArray(r.rows)}):o.history=r,o.isPaginated&&(o.pages=Math.ceil(o.history.allCount/o.onPage))})["finally"](function(){o.inProgress=!1,o.isReload=void 0})}function l(e){var r=new Date;return r.setHours(0,0,0,0),r.setMonth(r.getMonth()-e)}o.onPage=parseInt(s.onPage,10)||10,o.isPreview=e.isDefined(s.preview),o.isPaginated=!a.components.history.loadMoreButton,o.cardsInProgress=!0,o.selectedCard=0,o.from=0,o.currentPage=1,o.history=void 0,o.currency=currency,o.historyUrl=n.pages.history,t.getCards().then(function(e){o.cards=e})["finally"](function(){o.cardsInProgress=!1}),o.increaseFrom=function(){o.from+=o.onPage,o.currentPage+=1,u({isLoadMore:!o.isPaginated})},o.paginationChange=function(){o.from=(o.currentPage-1)*o.onPage,u({from:o.from})},o.reloadHistory=function(){o.isReload=!0,o.currentPage=1,o.from=0,u()},o.resetFilters=function(){o.toDate=new Date,o.fromDate=e.isDefined(s.allTime)?new Date(0):new Date(l(3)),o.selectedCard=0,o.reloadHistory()},o.resetFilters()}}}])}(angular);
"use strict";!function(t){t.module("lmxApp").service("historyService",["$http","configurationService",function(t,r){function e(e,i,n,o,u){return t.get(r.host+"v1.1/History",{params:{"filter.from":e||0,"filter.count":i||10,"filter.fromDate":n,"filter.toDate":o||new Date,"filter.cardId":u}}).then(function(t){return t.data})}return{query:e}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("html",["$locale","$q","$rootScope","$translate","$window","authService","bowser","configurationService","emailConfirmationCheckerService","globalService","notification","routingService","socialActionCheckerService","translateFilter","messageService","announcementService","componentStateService","phoneInputService","stateService",function(t,o,n,a,r,i,c,s,l,u,p,g,f,d,m,h,S,v,C){return{restrict:"E",replace:!1,link:function(m){function $(){s.common.requestUserStatus&&u.getUserStatus().then(function(e){n.userStatus=e})}function b(){m.allRequestsCompleted=!1}function A(e){var t=[],a=[],r=u.getCards().then(function(e){a=e});if(t.push(r),"loadUserInfo"!==e.name){var i=u.getUserInfo().then(function(e){n.userInfo=e});t.push(i)}o.all(t).then(function(){for(var e,t,o=0;o<a.length;o++){var r=a[o];if(r.cardOwnerInfo.personUid===n.userInfo.personUid&&(e||(e=r),!r.block)){t=r;break}}m.cardInfo=t||e})}n.locale=t,n.currentLocation="",n.authInProcess=!1,n.appLocationParts=[],m.apiHost=s.host,m.armHost=m.apiHost.replace(/public/,"arm").replace(/api\/$/,"#/messageSms"),m.options=s.options,m.allRequestsCompleted=!0,v.getPhoneSettings(),n.isAuth=i.loggedIn,n.changeLocation=u.changeLocation,n.goToDefaultPage=u.goToDefaultPage,n.logout=i.logout,r.lmxLogout=i.logout,i.loggedIn()&&$(),S.populateComponentStates(),n.setState=C.setState,n.getState=C.getState,n.generateEvent=function(e,t){n.$broadcast(e,t)},m.$on("$locationChangeStart",function(){g.checkOnUnavailablePageForAuthenticatedUser(),n.currentLocation=u.getCurrentLocation(),n.appLocationParts=u.getApplicationURLParts(m.currentLocation),p.clearAllNotifications()}),m.$on("$locationChangeSuccess",function(e,t,o){if(r.GoogleAnalyticsObject){var n=r[r.GoogleAnalyticsObject];n&&(n("set","page",t.replace(g.getLocationURL(),"")),n("send","pageview"))}t!==o&&g.getSearchParams().params&&l.parseEmailConfirmation()}),m.$on("loadUserInfo",A),m.$on("buyCoupon",A),m.$on("initialsUpdated",function(e){u.removeUserData(),A(e)}),m.$on("cardReplaced",A),m.$on("cardBlockStateChanged",A),m.$on("login",function(){b(),$(),S.populateComponentStates(),h.checkAuthAnnouncement()}),m.$on("requestsCompleted",function(){a.onReady(function(){a.use()&&(m.allRequestsCompleted=!0)}),s.common.obsoleteBrowserDetection&&c.msie&&p.addCritical(d("obsoleteBrowserAlert"))}),m.$on("showGlobalLoader",b),i.loadAuth()["finally"](function(){l.parseEmailConfirmation(),f.parseSocialAction()}),m.$watch(function(){return i.loggedIn()},function(t){var o="lmx-authorised",n="lmx-unauthorised",a=e.element(document.querySelector("body"));t?(a.addClass(o),a.removeClass(n)):(a.removeClass(o),a.addClass(n))})}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("identifiers",function(){return{restrict:"E",replace:!0,require:"ngModel",scope:{identifiers:"<"},templateUrl:"app/directives/identifiers/identifiers.html",link:function(e,i,t,r){r.$render=function(){e.model={currentIdentifier:r.$viewValue||e.identifiers[0]}},e.$watch("model.currentIdentifier",function(e){r.$setViewValue(e)})}}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("inlineLoader",["$compile","classPrefixerService",function(i,n){return{restrict:"E",link:function(r,l,t){var a=l.html()?'ng-show="'+l.html()+'"':"",c="inline-loader";e.isDefined(t.line)&&(c+=" line"),c=n.getPrefixed(c);var s='<span class="'+c+'" '+a+"></span>",o=i(s)(r);l.replaceWith(o)}}}])}(angular);
"use strict";!function(i){i.module("lmxApp").directive("repeatLimit",["$filter",function(t){return{restrict:"E",scope:{list:"=",delimiter:"@",dictionary:"=",defaultMessage:"@",onShowCallback:"&"},templateUrl:"app/directives/limiters/repeatLimitDirective.html",link:function(e,l,a){var n,r=a.field||null;e.limit=a.limit||5;var s=a.limit||5,o=i.isDefined(e.dictionary);if(e.textLimit=a.textLimit,e.onShowCallback=e.onShowCallback(),e.toggleLimit=function(){i.isFunction(e.onShowCallback)?e.onShowCallback(e.items):e.limit=!e.limit&&s},e.items=[],o||r)for(var m=0;m<e.list.length;m++)n=r?e.list[m][r]:e.list[m],o&&(n=e.dictionary[n]),e.items.push(n);else e.items=e.list;if(i.isDefined(a.translationTable)){var c=i.isDefined(a.translateEnum),u=t(c?"translateEnum":"translate");e.items=e.items.map(function(i){return c||(i=a.translationTable+"."+i),u(i,a.translationTable)})}}}}])}(angular);
"use strict";!function(i){i.module("lmxApp").directive("textLimit",function(){return{restrict:"E",scope:{text:"="},templateUrl:"app/directives/limiters/textLimitDirective.html",link:function(i,t,e){i.framing=e.framing||"",i.limit=e.limit||100;var m=e.limit||100;i.toggleLimit=function(){i.limit=!i.limit&&m}}}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxApp",function(){return{restrict:"E",replace:!0,templateUrl:"app/directives/lmxApp/lmxApp.html"}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxAppMenu",function(){return{restrict:"E",replace:!0,templateUrl:"app/directives/lmxAppMenu/lmxAppMenu.html"}})}(angular);
"use strict";!function(t){t.module("lmxApp").directive("lmxMap",["mapService",function(t){return{restrict:"E",replace:!0,scope:{data:"="},template:"<div></div>",link:function(a,n){var e=new t;e.setYmaps(n[0],a.data,a.options),a.$on("openBalloon",function(t,a){e.showBalloon(a)}),a.$watch("data",function(t,a){t!==a&&e.updateData(t)})}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxModal",["$log","configurationService","globalService","modalService",function(o,n,t,c){return{restrict:"E",scope:{className:"@",closeOn:"@",openOn:"@",size:"@",templateUrl:"@",backdrop:"@",closeOnEsc:"@"},link:function(o,l,s){function a(){var l;switch(o.backdrop){case"false":l=!1;break;case"true":l=!0;break;default:l="static"}var a=c.open({size:o.size,templateUrl:n.templatesPath+o.templateUrl,controller:"modalController",windowTopClass:o.className,backdrop:l,keyboard:"true"===o.closeOnEsc,resolve:{closeEventName:function(){return o.closeOn}}});e.isDefined(s.resetLocationOnClose)&&a.closed.then(function(){t.changeLocation("")}),o.$on("$destroy",a.dismiss)}o.openOn?o.$on(o.openOn,a):a()}}}])}(angular);
"use strict";!function(n){n.module("lmxApp").controller("modalController",["$uibModalInstance","$scope","closeEventName",function(n,o,l){o.$on(l,n.close),o.cancel=function(){n.dismiss()}}])}(angular);
"use strict";!function(r){r.module("lmxApp").directive("lmxScroller",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{},templateUrl:"app/directives/lmxScroller/lmxScroller.html",link:function(r,l){var e=baron({root:l[0],scroller:".scroller",barOnCls:"_scrollbar",track:".scroller-track",bar:".scroller-bar",cssGuru:!0,direction:"v"});r.$on("updateScroller",function(){e.update()})}}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxTabs",function(){return{restrict:"E",replace:!0,require:"ngModel",scope:{list:"<",viewField:"@"},templateUrl:"app/directives/lmxTabs/lmxTabs.html",link:function(t,l,i,n){if(t.selectItem=function(e){t.selectedItem=e,n.$setViewValue(t.selectedItem)},n.$render=function(){var e=t.list.contains(n.$modelValue)?n.$modelValue:t.list[0];t.selectItem(e)},!e.isArray(t.list)){var s=[];e.forEach(t.list,function(e){s.push(e)}),t.list=s}t.$watch(function(){return n.$viewValue},function(e){e&&(t.selectedItem=e)})}}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("loader",["$compile","$templateCache","classPrefixerService",function(r,i,l){return{restrict:"A",link:function(t,a,d){if(d.loader){a.addClass(l.getPrefixed("relative loader-container"));var n=i.get("loader.html")||"",o=e.element('<div class="'+l.getPrefixed("loader mh120")+'"ng-show="'+d.loader+'">'+n+"</div>");a.prepend(o),r(o)(t)}}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("localeSwitcher",["localeService",function(e){return{restrict:"E",replace:!0,controller:["$scope",function(t){t.availableLanguages=e.getRegisteredLocales(),t.isCurrentLocale=function(t){return t===e.getCurrentLocale()},t.switchLocale=function(t){e.setLocale(t)}}],templateUrl:"app/directives/localeSwitcher/localeSwitcher.html"}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("menuItem",function(){return{restrict:"E",replace:!0,template:function(n,t){var r,a="current-menu-item",c=n[0].innerText;return r=e.isDefined(t.href)?'ng-href="'+t.href+'"':e.isDefined(t.callback)?'ng-click="'+t.callback+'"':'href="/#'+t.targetLocation+'"','<li class="menu-item" ng-class="{\''+a+"': currentLocation === '"+t.targetLocation+"'}\"><a "+r+">"+c+"</a><span>"+c+"</span></li>"}}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxMerchant",["LIMITS","$q","$timeout","$translate","locationService","mapService","merchantService","brandService","offerService","translatePluralService","configurationService",function(e,n,t,r,i,a,s,o,c,l,f){return{restrict:"E",replace:!0,templateUrl:"app/directives/merchant/merchant.html",link:function(a,h,d){function m(){return o.getBrands().then(function(e){b=e.toDictionary("id")})}function u(){B.then(function(){for(var e=0;e<a.merchants.length;++e){var n=a.merchants[e];if(b[n.brandId]){var t=b[n.brandId].images.getObjectByField("description","logo");n.imgUrl=t?f.host+"api/Files/"+t.fileId:void 0;var r=b[n.brandId].images.getObjectByField("description","marker");n.markerImgUrl=r?f.host+"api/Files/"+r.fileId:void 0}}})}function g(){return r(l.getTranslationPath(a.merchants.length,"plurals.merchant"),{number:a.merchants.length}).then(function(e){a.merchantsCountText=e})}function p(e){return a.loaders.merchantsList=!0,s.getMerchants(e||{}).then(function(n){return e&&e.cityId&&(L[e.cityId]=n),a.merchants=n,u(),g()})["finally"](function(){a.loaders.merchantsList=!1})}function y(t){a.loaders.cities=!0;var r=v[t]?n.when(v[t]):i.getCitiesByRegion({count:e.INT32_MAX},t);return r.then(function(e){v[t]=e,a.cities=e,a.cities.length?a.city={id:a.cities[0].id}:a.loaders.merchantsList=!1})["catch"](function(){a.loaders.merchantsList=!1})["finally"](function(){a.loaders.cities=!1})}a.loaders={inProgress:!0,offers:!1,cities:!1,merchantsList:!0,regions:!1,brands:!0,ymaps:!0},a.filterByRegion=f.components.merchant.filterByRegion,a.merchantsLimit=parseInt(d.limit,10)||10,a.offers=[];var v=[],L=[],I=a.merchantsLimit,b={},M=a.filterByRegion?["loaders.cities","loaders.regions","loaders.merchantsList"]:["loaders.merchantsList"],O=a.$watchGroup(M,function(e){var n=!e.reduce(function(e,n){return e||n});n&&(a.loaders.inProgress=!1,O())}),B=m()["finally"](function(){a.loaders.brands=!1});a.filterByRegion?(a.loaders.regions=!0,i.getRegions({count:e.INT32_MAX}).then(function(e){a.regions=e,a.regions.length?a.region={id:a.regions[0].id}:a.loaders.merchantsList=!1})["catch"](function(){a.loaders.merchantsList=!1})["finally"](function(){a.loaders.regions=!1})):p(),a.$watch("region.id",function(e,n){e!==n&&y(e)}),a.$watch("city.id",function(e,n){e!==n&&(a.clearOffers(),L[e]?(a.loaders.merchantsList=!0,a.changeListExpansionState(),a.merchants=L[e],g()["finally"](function(){a.loaders.merchantsList=!1})):p({cityId:e}))}),a.showMerchantOnMap=function(e){a.$broadcast("openBalloon",e),a.selectedTab.value=a.tabs.onMap},a.showOffers=function(e,n){a.loaders.offers=!0,a.titleOfMerchantOffers=n,a.clearOffers(),c.getOffers({merchantId:e}).then(function(e){a.offers.pushArray(c.transformOfferImages(e))})["finally"](function(){a.loaders.offers=!1})},a.clearOffers=function(){a.offers.length=0},a.changeListExpansionState=function(e){a.merchantsLimit=e?a.merchants.length:I},r(["merchants.onMap","merchants.asList"]).then(function(e){a.tabs={onMap:{name:e["merchants.onMap"]},asList:{name:e["merchants.asList"]}},a.selectedTab={value:a.tabs.onMap}}),a.$on("yMapsBalloonOpened",function(e,n){a.showOffers(n.id,n.name)}),a.$on("yMapsBalloonClosed",function(){t(a.clearOffers)}),a.$on("ymapsReady",function(){a.loaders.ymaps=!1})}}}])}(angular);
"use strict";!function(t){t.module("lmxApp").factory("merchantService",["$http","configurationService",function(t,n){function r(n){return t.get(e,{params:n||{}}).then(function(t){return t.data})}var e=n.host+"api/Merchants";return{getMerchants:r}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxMessage",["messageService","componentStateService","configurationService",function(e,s,n){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/message/message.html",link:function(t){t.messages=[],t.getMessages=function(){t.isProgress=!0,e.getMessages().then(function(e){t.messages=e})["finally"](function(){t.isProgress=!1})},t.setAsRead=function(t){t.isReaded||i.contains(t)||(i.push(t),e.setAsRead(t.id).then(function(){t.isReaded=!0,n.options.requestUnreadMessage&&s.hasUnReadMessages()})["finally"](function(){i.remove(t)}))},t.toggleView=function(e){e._isShowText=!e._isShowText,t.setAsRead(e)},t.remove=function(s){a.contains(s)||(a.push(s),e.removeMessage(s.id).then(function(){t.messages.remove(s)})["finally"](function(){a.remove(s)}))};var i=[],a=[];t.getMessages()}}}])}(angular);
"use strict";!function(t){t.module("lmxApp").factory("messageService",["$http","configurationService","LIMITS",function(t,e,n){function r(){return t.get(i,{params:{from:0,count:n.INT32_MAX}}).then(function(t){return t.data})}function o(e){return t.post(i+"/"+e+"/Read")}function u(e){return t["delete"](i+"/"+e)}function a(){return t.get(i+"/Count").then(function(t){return t.data})}var i=e.host+"api/Notification";return{getMessages:r,removeMessage:u,setAsRead:o,getUnreadNotificationCount:a}}])}(angular);
"use strict";!function(l){l.module("lmxApp").directive("classToggleClick",["$log","classPrefixerService",function(l,c){return{restrict:"A",scope:{classToggleClick:"="},link:function(e,i,s){return s.classToggleClick?void i.bind("click",function(){var l=s.classToggleClick;e.classToggleClick&&(l=e.classToggleClick),i.toggleClass(c.prefix+l)}):void l.warn("You cannot use classToggleClick with undefined attribute value",i)}}}])}(angular);
"use strict";!function(n){n.module("lmxApp").directive("outsideClick",["$document",function(n){return{link:function(t,i,c){var o=c.outsideClick,u=function(n){var c=i[0].contains(n.target),u=i[0]===n.target;u||c||t.$apply(o)};n.on("click",u),i.on("$destroy",function(){n.off("click",u)})}}}])}(angular);
"use strict";!function(n){n.module("lmxApp").directive("outsideClick",["$document",function(n){return{link:function(t,i,c){var o=c.outsideClick,u=function(n){var c=i[0].contains(n.target),u=i[0]===n.target;u||c||t.$apply(o)};n.on("click",u),i.on("$destroy",function(){n.off("click",u)})}}}])}(angular);
"use strict";!function(o){o.module("lmxApp").controller("couponViewModalController",["$scope","$uibModalInstance","showcaseService","coupon",function(o,n,e,i){o.coupon=i,o.isRefundable="ReadyToUse"===i.state&&i.isRefundable,o.cancel=n.dismiss,o.barcodeOptions={width:2,height:100,quite:10,displayValue:!0,font:"monospace",textAlign:"center",fontSize:18,backgroundColor:"",lineColor:"#000"},o.refundCoupon=function(i){o.inProgress=!0,e.refundUserCoupon(i).then(function(o){n.close(o)})["finally"](function(){o.inProgress=!1})}}])}(angular);
"use strict";!function(n){n.module("lmxApp").directive("lmxMyCoupons",["modalService","showcaseService",function(n,e){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/myCoupons/myCoupons.html",link:function(n){function o(){n.inProgress=!0,e.getUserCoupons(!0).then(function(e){n.coupons=e})["finally"](function(){n.inProgress=!1})}n.coupons=[],n.barcodeOptions={width:2,height:100,quite:10,displayValue:!0,font:"monospace",textAlign:"center",fontSize:16,backgroundColor:"",lineColor:"#000000"},n.isRefundable=function(n){return"ReadyToUse"===n.state&&n.isRefundable},n.refundCoupon=function(t){n.inProgress=!0,e.refundUserCoupon(t).then(function(){o()})["catch"](function(){n.inProgress=!1})},o()}}}])}(angular);
"use strict";!function(n){n.module("lmxApp").run(["$rootScope","notification",function(n,o){n.$on("$locationChangeSuccess",function(){o.clearNotifications()})}])}(angular);
"use strict";!function(i){i.module("lmxApp").directive("lmxNotifications",["notification","notificationTypes",function(i,t){return{restrict:"E",replace:!0,scope:{area:"@"},templateUrl:"app/directives/notifications/notificationsView.html",link:function(n){n.notifications=i.getNotifications(n.area),n.clearNotifications=i.clearNotifications,n.notificationTypes=t,n.notificationsAreEmpty=function(){return 0===Object.keys(n.notifications.value).length}}}}])}(angular);
"use strict";!function(i){i.module("lmxApp").factory("notification",["notificationTypes","$log",function(i,n){function t(){s={value:{}},v={}}function a(i){return i?(v[i]||r(i),v[i]):s}function o(i){i?(r(i),v[i].value={}):s.value={}}function c(){s.value={},v={}}function e(n,t){d(i.message,n,t)}function u(n,t){d(i.error,n,t)}function f(n,t){d(i.critical,n,t)}function r(i){v[i]||l(i)}function l(i){v[i]={value:{}}}function d(i,t,a){n.info("Notification added",{area:a,text:t,type:i}),a?(r(a),v[a].value[t]=i):s.value[t]||(s.value[t]=i)}var s,v;return t(),{getNotifications:a,clearAllNotifications:c,clearNotifications:o,addMessage:e,addError:u,addCritical:f}}])}(angular);
"use strict";!function(e){e.module("lmxApp").controller("offerModalController",["$scope","$translate","$uibModalInstance","offer","offerService","rewardThumbnailTypes","translatePluralService","$window",function(e,n,r,t,a,o,s,f){e.inProgress=!0,e.rewardThumbnailTypes=o,e.offer=t,e.offer.merchants=[],e.cancel=r.dismiss,f.addEventListener("popstate",function(){r.dismiss()}),a.getOfferMerchants(t.id).then(function(r){return e.offer.merchants=r,n(s.getTranslationPath(e.offer.merchants.length,"plurals.merchant"),{number:e.offer.merchants.length}).then(function(n){e.merchantsCountText=n})})["finally"](function(){e.inProgress=!1})}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxOffers",["$q","offerService","brandService","configurationService",function(e,t,f,r){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/offers/offers.html",link:function(e){function f(){e.inProgress=!0,t.getOffers({offerState:e.offerState,offerType:r.enums.communicationOfferTypeEnum.original}).then(function(f){e.offers=t.transformOfferImages(f)})["finally"](function(){e.inProgress=!1})}var n=r.enums;e.states={active:n.offerState.active,comingSoon:n.offerState.commingSoon},e.filterByOfferState=function(t){e.offerState=t,f()},e.filterByOfferState(e.states.active)}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").service("offerService",["$http","configurationService","brandService","LIMITS","modalService","backendTypesService",function(e,r,t,n,a,i){function o(r){var a={"filter.count":n.INT32_MAX};return r.offerState&&(a["filter.offerState"]=r.offerState),r.offerType&&(a["filter.type"]=r.offerType),r.merchantId&&(a["filter.merchantId"]=r.merchantId),e.get(p,{params:a}).then(function(e){return e.data.forEach(function(e){t.populateImagesUrlFromDescription(e.brands)}),e.data})}function f(n){return e.get(p+n).then(function(e){var n=e.data.images.getObjectByField("description",r.userPortalDescriptionType);return e.data.imgUrl=n?g+n.fileId:"undefined",t.populateImagesUrlFromDescription(e.data.brands),e.data})}function d(r){return e.get(p+r+"/Merchants").then(function(e){return e.data})}function u(r){return e.get(p+r+"/details").then(function(e){return e.data})}function l(r,t){return e.get(p+r+"/details/"+t+"/merchants").then(function(e){return e.data})}function s(t,n){var a=r.host+"api/user/attributes/personalOffer/values/"+t,i={goodsIds:n};return e.post(a,i)}function c(e){return e.forEach(function(e){var t=e.images.getObjectByField("description",r.userPortalDescriptionType);e.imgUrl=t?g+t.fileId:"undefined",e.rewardThumbnail&&(e.rewardThumbnail.imgUrl=e.rewardThumbnail.imageId?g+e.rewardThumbnail.imageId:"undefined")}),e}function m(e){a.open({templateUrl:"app/directives/offers/modal/offerModal.html",size:"lg",controller:"offerModalController",windowClass:"modal-offer",backdrop:!0,keyboard:!0,resolve:{offer:e,rewardThumbnailTypes:h}})}var p=r.host+"v1.1/offer/",g=r.host+"api/Files/",h=_.invert(i.enums.rewardThumbnail);return{getOfferById:f,getOfferDetails:u,getOfferMerchants:d,getOffers:o,getOfferDetailMerchants:l,approvePersonalGoods:s,transformOfferImages:c,openCommunicationOfferModal:m,rewardThumbnailTypes:h}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("offersList",["backendTypesService","offerService",function(e,r){return{restrict:"E",replace:!0,scope:{offers:"<"},templateUrl:"app/directives/offers/offersList.html",link:function(e){e.rewardThumbnailTypes=r.rewardThumbnailTypes,e.openCommunicationOfferModal=r.openCommunicationOfferModal}}}])}(angular);
"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach(function(t){_defineProperty(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}!function(e){e.module("lmxApp").directive("lmxOptions",["$window","classPrefixerService","configurationService","localStorageService","notification","optionsService","userAlertService",function(e,t,o,n,r,c,i){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/options/options.html",link:function(s){function p(t){i(t,"success")["finally"](function(){e.location.reload()})}function a(){u?p("Настройки успешно обновлены. Cтраница будет перезагружена для применения настроек локализации."):r.addMessage("Настройки успешно обновлены")}var u=!1;s.components=_objectSpread({},o.components),s.common=_objectSpread({},o.common),s.optionsNames=c.optionsNames,s.api=o.host,s.showcaseApi=o.showcase,s.oAuthClientId=o.oAuthClientId,s.reCaptchaSiteKey=o.reCaptchaSiteKey,s.locales=o.locales,s.saveComponentsOptions=function(){n.set("componentsCurrent",s.components),o.components=_objectSpread({},s.components),a()},s.saveCommonOptions=function(){n.set("commonCurrent",s.common),o.common=_objectSpread({},s.common),a()},s.saveConfiguration=function(e,t){n.set(e,t),p("Конфигурация "+e+" обновлена.<br>Cтраница будет перезагружена для применения настроек.")},s.getType=function(e){switch(_typeof(e)){case"boolean":return"checkbox";case"object":return"textarea";default:return"text"}},s.getClass=function(e){return"boolean"==typeof e?t.prefix+"filled-in":""},s.$watch("locales",function(e,t){e!==t&&(u=!0)})}}}])}(angular);
"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.module("lmxApp").factory("optionsService",["$window","localStorageService",function(e,t){function r(e){return t.get(e)}function o(){var r=e.lmxConfig.components,o=t.get("componentsCurrent"),n=t.get("componentsOrigin");return null!==n&&_.isEqual(r,n)?_objectSpread({},r,{},o):(t.set("componentsCurrent",r),t.set("componentsOrigin",r),r)}function n(){var r=e.lmxConfig.common,o=t.get("commonCurrent"),n=t.get("commonOrigin");return null!==n&&_.isEqual(r,n)?_objectSpread({},r,{},o):(t.set("commonCurrent",r),t.set("commonOrigin",r),r)}var i={authentication:"Авторизация",registration:"Регистрация",cards:"Карты",personalOffers:"Персональные предложения",personalGoods:"Персональные товары",favoriteGoods:"Любимые вкусы",support:"Поддержка",merchant:"Магазины",history:"История операций",social:"Социальные сети",announcement:"Реклама",acceptTenderOfferByCheck:"Автоподтверждение оферты галкой",authCookie:"Установка cookie при авторизации",authorizeOnRegistrationComplete:"Авторизовываться по завершении регистрации",forceRegistrationStartOnLoginAttempt:"Инициировать процесс регистрации незарегистрированного пользователя при попытке входа",ignoreDocsFetchingErrors:"Игнорировать ошибку загрузки документов",map:"Настройки Яндекс-карты",offerFileId:"id файла с офертой",redirectUrlOnRegistrationComplete:"Редирект по завершении регистрации",referralRegistration:"Использование реферальной системы при регистрации",requestUserAttributes:"Запрашивать атрибуты пользователя",shareAuthLoginToRegistration:"Односторонняя связь «авторизация → регистрация»",supportEmail:"Email адрес службы поддержки",enableAppleWalletCards:"Возможность добавить карту в Apple Wallet",enableGoogleWalletCards:"Возможность добавить карту в Google Wallet",userStatusAttributeName:"Логическое имя атрибута статуса пользователя в БД",userPurchasesAmountAttributeName:"Логическое имя атрибута суммы покупок пользователя в БД",favoriteGoodsImagesUrl:"Адрес по которому запрашивать изображения для любимых вкусов",requestUnreadMessage:"Запрашивать непрочитанные сообщения",requestPersonalOffers:"Запрашивать персональные предложения",requestPersonalGoods:"Запрашивать персональные товары",requestUserStatus:"Запрашивать статус пользователя",loadMoreButton:"Кнопка прогрузки данных (true) или пагинация (false)",space:"Идентификатор рекламного места",forceEmailStep:"Пропускаемый шаг регистрации email",cardNumberGraphicalCode:"Показывать штрих\\QR-код карты",filterByRegion:"Фильтрация по регионам",subscriptionTypes:"Типы подписок",notificationTypes:"Типы нотификаторов",authenticationIdentifiers:"Типы возможных авторизаций",resetPasswordIdentifiers:"Типы возможных контактов для восстановления пароля",registrationIdentifiers:"Типы возможных контактов для регистрации пользователя",cvcCodeCardsRegistration:"Возможность добавить карту с cvc-кодом"};return{get:r,getComponents:o,getCommon:n,optionsNames:i}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxPersonalGoods",["$q","backendEnumsService","configurationService","offerService",function(o,r,n,f){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/personalGoods/personalGoods.html",link:function(t){t.inProgress=!0,t.activePersonalOffers=[],t.approvedPersonalOffers=[],t.futurePersonalOffers=[];var s=r.enums.offerState,a=r.enums.communicationOfferTypeEnum.personalGoods,i=f.getOffers({offerState:s.active,offerType:a}).then(function(r){var s={},a={};return a={},r.forEach(function(e){a[e.id]=e,e.approvedGoods=[],s[e.id]=f.getOfferDetails(e.id)}),o.allSettled(s).then(function(o){e.forEach(o,function(e,o){if(e.success){var r=a[o],f=e.value;f.forEach(function(e){e.selected&&(e.imgUrl=e.picture?n.host+"api/Files/"+e.picture:"undefined",r.approvedGoods.push(e))}),r.approvedGoodsCount=r.approvedGoods.length,r.approvedGoodsCount?t.approvedPersonalOffers.push(r):t.activePersonalOffers.push(r)}})})}),c=f.getOffers({offerState:s.commingSoon,offerType:a}).then(function(e){t.futurePersonalOffers=e});o.all([i,c])["finally"](function(){t.inProgress=!1})}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("personalGoodsOffer",["$q","offerService","configurationService","translateFilter","userAlertService","userConfirmationService","routingService",function(e,o,r,s,t,n,a){return{restrict:"E",replace:!0,scope:{offerId:"<",showFullDescription:"<"},templateUrl:"app/directives/personalGoods/personalGoodsOffer/personalGoodsOffer.html",link:function(l){function i(e){l.offerGoods=e,l.offerGoods.forEach(function(e){e.selected&&f.push(e),e.rewardThumbnail&&(e.typeRewardThumbnail=o.rewardThumbnailTypes[e.rewardThumbnail.$type],"imageWithText"===e.typeRewardThumbnail&&(e.rewardThumbnail.imgUrl=e.rewardThumbnail.imageId?r.host+"api/Files/"+e.rewardThumbnail.imageId:"undefined")),e.imgUrl=e.picture?r.host+"api/Files/"+e.picture:"undefined"}),l.availableGoodsCount=l.offer.attribute.maxGoodsCount-f.length,l.selectableGoodsCount=l.availableGoodsCount}function d(){var r={offer:o.getOfferById(l.offerId),offerDetails:o.getOfferDetails(l.offerId)};return l.inProgress=!0,e.all(r).then(function(e){l.offer=e.offer,i(e.offerDetails)})["finally"](function(){l.inProgress=!1})}l.offer={},l.offerGoods=[],l.selectedGoods=[],l.availableGoodsCount=0,l.selectableGoodsCount=0,l.inProgress=!0,l.offerDetailsInProgress=!1,l.personalGoodsUrl=a.pages.personalGoods;var f=[];l.changeSelectedGoods=function(e){e.selected?t(s("personalGoods.alerts.approvedGoodsNotEditable")):l.selectedGoods.contains(e)?l.selectedGoods.remove(e):l.selectableGoodsCount>0?l.selectedGoods.push(e):t(s("personalGoods.alerts.maxGoodsCount"))},l.approveSelectedGoods=function(){l.selectedGoods.length?n(s("personalGoods.alerts.approvalConfirm"),"info").then(function(){l.offerDetailsInProgress=!0,o.approvePersonalGoods(l.offer.attribute.id,l.selectedGoods.fieldValues("goodsId")).then(function(){return l.selectedGoods.length=0,f.length=0,o.getOfferDetails(l.offerId).then(i).then(function(){var e=r.components.personalGoods.personalGoodsApprovalMessage||s("personalGoods.alerts.approvalMessage");t(e)})})["finally"](function(){l.offerDetailsInProgress=!1})}):t(s("personalGoods.alerts.noGoodsSelected"))},l.$watch("selectedGoods.length",function(e){l.selectableGoodsCount=l.availableGoodsCount-e}),d()}}}])}(angular);
"use strict";!function(o){o.module("lmxApp").directive("personalGoodsOfferInfo",["$rootScope",function(e){return{restrict:"E",replace:!0,scope:{offer:"<",showFullDescription:"<"},templateUrl:"app/directives/personalGoods/personalGoodsOfferInfo/personalGoodsOfferInfo.html",link:function(r,n,i){r.isPreview=!e.appLocationParts[1],r.goodsPreview=o.isDefined(i.goodsPreview),r.changeLocation=e.changeLocation}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").controller("personalOfferMapModalController",["$scope","$uibModalInstance","offerService","offerId","detailId",function(e,n,r,o,t){var a;e.inProgress=!0,e.cancel=n.dismiss,a=t?r.getOfferDetailMerchants(o,t):r.getOfferMerchants(o),a.then(function(n){e.merchants=n})["finally"](function(){e.inProgress=!1})}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("personalOffer",["$log","$q","$timeout","backendTypesService","brandService","modalService","offerService","routingService",function(r,o,n,f,l,a,t,i){return{restrict:"E",replace:!0,scope:{offerId:"="},templateUrl:"app/directives/personalOffers/personalOffer/personalOffer.html",link:function(n){function s(){n.inProgress=!0;var e=t.getOfferById(n.offerId).then(function(e){n.personalOffer=e,l.populateImagesUrlFromDescription(n.personalOffer.brands)}),r=t.getOfferDetails(n.offerId).then(function(e){n.offerDetails=e,n.offerDetails.forEach(function(e){e.discount&&e.discount.$type===f.enums.personalOfferDiscount.percent&&(e.discount.value=currency(e.discount.value,{precision:4}).multiply(100).value)})});o.all([e,r])["finally"](function(){n.inProgress=!1})}return n.offerId?(n.personalOffersUrl=i.pages.personalOffers,s(),n.$watch("offerId",function(r,o){e.isDefined(o)&&r!==o&&s()}),void(n.openPersonalOfferMapModal=function(e){a.open({templateUrl:"app/directives/personalOffers/personalOffer/modal/personalOfferMapModal.html",size:"lg",controller:"personalOfferMapModalController",windowClass:"modal-personal-offer-map",backdrop:!0,keyboard:!0,resolve:{offerId:function(){return n.offerId},detailId:function(){return e}}})})):void r.error("Должен быть указан идентификатор персонального предложения")}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("personalOfferContent",["$rootScope","modalService",function(e,r){return{restrict:"E",replace:!0,scope:{personalOffer:"<",showFullDescription:"<"},templateUrl:"app/directives/personalOffers/personalOfferContentView/personalOfferContent.html",link:function(o){o.isPreview=!e.appLocationParts[1],o.openPersonalOfferMapModal=function(){r.open({templateUrl:"app/directives/personalOffers/personalOffer/modal/personalOfferMapModal.html",size:"lg",controller:"personalOfferMapModalController",windowClass:"modal-personal-offer-map",backdrop:!0,keyboard:!0,resolve:{offerId:function(){return o.personalOffer.id},detailId:null}})}}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("personalOfferDiscountView",["$log","$translate","backendTypesService","lowerCamelCaseFilter",function(e,n,r,t){return{restrict:"E",replace:!0,scope:{value:"=",type:"=",measureAmount:"=",discountType:"="},templateUrl:"app/directives/personalOffers/personalOfferDiscountView/personalOfferDiscountView.html",link:function(s){var u;if(s.value?s.type||(u="Должен быть указан тип скидки"):u="Должно быть указано значение скидки",u)return void e(u);s.discountEnums=_.invert(r.enums.personalOfferDiscount);var c={model:"personalOffers.discountDescription."+s.discountEnums[s.type],type:"personalOffers.discountTypes."+t(s.discountType),currency:"personalOffers.discountTypesCurrency."+t(s.discountType)};n([c.type,c.currency]).then(function(e){var r={type:e[c.type],value:s.value,step:s.measureAmount,currency:e[c.currency]};n(c.model,r).then(function(e){s.discountView=e})})}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxPersonalOffers",["$window","$timeout","globalService","backendTypesService","brandService","configurationService","offerService",function(e,r,n,o,f,t,a){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/personalOffers/personalOffers.html",link:function(o){function i(e){return n.getApplicationURLParts(e.match(/#\/?(.+)$/)[1])}var s=t.enums,c=0;o.inProgress=!0,o.openOffer=function(r){c=e.pageYOffset,o.changeLocation("personal-offers/"+r)},a.getOffers({offerState:s.offerState.active,offerType:s.communicationOfferTypeEnum.personalOffer}).then(function(e){o.personalOffers=e,o.personalOffers.forEach(function(e){f.populateImagesUrlFromDescription(e.brands)})})["finally"](function(){o.inProgress=!1}),o.$on("$locationChangeStart",function(n,o,f){var t=i(f),a=i(o);"personal-offers"===t[0]&&2===t.length&&"personal-offers"===a[0]&&r(function(){scrollTo(e.pageXOffset,c),c=0})})}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("phoneInput",["phoneInputService",function(t){return{restrict:"E",replace:!0,require:"ngModel",transclude:!0,scope:{},templateUrl:"app/directives/phoneInput/phoneInput.html",link:function(n,r,i,s){function l(e,n){var r=e[n+1],i=a.slice(0,r-1)+a.slice(r);return t.clearNumbersString(i,!0)}var o,a,p="",g=!1,c=!1,h=!1,u=!1,f="";n.keyPress=function(e){p=String.fromCharCode(e.keyCode)||""},r[0].onkeydown=function(e){var t=e.keyCode||e.charCode;g=8===t,h=46===t},n.paste=function(e){var n=e.originalEvent.clipboardData.getData("text/plain");f=t.clearNumbersString(n)},n.phoneSettings=e.copy(t.phoneSettings),n.phoneSettings.prefix="+"+n.phoneSettings.prefix;var d=t.getProperPositionsMappings(),v=d.properPositionsMap,S=d.properPositionsBackwardsMap;s.$parsers.push(function(e){var i=t.clearNumbersString(e,!0),d=n.phoneSettings.prefix,m=n.phoneSettings.length,k=r[0],x=k.selectionStart,P=o&&o.length===i.length;if(h&&e.length>0&&(P||x<d.length))if(a.length===e.length+1)i=l(v,x);else{var M=a.length-e.length;i=d+a.slice(x+M)}if(g&&x>=S[1]&&P&&(i=l(S,x)),f.length)i=d+f.slice(-m);else if(i.startsWith(d)){var b=d.length+m;i.length>b&&o.length<b&&(i=d+i.slice(-m))}else if(i.length<=d.length)i=d+p;else if(p){var y=o.replace(d,"");i=d+p+y.slice(-m+1)}else i=o;s.$viewValue=t.getMaskedPhone(i),s.$render();var C,$=g||c,I=h||u;if(x<v[1]&&($||I))C=v[1]-1;else if(g){var N=S[x+1];C=P&&N?N-1:S[x]}else I&&v[x]||(C=v[x]);return C=C||x,r[0].setSelectionRange(C,C),c=g,u=h,o=i||"",a=e||"",p="",f="",h=!1,g=!1,i}),s.$formatters.push(function(e){return e?(o=e,a=t.getMaskedPhone(e)):o=n.phoneSettings.prefix}),s.$validators.required=function(e){return e&&e!==t.clearNumbersString(n.phoneSettings.prefix)}}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").service("phoneInputService",["$http","configurationService",function(n,r){function t(){return n.get(p).then(function(e){Object.assign(s,e.data)})}function i(n,r){var t="[^"+(r?"+":"")+"\\d]",i=new RegExp(t,"g");return e.isNullOrUndefined(n)?"":n.replace(i,"")}function o(e){var n=s.mask,r=i(e),t=new RegExp("^"+s.prefix),o=r.replace(t,""),a="",p=0;if(o.length)for(var g=0;g<n.length;g++)if("9"===n[g]){if(a+=o[p],p+=1,p===o.length)break}else a+=n[g];return"+"+s.prefix+" "+a}function a(){for(var e="+"+s.prefix+" "+s.mask,n={},r={},t=0,i=s.length,o=e.length-1;o>=0;o--)"9"===e[o]&&i?(t=o+1,i-=1):n[o+1]=t;var a=n[1];t=a;for(var p=0;p<e.length;p++)p+1<a?r[p+1]=a:"9"===e[p]?t=p+1:r[p+1]=t;return{properPositionsMap:n,properPositionsBackwardsMap:r}}var p=r.host+"api/PhoneSettings",s={length:10,prefix:"7",mask:"(999) 999-99-99"};return{getPhoneSettings:t,clearNumbersString:i,getMaskedPhone:o,getProperPositionsMappings:a,phoneSettings:s}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("questionCancel",function(){return{restrict:"E",replace:!0,templateUrl:"app/directives/questionnaire/questionCancel.html"}})}(angular);
"use strict";!function(t){t.module("lmxApp").directive("questionEdit",function(){return{restrict:"E",replace:!0,templateUrl:"app/directives/questionnaire/questionEdit.html"}})}(angular);
"use strict";!function(r){r.module("lmxApp").directive("questionErrors",function(){return{restrict:"E",replace:!0,templateUrl:"app/directives/questionnaire/questionErrors.html"}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxQuestionnaire",["$rootScope","$timeout","authService","configurationService","notification","questionnaireService","routingService","userAlertService","translateFilter",function(n,t,i,a,s,o,r,c,u){return{restrict:"E",replace:!0,scope:{registration:"="},templateUrl:"app/directives/questionnaire/questionnaire.html",link:function(l,d,f){function g(e){o.getQuestionnaire(q).then(function(n){e?(l.questionnaire=[],I=0,b=0,t(function(){l.questionnaire=n})):l.questionnaire=n})}function v(e){l.$broadcast("beforeSave"),l.loader.saveInProgress=!0,o.save(e).then(function(t){q&&!t?n.$broadcast("questionnaireIsSet"):(l.$broadcast("saveRequestComplete",e,t),t?s.addError(u("personal.alerts.incorrectFields"),m):(l.registration?s.addMessage(u("personal.alerts.dataUpdated"),m):c(u("personal.alerts.dataUpdated"),"success")["finally"](function(){document.documentElement.scrollTop=0}),l.isDisabled=!0,l.$broadcast("saveRequestSuccess"),l.registration||g(!0)))})["catch"](function(){l.$broadcast("saveRequestComplete")})["finally"](function(){l.loader.saveInProgress=!1})}function p(e,n){$.push(n),b+=1,I===b&&v($)}var m="questionnaire";o.setArea(l.registration?"registration":m);var q=e.isDefined(f.onlyRequired);l.loader={templatesInProgress:!0,saveInProgress:!1},l.isDisabled=e.isDefined(f.isDisabled),l.questionnaireItemTypes=a.enums.questionnaireItemModelType;var b,$,I,h={};$=[],I=0,b=0,l.$on("questionInit",function(e,n){o.userInfoFields.contains(n.logicalName)&&(h[n.logicalName]=n.value),I+=1}),o.bindLoader(l.loader),g(),l.saveQuestionnaire=function(){b=0,$.length=0,l.$broadcast("saveQuestionnaire")},l.cancelForm=function(){l.registration?(i.clearAuthData(),r.goToLogin()):l.$broadcast("cancelQuestionnaire")},l.changeEdit=function(){l.isDisabled=!l.isDisabled};var S=0;l.$on("questionnaireItemTemplateLoaded",function(e,n){l.questionnaire.contains(n)&&(S+=1,S===l.questionnaire.length&&(l.loader.templatesInProgress=!1))}),l.$on("answerSaveRequest",p)}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("questionnaireGroup",function(){return{restrict:"E",replace:!0,scope:{group:"<"},templateUrl:"app/directives/questionnaire/questionnaireGroup.html",link:function(e){var t=0;e.$on("questionnaireItemTemplateLoaded",function(n,i){e.group.questions.contains(i)&&(t+=1,t===e.group.questions.length&&e.$emit("questionnaireItemTemplateLoaded",e.group))})}}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("questionnaireItem",["$filter","$http","$log","$rootScope","configurationService","questionnaireService",function(t,n,i,u,s,a){return{restrict:"E",replace:!0,scope:{question:"<"},template:'<div><div ng-include="questionTemplateUrl" onload="emitTemplateLoaded()"></div></div>',link:function(n){function i(){f=e.copy(n.question)}function r(e){var t;e&&(t=e[n.question.id]),n.errors=t||[]}function o(){var e=Object.values(v[n.question.logicalName].$error).filter(function(e){return!!e}),i=v[n.question.logicalName+"_custom"].$error,u=Object.values(i).filter(function(e){return!!e}),s={required:t("translate")("validationMessages.required"),pattern:n.question.regexpErrorMessage,"default":t("translate")("personal.alerts.incorrectFields")};if(!e.length&&u.length){var a=s["default"];i.required?a=s.required:i.pattern&&(a=s.pattern),n.$watchGroup([function(){return i.required},function(){return i.pattern}],function(e,t){for(var i=0;i<e.length;i++)if(e[i]!==t[i]){if(e[i]){n.errors=[s[0===i?"required":"pattern"]];break}r(null)}}),n.errors=[a]}else r(null)}function l(){switch(n.question.questionType){case p.select:var t=n.question.fixedAnswers.getObjectByField("isCustom",!0);t&&(n.question.hasCustomAnswer=!0,t.isSelected&&(t.value=n.question.answer.value)),n.question.isMultiSelect?n.updateCheckBoxValues():n.question.value=n.question.fixedAnswers.getObjectByField("isSelected",!0);break;case p["int"]:var u=parseInt(n.question.answer.value,10);n.question.value=Number.isNaN(u)?null:u;break;case p["double"]:var r=e.isNullOrUndefined(n.question.answer.value)?null:parseFloat(n.question.answer.value.replace(",","."));n.question.value=Number.isNaN(r)?null:r;break;case p.date:if(n.question.value=n.question.answer.value?new Date(n.question.answer.value):null,"BirthDay"===n.question.logicalName){var o=new Date;n.initDate=new Date(o.setFullYear(o.getFullYear()-30))}break;case p.string:var l=s.enums.autoCompleteType;switch(n.question.logicalName){case l.city:a.registerCityAutocomplete(n);break;case l.street:a.registerStreetAutocomplete(n);break;case l.house:a.registerHouseAutocomplete(n)}n.question.value=n.question.answer.value;break;case p["boolean"]:n.question.value="true"===n.question.answer.value}n.question.regexp&&(n.question.regexp=new RegExp(n.question.regexp)),i()}function c(){var t={questionId:n.question.id,fixedAnswerIds:[],value:n.question.value};switch(n.question.questionType){case p.select:var i;if(i=e.isArray(t.value)?e.copy(t.value):e.isNullOrUndefined(t.value)?[]:[t.value],i.length){t.fixedAnswerIds=i.fieldValues("id");var u=i.getObjectByField("isCustom",!0);t.value=u?u.value:null}else t.value=null;break;case p.date:t.value&&(t.value=moment(t.value).format("YYYY-MM-DD"));break;case p.string:t.value||(t.value=null)}return t}function d(){e.extend(n.question,f)}function q(e){n.disabled=e}n.disabled=!1,n.inProgress=!1,n.errors=[],n.questionTemplateUrl="app/directives/questionnaire/questionTypes/"+n.question.questionType+".html";var v,f,p=s.enums.questionModelType;n.updateCheckBoxValues=function(){n.question.value=n.question.fixedAnswers.filter(function(e){return e.isSelected}),n.question.value.length||(n.question.value=null)},n.registerForm=function(e){v=e},n.save=function(){n.inProgress=!0,r(null),n.$emit("answerSaveRequest",c())},n.emitTemplateLoaded=function(){n.$emit("questionnaireItemTemplateLoaded",n.question)},n.updateAnswerObject=function(e){n.question.value=n.getFixedAnswerByProperty("id",e)},n.getFixedAnswerByProperty=function(e,t){return n.question.fixedAnswers.find(function(n){return n[e]===t})},n.$on("saveQuestionnaire",function(){v.$setSubmitted(),v.$valid?n.save():n.question.hasCustomAnswer&&o()}),n.$on("beforeSave",function(){r(null),q(!0)}),n.$on("saveRequestComplete",function(t,i,u){if(n.question.hasCustomAnswer){var s=e.isArray(n.question.value)?n.question.value:[n.question.value],a=n.question.fixedAnswers.getObjectByField("isCustom",!0);s.contains(a)||(a.value=null)}r(u),q(!1)}),n.$on("cancelQuestionnaire",d),n.$on("saveRequestSuccess",function(){i(),n.question.isUpdatedUserInfoField&&(u.$broadcast("initialsUpdated"),n.question.isUpdatedUserInfoField=!1)}),l(),n.$emit("questionInit",n.question),n.$watch("question.value",function(e,i){e&&e!==i&&(a.userInfoFields.contains(n.question.logicalName)&&(n.question.isUpdatedUserInfoField=!0,n.question.value=t("capitalize")(e)),i&&i.isCustom&&n.errors.length&&r(null))})}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").factory("questionnaireService",["$http","$rootScope","configurationService","locationService",function(t,n,r,o){function i(e){m=e}function u(e){return v.inProgress=!0,e.then(function(e){return e.data})["finally"](function(){v.inProgress=!1})}function s(t,r,o,i,u,s){t.browserAutocomplete="off",t.autocomplete=!0,o&&(t.commitValue=function(){o.value=t.question.value},t.commitValue()),t.getAutocompleteValues=function(e){var t=i?i.value:null;return r(e,t)},u&&t.$watch("question.value",function(t){e.isDefined(t)&&n.$broadcast(u)}),s&&t.$on(s,function(){t.question.value=""})}function a(e){return u(t.get(p+"Questions",{params:{"filter.onlyRequired":e},area:m})).then(function(e){return e})}function c(e){return u(t.post(p+"Answers",e,{area:m})).then(function(e){var t=null;return e&&e.errors&&(t=e.errors.toDictionary("idQuestion","errors")),t})}function l(e){v=e}function f(e){s(e,o.getCities,C.selectedCity,null,"questionnaireCityChanged")}function d(e){s(e,o.getStreets,C.selectedStreet,C.selectedCity,"questionnaireStreetChanged","questionnaireCityChanged")}function g(e){s(e,o.getHouses,null,C.selectedStreet,null,"questionnaireStreetChanged")}var m,v={},p=r.host+"v1.1/User/",y=["LastName","FirstName","PatronymicName"],C={selectedCity:{value:""},selectedStreet:{value:""}};return{userInfoFields:y,setArea:i,bindLoader:l,getQuestionnaire:a,save:c,registerCityAutocomplete:f,registerStreetAutocomplete:d,registerHouseAutocomplete:g}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("questionSave",function(){return{restrict:"E",replace:!0,templateUrl:"app/directives/questionnaire/questionSave.html"}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("reCaptcha",["$log","$rootScope","configurationService","reCaptchaService","translateFilter","vcRecaptchaService",function(e,r,t,a,c,o){return{restrict:"E",replace:!0,templateUrl:"app/directives/reCaptcha/reCaptcha.html",scope:{},link:function(t){t.reCaptchaSiteKey=a.siteKey,t.reCaptchaCheckingInProgress=a.reCaptchaCheckingInProgress,t.start=function(){try{o.execute()}catch(r){e.warn(c("reCaptcha.error"),"onExecute",r)}},t.commitResponse=function(t){try{o.reload()}catch(a){e.warn("Could not reload reCaptcha OnSuccess",a)}r.$broadcast("reCaptchaSuccess",t)},t.reload=function(){try{o.reload()}catch(r){e.warn(c("reCaptcha.error"),"onReload",r)}},t.error=function(){r.$broadcast("reCaptchaError")}}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").factory("reCaptchaService",["$log","$q","$rootScope","$timeout",function(e,r,t,n){function o(){a.value=!1,c.value=null}function u(u){c.value=u;var i=r.defer();return n(function(){a.value=!0}),t.$on("reCaptchaSuccess",function(e,r){o(),i.resolve(r)}),t.$on("reCaptchaError",function(){e.error("reCaptcha error. See the badge in left-bottom corner for more information.\r\nCurrent siteKey is `"+c.value+"`"),i.reject()}),i.promise}var a={value:!1},c={value:null};return{reCaptchaCheckingInProgress:a,siteKey:c,execute:u}}])}(angular);
"use strict";!function(t){t.module("lmxApp").directive("cardAssignment",function(){return{restrict:"E",replace:!0,templateUrl:"app/directives/registration/cardAssignment.html"}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxRegistration",["$q","$rootScope","$log","authService","cardsService","configurationService","emailConfirmationCheckerService","localStorageService","notification","registrationService","resetPasswordService","routingService","shareAuthLoginToRegistration","$translate","userAlertService","translateFilter",function(t,r,n,i,o,a,s,c,f,d,g,u,l,p,m,h){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/registration/registration.html",link:function(n){function S(){E=!0}function C(){E=!1}function R(){n.inProgressFinishRegistration=!0,d.tryFinishRegistration().then(function(e){L=e,n.authorizeOnRegistrationComplete=a.components.registration.authorizeOnRegistrationComplete,n.registrationCompleted=!0})["finally"](function(){n.inProgressFinishRegistration=!1})}function v(){return i.loadAuth(),n.inProgress=!0,d.getActions().then(function(e){var t;D=e.actions,$=n.emailSkippable&&!c.get("forceEmailStepSkipped")&&!c.get("forceEmailStepHasCode");for(var r=0;r<D.length;r++)if(!D[r].isDone){t="Questions"===D[r].userActionType&&$?"ChangeEmail":D[r].userActionType;break}n.currentStep=t,n.currentStep||R()})["catch"](function(){n.currentStep=null})["finally"](function(){n.inProgress=!1})}function A(){var e={tenderOffer:d.getTenderOffer(!n.acceptTenderOfferByCheck),agreement:d.getAgreementPdf()};n.inProgress=!0,t.allSettled(e).then(function(e){e.tenderOffer.success?n.tenderOfferFile=e.tenderOffer.value:200!==e.tenderOffer.error.status?f.addCritical(h("registration.tenderOfferStep.alerts.offerFileError"),w):e.tenderOffer.error.incorrectFormat&&f.addCritical(h("registration.tenderOfferStep.alerts.offerFileFormatError"),w),e.agreement.success||200===e.agreement.error.status||f.addCritical(h("registration.tenderOfferStep.alerts.opdFileError"),w),n.isOfferAndAgreementLoaded=e.tenderOffer.success&&e.agreement.success})["finally"](function(){n.ignoreDocsFetchingErrors&&(n.isOfferAndAgreementLoaded=!0),n.inProgress=!1})}function O(){v().then(function(){"AcceptTenderOffer"===n.currentStep?A():"AssignCard"===n.currentStep&&(n.inProgress=!0,o.getVirtualCardInfo().then(function(e){n.isVirtualCardEmissionAllowed=e.isVirtualCardEmissionAllowed,n.ext_assignCardStep()})["finally"](function(){n.inProgress=!1}))})}function k(){n.registrationData={password:""},n.model={identifier:a.identifiers.registration[0]},(a.components.authentication.shareAuthLoginToRegistration||a.components.registration.forceRegistrationStartOnLoginAttempt&&n.acceptTenderOfferByCheck)&&l.loginAuth&&(n.model.identifier=l.identifier,n.registrationData.login=l.loginAuth,l.clearLogin())}function T(){n.isRegistrationStarted=!0,O(),n.passwordRequired=!1}function P(){var e;return n.acceptTenderOfferByCheck&&(e=n.acceptTenderOffer()),t.when(e).then(function(){T()})}function F(){var e;return n.referralRegistration&&n.referrerCardNumber.value&&(e=d.getReferrerInfo().then(function(){return p("registration.referrerCodeMessage").then(function(e){return m(e,"info")})})["catch"](function(){return d.sendReferrerCardNumber(n.referrerCardNumber.value)})),t.when(e).then(P)["catch"](function(){i.removeRegistrationToken(),i.clearAuthData()})}function y(){var e=c.get("refreshTokenForSocialRegistration");i.setRegistrationToken(n.tokenForSocialRegistration,e)}function I(t){n.authInProgress=!0,d.beginRegistration(e.copy(n.registrationData)).then(function(e){return i.clearAuthData(),i.setRegistrationToken(e.authResult.access_token,e.authResult.refresh_token),d.setIdentifier(n.model.identifier),F()},function(e){"PasswordRequired"===e.data.data.state&&(n.passwordRequired=!0,t.$submitted=!1)})["finally"](function(){n.authInProgress=!1})}var w="registration";d.setArea(w),o.setArea(w);var E=!0;document.addEventListener("mouseover",S),document.addEventListener("mouseleave",C),n.apiHost=a.host,n.opdAgreementFileId=a.components.registration.opdAgreementFileId,n.isRegistrationStarted=i.isRegistrationStarted(),n.acceptTenderOfferByCheck=a.components.registration.acceptTenderOfferByCheck,n.ignoreDocsFetchingErrors=a.components.registration.ignoreDocsFetchingErrors,n.offerPdfFileId=a.components.registration.offerPdfFileId,n.referralRegistration=a.components.registration.referralRegistration,n.registrationSmsCodeAsPassword=a.components.registration.setRegistrationSmsCodeAsPassword,n.isOfferAndAgreementLoaded=void 0,n.referrerCardNumber={value:""},n.registrationCompleted=!1,n.loader={cities:!1,streets:!1,houses:!1},n.emailSkippable=a.components.registration.forceEmailStep,n.tokenForSocialRegistration=c.get("tokenForSocialRegistration");var D={},$=!1,L={};n.isRegistrationStarted?O():n.acceptTenderOfferByCheck&&A(),n["continue"]=function(){i.removeRegistrationToken(),a.components.registration.authorizeOnRegistrationComplete?i.setAuth(L.access_token,L.refresh_token):i.clearAuthData();var e=a.components.registration.redirectUrlOnRegistrationComplete;"#registration"===e&&(a.components.registration.authorizeOnRegistrationComplete?e=a.components.authentication.redirectUrlOnLogin:(n.registrationCompleted=!1,n.isRegistrationStarted=!1,n.acceptTenderOfferByCheck&&A())),u.redirectTo(e)},n.acceptTenderOffer=function(){return n.stepInProgress=!0,d.acceptTenderOffer().then(function(){v()})["finally"](function(){n.stepInProgress=!1})},n.cancel=function(){n.currentStep=null,i.clearAuthData(),u.goToLogin()},n.cardModel={cardNumber:""},n.cvcCodeCardsRegistration=a.components.cards.cvcCodeCardsRegistration,n.cvcCodeCardsRegistration&&(n.cardModel.cvcCode=""),n.assignCard=function(){n.stepInProgress=!0,o.setCard(n.cardModel).then(function(){v()})["finally"](function(){n.stepInProgress=!1})},n.emitVirtualCard=function(){n.stepInProgress=!0,o.emitVirtualCard()["finally"](function(){v(),n.stepInProgress=!1})},n.$on("resetRegistration",function(){i.clearAuthData(),n.currentStep=null,n.isRegistrationStarted=!1}),n.$on("questionnaireIsSet",O),n.$on("emailIsSet",O),n.$on("phoneIsSet",O),n.$on("passwordIsSet",O);var b=r.$on("$locationChangeStart",function(e,t){var r=new RegExp("#/"+s.confirmationKeys.email+"?").test(t);!n.isRegistrationStarted||E||r||(window.stop(),n.registrationCompleted=!1,n.isRegistrationStarted=!1,n.currentStep=null,i.removeRegistrationToken(),i.clearAuthData(),u.goToLogin())});n.$on("$destroy",function(){document.removeEventListener("mouseover",S),document.removeEventListener("mouseleave",C),b()}),k(),n.registration=function(e){n.tokenForSocialRegistration?(y(),F()):I(e)},n.resetPassword=function(){g.setResetPasswordConfirmationData({data:n.registrationData.login,identifier:n.model.identifier}),u.goTo("reset-password")},n.resetFormModels=function(e){n.registrationData.login="",e.$submitted=!1},!n.tokenForSocialRegistration||n.referralRegistration||n.acceptTenderOfferByCheck||(y(),T()),n.ext_assignCardStep=function(){return null}}}}])}(angular);
"use strict";!function(i){i.module("lmxApp").directive("registrationFinish",function(){return{restrict:"E",replace:!0,templateUrl:"app/directives/registration/registrationFinish.html"}})}(angular);
"use strict";!function(e){e.module("lmxApp").factory("registrationService",["$http","$q","authService","backendEnumsService","configurationService","localStorageService",function(e,t,r,n,i,a){function o(e){A=e}function u(t){var r={area:A};return e.post(I+"v1.2/Registration/BeginRegistration",t,r).then(function(e){return e.data})}function s(){return e.post(I+"v1.1/Registration/TryFinishRegistration",null,{area:A}).then(function(e){return e.data})}function c(){return e.get(I+"api/user/actions",{area:A}).then(function(e){return e.data})}function f(){return e.post(I+"api/User/AcceptTenderOffer",null,{area:A})}function g(t){var r={answers:t};return e.post(I+"api/User/Answers",r,{area:A})}function p(t){var r={startWith:t||null,count:10};return e.get(I+"api/Location/Cities",{params:r,area:A})}function d(t,r){var n={startWith:r||null,city:t||null,count:10};return e.get(I+"api/Location/Streets",{params:n,area:A})}function l(t,r){var n={startWith:r||0,street:t||null,count:10};return e.get(I+"api/Location/Houses",{params:n,area:A})}function m(r){var n=r?i.components.registration.offerHtmlFileId:i.components.registration.offerPdfFileId;return e.get(I+"api/files/"+n,{area:A}).then(function(e){return r&&!e.headers("content-type").contains("html")?t.reject({incorrectFormat:!0}):e.data})}function h(){return e.get(I+"api/files/"+i.components.registration.opdAgreementFileId,{area:A}).then(function(e){return e.data})}function v(){return e.get(I+"api/User/Referrer",{area:A}).then(function(e){return e.data})}function R(t){var r={type:n.enums.referrerCodeType.cardNumber,code:t};return e.put(I+"api/User/Referrer",r,{area:A})}function y(e){e?a.set(F,e):a.remove(F)}function S(){return a.get(F)}var A,I=i.host,F=r.registrationIdentifierStorageKey;return{setArea:o,acceptTenderOffer:f,beginRegistration:u,getActions:c,getCityList:p,getHouseList:l,getStreetList:d,getTenderOffer:m,sendQuestions:g,tryFinishRegistration:s,getAgreementPdf:h,getReferrerInfo:v,sendReferrerCardNumber:R,setIdentifier:y,getIdentifier:S}}])}(angular);
"use strict";!function(t){t.module("lmxApp").directive("registrationStart",["IDENTIFIERS","configurationService",function(t,i){return{restrict:"E",replace:!0,templateUrl:"app/directives/registration/registrationStart.html",link:function(r){r.identifiers={arr:i.identifiers.registration},r.IDENTIFIERS=t}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("tenderOffer",function(){return{restrict:"E",replace:!0,templateUrl:"app/directives/registration/tenderOffer.html"}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxResetPassword",["$http","$log","authService","configurationService","lastVisibleCountFilter","notification","resetPasswordService","routingService","registrationService","translateFilter","IDENTIFIERS",function(t,i,r,s,o,n,a,d,c,f,l){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/resetPassword/resetPassword.html",link:function(t){function i(){t.model.identifier===l.phone?t.phoneIdentifier=o(t.model.identity,4,7):t.model.identifier===l.email&&(t.emailIdentifier=t.model.identity),t.steps.start=!1,t.steps.confirm=!0}var m="resetPassword";a.setArea(m),t.isReload=!1,t.forms={},t.IDENTIFIERS=l,t.model={identity:"",confirmCode:"",newPassword:"",repeatPassword:"",identifier:s.identifiers.resetPassword[0]},t.identifiers={arr:s.identifiers.resetPassword},t.steps={start:!0,confirm:!1},t.start=function(){t.inProgress=!0,a.startResetPassword(t.model.identity).then(function(){t.isReload&&n.addMessage(f("resetPassword.alerts.codeSent"),m),i()})["finally"](function(){t.isReload||(t.isReload=!0),t.inProgress=!1})};var u=a.getResetPasswordConfirmationData();u&&(e.isObject(u.data)?(t.model.identifier=l.email,t.model.identity=u.data.email,t.start(),t.model.confirmCode=u.data.code):(t.model.identifier=u.identifier,t.model.identity=u.data,t.start())),t.isResetPasswordConfirmationCodeHidden=function(){var i=t.forms.resetPasswordConfirm.confirmcode,r=u&&e.isObject(u.data)&&!!i&&!Object.keys(i.$error).length;return r},t.confirm=function(){t.inProgress=!0,a.confirmResetPassword(t.model).then(function(e){return r.setToken(e.data.access_token),c.getActions().then(function(t){t.actions.every(function(e){return e.isDone})?(r.clearAuthData(),r.setAuth(e.data.access_token,e.data.refresh_token),d.redirectTo(s.components.authentication.redirectUrlOnLogin||d.pages.history)):(r.setRegistrationToken(e.data.access_token,e.data.refresh_token),d.goTo("registration"))})},function(){t.inProgress=!1})["finally"](function(){u=void 0,a.resetPasswordConfirmationData()})},t.cancel=function(){a.resetPasswordConfirmationData(),d.goTo("login")},t.resetFormModels=function(){t.model.identity="",t.forms.resetPasswordStart.$submitted=!1}}}}])}(angular);
"use strict";!function(t){t.module("lmxApp").factory("resetPasswordService",["$http","configurationService",function(t,e){function n(t){d=t}function r(e){var n={area:d};return t.post(u.v1+"Start",{notifierIdentity:e},n).then(function(t){return t})}function i(e){return t.post(u.v1_2+"Confirm",{notifierIdentity:e.identity,confirmCode:e.confirmCode,newPassword:e.newPassword},{area:d}).then(function(t){return t})}function s(t){t.data&&t.data.length&&(e.identifiers.resetPassword.includes(t.identifier)||(t.identifier=e.identifiers.resetPassword[0]),f=t)}function o(){f=null}function a(){return f}var d,f,u={v1:e.host+"api/ResetPassword/",v1_2:e.host+"v1.2/ResetPassword/"};return{setArea:n,startResetPassword:r,confirmResetPassword:i,getResetPasswordConfirmationData:a,setResetPasswordConfirmationData:s,resetPasswordConfirmationData:o}}])}(angular);
"use strict";!function(o){o.module("lmxApp").controller("buyCouponModalController",["$rootScope","$scope","$uibModalInstance","showcaseService","coupon",function(o,n,u,r,e){n.inProgress=!1,n.coupon=e,n.result={},n.triedToBuy=!1,n.buyCoupon=function(){n.inProgress=!0,r.buyCoupon(n.coupon.id).then(function(u){n.result.success=u,o.$broadcast("buyCoupon")},function(o){n.result.error=o.data.result})["finally"](function(){n.triedToBuy=!0,n.inProgress=!1})},n.cancel=u.dismiss}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxShowcase",["$q","authService","modalService","routingService","showcaseService",function(e,o,n,t,c){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/showcase/showcase.html",link:function(l){function r(){l.inProgress=!0,c.getCategories().then(function(o){var n=null,t=[];o.forEach(function(e){n=c.getCouponsByCategory(e.logicalName),n.then(function(o){o.length&&(l.couponsByCategories[e.logicalName]={name:e.name,coupons:o},l.coupons.pushArray(o))}),t.push(n)}),e.all(t)["finally"](function(){l.inProgress=!1})},function(){l.inProgress=!1})}l.categoriesType=!1,l.couponsByCategories={},l.coupons=[],l.selectedCategory=null,r(),l.goToLogin=function(){t.goToLogin(!0)},l.loggedIn=o.loggedIn(),l.openBuyCouponModal=function(e){n.open({size:"md",templateUrl:"app/directives/showcase/modal/buyCouponModal.html",controller:"buyCouponModalController",resolve:{coupon:e}}).result.then(r)},l.changeType=function(e){l.categoriesType=e,l.selectedCategory=null},l.showCategory=function(e){l.selectedCategory=e}}}}])}(angular);
"use strict";!function(i){i.module("lmxApp").directive("lmxSocial",["$http","$q","$window","configurationService","socialService",function(n,e,t,o,c){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/social/social.html",link:function(n,s,r){function l(i){t.location.replace(c.getAuthorizeURL(i,n.clients,n.isBinding?"binding":"auth"))}function a(i){n.isProgress.remove=!0,c.removeClient(i).then(function(){u()})["finally"](function(){n.isProgress.remove=!1})}function u(){c.getSocialIdentifiers().then(function(i){d=i})}function g(){c.getClients().then(function(i){n.clients=i})}n.isBinding=i.isDefined(r.isBinding),n.socialImagesPath=o.imagesPath?o.imagesPath+"social":"",n.isProgress={getSocialInfo:!0},n.isBinded=function(i){return d.contains(i.providerType)},n.toggleBind=function(i){(n.isBinded(i)?a:l)(i.providerType)},n.authHandler=function(i){n.isBinding||l(i.providerType)};var d=[];e.all([g(),n.isBinding?u():null]).then(function(){n.isProgress.getSocialInfo=!1})}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").factory("socialService",["$http","$window","configurationService","routingService",function(e,t,n,r){function i(){return e.get(d+"Social/Clients").then(function(e){return e.data})}function o(t,n,r){return e.get(d+"User/"+t+"/Login",{params:{code:n,redirect_uri:r}}).then(function(e){return e.data})}function u(t,n,r){return e.get(d+"User/"+t+"/Set",{params:{code:n,redirect_uri:r}})}function c(t){return e.post(d+"User/"+t+"/Remove")}function a(){return e.get(d+"User/Logins").then(function(e){return e.data.socialIdentifiers.map(function(e){return e.provider})})}function s(e,n,i){var o=n.find(function(t){return t.providerType===e}),u=r.getLocationURL()+t.location.pathname+"?providerType="+e+"&action="+i;return o.authorizeUri.target+(/[?&]/.test(o.authorizeUri.target)?"&":"?")+"client_id="+o.clientId+"&redirect_uri="+encodeURIComponent(u)+"&response_type=code"}var d=n.host+"v1.2/";return{getAuthorizeURL:s,getClients:i,getSocialIdentifiers:a,login:o,removeClient:c,setClient:u}}])}(angular);
"use strict";!function(i){i.module("lmxApp").directive("lmxSubscriptions",["$log","translateFilter","userService","configurationService",function(i,n,s,t){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/subscriptions/subscriptions.html",link:function(r){function o(i){return i.split(/[^a-zA-Z]/).map(function(i){return i}).uniqueValues()}function e(){s.getSubscriptions(c).then(function(i){r.subscriptions=i})["finally"](function(){r.inProgress=!1})}if(!t.common.subscriptionTypes||!t.common.notificationTypes)return void i.error(n("subscriptions.error"));r.inProgress=!0,r.notificationTypes=o(t.common.notificationTypes);var c=o(t.common.subscriptionTypes);r.submitSubscriptions=function(){r.saveInProgress=!0,s.setSubscriptions(r.subscriptions)["finally"](function(){r.saveInProgress=!1})},e()}}}])}(angular);
"use strict";!function(n){n.module("lmxApp").controller("unregistrationModalController",["$scope","unregistrationService","$uibModalInstance","changePhoneService",function(n,e,i,o){n.model={reason:"",confirmCode:""},n.cencel=i.dismiss,n.confirm=function(){n.inProgress=!0,n.isConfirmation?e.confirmUnregistration(n.model).then(function(){i.close()})["finally"](function(){n.inProgress=!1}):e.startUnregistration().then(function(){return n.unregistration.$submitted=!1,o.getState().then(function(e){n.currentPhone=e.currentPhoneNumber})})["finally"](function(){n.isConfirmation=!0,n.inProgress=!1})}}])}(angular);
"use strict";!function(t){t.module("lmxApp").directive("lmxUnregistration",["$rootScope","modalService","userAlertService","translateFilter",function(t,e,r,n){return{restrict:"E",replace:!0,templateUrl:"app/directives/unregistration/unregistration.html",link:function(i){i.openUnregistrationModal=function(){e.open({templateUrl:"app/directives/unregistration/modal/unregistrationModal.html",controller:"unregistrationModalController",windowClass:"modal-unregistration",backdrop:!0,keyboard:!0}).result.then(function(){r(n("unregistration.endRefuse"))["finally"](function(){t.logout(!1)})})}}}}])}(angular);
"use strict";!function(r){r.module("lmxApp").factory("unregistrationService",["$http","configurationService",function(r,n){function t(r){i=r}function o(){return r.post(a+"SendConfirmCode",{})}function e(n){return r.post(a+"Confirm",{reason:n.reason,confirmCode:n.confirmCode},{area:i})}var i,a=n.host+"api/User/Deregistration/";return{setArea:t,startUnregistration:o,confirmUnregistration:e}}])}(angular);
"use strict";!function(e){e.module("lmxApp").controller("userAlertController",["$scope","$uibModalInstance","message","buttonText",function(e,t,o,n){e.message=o,e.buttonText=n||"OK",e.close=function(){t.close()}}])}(angular);
"use strict";!function(e){e.module("lmxApp").factory("userAlertService",["$uibModal",function(e){return function(r,t,l,o,n){var u=t||"error",a=e.open({templateUrl:"app/directives/userAlert/userAlertView.html",controller:"userAlertController",backdrop:n!==!1||"static",keyboard:o!==!1,windowClass:"loymax-modal loymax-container lmx-centered-modal lmx-userAlert-modal lmx-"+u+"-modal show",resolve:{message:function(){return r},buttonText:function(){return l}}});return a.result}}])}(angular);
"use strict";!function(n){n.module("lmxApp").controller("userConfirmationController",["$scope","$translate","$uibModalInstance","message","confirmButtonText",function(n,t,o,e,s){t("buttons.yes").then(function(t){n.message=e,n.confirmButtonText=s||t,n.ok=function(){o.close()},n.cancel=function(){o.dismiss()}})}])}(angular);
"use strict";!function(r){r.module("lmxApp").factory("userConfirmationService",["$uibModal",function(e){return function(o,n,t,i){var l=n||"error",a=e.open({templateUrl:"app/directives/userConfirmation/userConfirmationView.html",controller:"userConfirmationController",backdrop:"static",keyboard:!!r.isNullOrUndefined(i)||i,windowClass:"loymax-modal loymax-container lmx-centered-modal lmx-userAlert-modal "+l+"-modal show",resolve:{message:function(){return o},confirmButtonText:function(){return t}}});return a.result}}])}(angular);
"use strict";!function(n){n.module("lmxApp").service("changeEmailService",["$http","configurationService",function(n,e){function r(n){d=n}function t(){return f(n.get(m,{area:d}))}function i(n){return c(m,{email:n})}function o(){return c(m+"SendConfirmCode")}function u(n){return c(m+"Confirm",{confirmCode:n})}function a(){return c(m+"CancelChange")}function c(e,r){return f(n.post(e,r,{area:d}))}function f(n){return s.inProgress=!0,n.then(function(n){return n.data})["finally"](function(){s.inProgress=!1})}function l(n){s=n}var s,d,m=e.host+"api/User/Email/";return{setArea:r,getState:t,sendCode:i,reSendCode:o,confirmEmail:u,cancelChangeEmail:a,bindLoader:l}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxUserEmail",["$http","$rootScope","authService","changeEmailService","localStorageService","notification","routingService","userAlertService","translateFilter",function(i,t,a,n,o,r,s,c,l){return{restrict:"E",replace:!0,scope:{registration:"=",emailSkippable:"="},templateUrl:"app/directives/userEmail/userEmail.html",link:function(i){function m(){i.step=1,i.isChangeProcessStarted=!1,i.model.newEmail="",i.model.confirmationCode=""}var d=i.registration?"registration":"userEmail";n.setArea(d),o.get("isConfirmEmailSuccess")&&(o.remove("isConfirmEmailSuccess"),c(l("contacts.userEmail.alerts.emailUpdated"),"success")),i.isChangeProcessStarted=void 0,i.step=1,i.newEmail="",i.model={newEmail:"",confirmationCode:""},i.loader={inProgress:!0},n.bindLoader(i.loader),n.getState().then(function(t){i.currentEmail=t.currentEmail,e.isObject(t.newEmail)&&t.newEmail.email?(i.newEmail=t.newEmail.email,i.step+=1,i.openForm()):i.currentEmail?i.isChangeProcessStarted=!1:i.openForm()}),i.openForm=function(){i.isChangeProcessStarted=!0},i.closeForm=function(e){r.clearNotifications(d),i.registration?i.emailSkippable&&2===i.step?n.cancelChangeEmail().then(function(){a.clearAuthData(),s.goToLogin()}):(a.clearAuthData(),s.goToLogin()):i.isChangeProcessStarted&&!e?1===i.step?m():n.cancelChangeEmail().then(m):i.isChangeProcessStarted=!1},i.reEnterEmail=function(e){r.clearNotifications(d),e.$submitted=!1,i.model.confirmationCode="",!i.registration||i.emailSkippable?n.cancelChangeEmail().then(function(){i.step=1}):i.step=1},i.next=function(e){1===i.step?(i.sendCode(),e.$submitted=!1):i.confirmEmail()},i.sendCode=function(){n.sendCode(i.model.newEmail).then(function(){i.newEmail=i.model.newEmail,i.step+=1})},i.reSendCode=function(){n.reSendCode().then(function(){r.addMessage(l((i.registration?"registration.emailStep":"contacts.userEmail")+".alerts.codeSent"),d)})},i.confirmEmail=function(){n.confirmEmail(i.model.confirmationCode).then(function(){i.currentEmail=i.newEmail,t.$broadcast("emailIsSet"),i.registration?o.set("forceEmailStepHasCode",!0):(c(l("contacts.userEmail.alerts.emailUpdated"),"success"),m(),i.closeForm(!0))})},i.skipStep=function(){o.set("forceEmailStepSkipped",!0),t.$broadcast("emailIsSet")}}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxUserInfo",["$q","$window","configurationService","routingService",function(t,r,n,o){return{restrict:"E",replace:!0,templateUrl:"app/directives/userInfo/userInfo.html",link:function(i,s,a){i.isInfoLoaded=void 0,i.baseUrl=a.baseUrl||"",i.balanceUrl=o.pages.balance,i.isPassiveLogout=e.isDefined(a.passiveLogout)&&i.baseUrl.replace(/^\//,"")!==r.location.pathname.replace(/^\//,"");var u,l=n.common.userStatusAttributeName,c=n.common.userPurchasesAmountAttributeName;if(i.userInfo)u=t.when();else{var f=t.defer();u=f.promise;var m=i.$on("loadUserInfo",function(){f.resolve(),m()})}u.then(function(){i.statusAttribute=l?i.userInfo.attributes[l]:null,i.purchasesAttribute=c?i.userInfo.attributes[c]:null})["finally"](function(){i.isInfoLoaded=!0})}}}])}(angular);
"use strict";!function(t){t.module("lmxApp").service("passwordRequirementsService",["$http","configurationService",function(t,e){function r(){return t.get(e.host+"api/Password/Requirements").then(function(t){return i=t.data.toDictionary("type"),t.data})}function n(){return i}var i=[];return{requestPasswordRequirements:r,getErrorsDictionary:n}}])}(angular);
"use strict";!function(s){s.module("lmxApp").directive("lmxUserPassword",["$http","$rootScope","authService","configurationService","notification","routingService","userAlertService","translateFilter",function(s,r,e,o,t,a,n,i){return{restrict:"E",replace:!0,scope:{registration:"="},templateUrl:"app/directives/userPassword/userPassword.html",link:function(c){function d(r,e){return s.post(r,e,{area:u})}var u=c.registration?"registration":"userPassword";c.model={currentPassword:"",newPassword:"",repeatPassword:""},c.isChangeProcessStarted=!1,c.setPassword=function(){c.inProgress=!0,d(o.host+"v1.2/User/Password/Set",{password:c.model.currentPassword}).then(function(s){e.setAuth(s.data.access_token,s.data.refresh_token,!0),r.$broadcast("passwordIsSet")})["finally"](function(){c.inProgress=!1})},c.save=function(){c.inProgress=!0,d(o.host+"v1.2/User/Password/Change",{oldPassword:c.model.currentPassword,newPassword:c.model.newPassword}).then(function(s){e.setAuth(s.data.access_token,s.data.refresh_token),c.closeForm(),c.registration||n(i("accounts.userPassword.alerts.passwordUpdated"),"success")})["finally"](function(){c.inProgress=!1})},c.openForm=function(){c.isChangeProcessStarted=!0},c.closeForm=function(){t.clearNotifications(u),c.registration?(e.clearAuthData(),a.goToLogin()):c.isChangeProcessStarted=!1,c.model={currentPassword:"",newPassword:"",repeatPassword:""}},c.$on("startLoader",function(){c.inProgress=!0}),c.$on("stopLoader",function(){c.inProgress=!1})}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("userPasswordRequirements",["$http","$rootScope","passwordRequirementsService",function(e,t,r){return{require:"ngModel",scope:!1,link:function(e,t,i,n){var s=[];e.$emit("startLoader"),r.requestPasswordRequirements().then(function(e){s=e,n.$validators.userPasswordRequirements=function(e){for(var t=0;t<s.length;++t){var r=s[t],i=new RegExp(r.expression);i.test(e)?n.$setValidity(r.type,!0):n.$setValidity(r.type,!1)}return!0},n.$validate()})["finally"](function(){e.$emit("stopLoader")})}}}])}(angular);
"use strict";!function(n){n.module("lmxApp").service("changePhoneService",["$http","configurationService","identifiersService",function(n,e,r){function t(n){h=n}function o(){return s(n.get(g.v1,{area:h}))}function i(n){return f(g.v1,{phoneNumber:n})}function u(){return f(g.v1+"SendConfirmCode")}function c(n,e){var r={confirmCode:n};return e&&(r.password=n),f(g.v1_1+"Confirm",r)}function a(){return f(g.v1+"CancelChange")}function f(e,r){return s(n.post(e,r,{area:h}))}function s(n){return d&&(d.inProgress=!0),n.then(function(n){return n.data})["finally"](function(){d&&(d.inProgress=!1)})}function v(n){d=n}var d,h,g={v1:e.host+"api/User/PhoneNumber/",v1_1:e.host+"v1.1/User/PhoneNumber/"};return{setArea:t,getState:o,sendCode:i,reSendCode:u,confirmPhone:c,cancelChangePhone:a,bindLoader:v}}])}(angular);
"use strict";!function(e){e.module("lmxApp").directive("lmxUserPhone",["$http","$rootScope","authService","changePhoneService","configurationService","IDENTIFIERS","notification","registrationService","routingService","translateFilter","userAlertService",function(n,o,t,r,i,s,c,a,h,u,d){return{restrict:"E",replace:!0,scope:{registration:"="},templateUrl:"app/directives/userPhone/userPhone.html",link:function(n){function m(){n.step=1,n.isChangeProcessStarted=!1,n.newPhone="",n.model={newPhone:"",confirmationCode:""}}var P=n.registration?"registration":"userPhone";r.setArea(P),n.isChangeProcessStarted=void 0,n.step=1,n.newPhone="",n.model={newPhone:"",confirmationCode:""},n.loader={inProgress:!0},r.bindLoader(n.loader),r.getState().then(function(o){n.currentPhoneNumber=o.currentPhoneNumber,e.isObject(o.newPhoneNumber)&&o.newPhoneNumber.phoneNumber?(n.newPhone=o.newPhoneNumber.phoneNumber,n.step+=1,n.openForm()):n.currentPhoneNumber?n.isChangeProcessStarted=!1:n.openForm()}),n.openForm=function(){n.isChangeProcessStarted=!0},n.closeForm=function(){c.clearNotifications(P),n.registration?(t.clearAuthData(),h.goToLogin()):n.currentPhoneNumber?1===n.step?m():r.cancelChangePhone().then(m):n.isChangeProcessStarted=!1},n.reEnterPhone=function(e){c.clearNotifications(P),n.registration&&a.getIdentifier()===s.phone&&n.$emit("resetRegistration"),e.$submitted=!1,n.model.confirmationCode="",n.currentPhoneNumber?r.cancelChangePhone().then(function(){n.step=1}):n.step=1},n.next=function(e){1===n.step?(n.sendCode(),e.$submitted=!1):n.confirmPhone()},n.sendCode=function(){r.sendCode(n.model.newPhone).then(function(){n.newPhone="***"+n.model.newPhone.toString().slice(-4),n.step+=1})},n.reSendCode=function(){r.reSendCode().then(function(){c.addMessage(u((n.registration?"registration.phoneStep":"contacts.userPhone")+".alerts.codeSent"),P)})},n.confirmPhone=function(){var e=!1;n.registration&&(e=i.components.registration.setRegistrationSmsCodeAsPassword),r.confirmPhone(n.model.confirmationCode,e).then(function(e){t.setAuth(e.access_token,e.refresh_token,!0),n.currentPhoneNumber=n.newPhone,o.$broadcast("phoneIsSet"),n.registration||(c.clearNotifications(P),d(u("contacts.userPhone.alerts.phoneNumberUpdated"),"success"),m())})}}}}])}(angular);
"use strict";!function(t){t.module("lmxApp").directive("lmxUserStatus",function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"app/directives/userStatus/userStatus.html"}})}(angular);
"use strict";!function(e){function n(n,i,t,r,l,u){function a(a){function o(e,n,i,t){return!e||void 0===n||(!(!t||e!==n)||(i?e>n:e<n))}var c=!0;if(a){var s=n.$eval(i[r]),d=a;r.contains("Length")&&(d=a.length,e.isNumber(s)&&(l?s--:s++)),c=!(!e.isDefined(i.compareValidateIfCallback)||!n.$eval(i.compareValidateIfCallback)(d))||o(d,s,l,u)}return t.$setValidity(r,c),a}n.$watch(i[r],function(){if(e.isObject(t.$viewValue))t.$setViewValue(e.copy(t.$viewValue));else{var n=t.$viewValue;t.$setViewValue(null),t.$setViewValue(n)}}),t.$parsers.push(a)}e.module("lmxApp").directive("greaterThan",function(){return{require:"ngModel",restrict:"A",link:function(e,i,t,r){n(e,t,r,"greaterThan",!0,!1)}}}),e.module("lmxApp").directive("greaterThanEqual",function(){return{require:"ngModel",restrict:"A",link:function(e,i,t,r){n(e,t,r,"greaterThanEqual",!0,!0)}}}),e.module("lmxApp").directive("lessThan",function(){return{require:"ngModel",restrict:"A",link:function(e,i,t,r){n(e,t,r,"lessThan",!1,!1)}}}),e.module("lmxApp").directive("lessThanEqual",function(){return{require:"ngModel",restrict:"A",link:function(e,i,t,r){n(e,t,r,"lessThanEqual",!1,!0)}}}),e.module("lmxApp").directive("minLength",function(){return{require:"ngModel",restrict:"A",link:function(e,i,t,r){n(e,t,r,"minLength",!0,!1)}}}),e.module("lmxApp").directive("maxLength",function(){return{require:"ngModel",restrict:"A",link:function(e,i,t,r){n(e,t,r,"maxLength",!1,!1)}}}),e.module("lmxApp").directive("isEqualPasswords",function(){return{require:"ngModel",restrict:"A",scope:{otherModelValue:"=isEqualPasswords"},link:function(e,n,i,t){t.$validators.isEqualPasswords=function(n){return 0===n.length||n===e.otherModelValue},e.$watch("otherModelValue",function(){t.$validate()})}}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("integer",function(){return{require:"ngModel",restrict:"A",scope:{integer:"<"},link:function(i,n,t,r){if(i.integer||!t.integer){i.$watchCollection(function(){return r.$viewValue},function(){r.$validate()});var u=new RegExp("^-?([0-9]+)$");r.$validators.integer=function(){return!r.$viewValue||e.isArray(r.$viewValue.match(u))}}}}})}(angular);
"use strict";!function(e){e.module("lmxApp").directive("isPhone",["phoneInputService",function(e){return{require:"ngModel",restrict:"A",link:function(n,t,i,r){n.$watch(function(){return r.$viewValue},function(){r.$validate()}),r.$validators.isPhone=function(){if(r.$viewValue){var n=e.clearNumbersString(r.$viewValue);return n.length===e.phoneSettings.length+e.phoneSettings.prefix.length}return!1}}}}])}(angular);
"use strict";!function(n){n.module("lmxApp").config(["$compileProvider",function(n){n.debugInfoEnabled(!1)}])}(angular);
"use strict";!function(n){n.unNormalizeDirective=function(n){var r=/[A-Z]/g;return n.replace(r,function(n,r){return(r?"-":"")+n.toLowerCase()})},n.flipObject=function(n){var r={};for(var t in n)n.hasOwnProperty(t)&&(r[n[t]]=t);return r},n.isDate=function(n){return"[object Date]"===Object.prototype.toString.call(n)},n.copyObjectFields=function(n){for(var r,t={},e=1;e<arguments.length;e++)r=arguments[e],t[r]=n[r];return t},n.isNullOrUndefined=function(r){return n.isUndefined(r)||null===r}}(angular);
"use strict";!function(e){e.module("lmxApp").factory("authService",["$http","$injector","$q","$rootScope","configurationService","identifiersService","localStorageService","notification","routingService","userService","shareAuthLoginToRegistration","backendEnumsService",function(e,t,n,o,r,i,a,s,u,c,f,g){function l(e){C=e}function d(e){x.token=e}function k(){a.remove("isRegistrationToken","forceEmailStepHasCode","forceEmailStepSkipped","refreshToken","tokenForSocialRegistration","refreshTokenForSocialRegistration",L),x.isRegistrationToken=null}function h(){a.remove("isAnonymousToken","refreshToken"),x.isAnonymousToken=null}function m(){a.remove("authorizationToken"),a.remove("refreshToken"),k(),h(),x.token=null,x.permissions=null}function T(){return c.getUserInfo().then(function(e){return o.userInfo=e,r.common.requestUserAttributes?c.getAttributes().then(function(e){o.userInfo.attributes=e,o.$broadcast("loadUserInfo")}):void o.$broadcast("loadUserInfo")})}function p(e,t,n){return a.set("authorizationToken",e),a.set("refreshToken",t),d(e),n?null:T()}function A(e,t){p(e,t,!0),h(),x.isRegistrationToken=!0,a.set("isRegistrationToken",!0),a.set("refreshToken",t)}function v(e,t){p(e,t,!0),k(),x.isAnonymousToken=!0,a.set("isAnonymousToken",!0),a.set("refreshToken",t)}function R(){return null!==x.token&&!(x.isRegistrationToken||x.isAnonymousToken)}function S(e,t){var n={data:"grant_type=password&password="+encodeURIComponent(e.password),headers:{"Content-Type":"application/x-www-form-urlencoded"}};return t?n.headers["X-Loymax-2FA"]=U:(U=null,n.data+="&username="+e.login),n}function y(i,a){function l(){return k.beginRegistration(i).then(function(e){m(),A(e.authResult.access_token,e.authResult.refresh_token),u.goTo("registration")})}function d(e){m(),A(e.data.access_token,e.data.refresh_token),u.goTo("registration")}m();var k=t.get("registrationService");k.setArea("login");var h=S(i,a);return e.post($+"token",h.data,{headers:h.headers,area:C}).then(function(e){return c.getUser(e).then(function(t){return t.state?t.state===g.enums.userStatus.registered?(s.clearNotifications(C),m(),p(e.data.access_token,e.data.refresh_token).then(function(){o.$broadcast("login")})):n.when(d(e)):l()["catch"](function(t){return"RegistrationAlreadyCompleted"===t.data.data.state?(s.clearNotifications(C),m(),p(e.data.access_token,e.data.refresh_token).then(function(){o.$broadcast("login")})):n.reject(t)})})})["catch"](function(e){if("RegistrationRequired"!==e.data.error||!r.components.registration.forceRegistrationStartOnLoginAttempt){var t=e.headers("X-Loymax-2FA");return t&&(U=t),n.reject(e)}return delete i.password,r.components.registration.acceptTenderOfferByCheck||r.components.registration.referralRegistration?(f.loginAuth=i.login,void u.goTo("registration")):(f.clearLogin(),l())})}function b(e){m(),c.removeUserData(),e||u.redirectTo(r.components.authentication.redirectUrlOnLogout)}function I(){return x.token&&x.isRegistrationToken}function _(){var e;if(R())e=T();else{var t=n.defer();t.reject(),e=t.promise}return e}function w(){return e.post($+"api/auth/SendConfirmationCode",null,{headers:{"X-Loymax-2FA":U},area:C})}var C,U,$=r.host,L="registrationIdentifier",x={token:a.get("isAnonymousToken")?a.get("authorizationToken"):null,isRegistrationToken:a.get("isRegistrationToken")||null,isAnonymousToken:a.get("isAnonymousToken")||null,permissions:null},F=a.get("authorizationToken");return F&&d(F),{login:y,logout:b,authentication:x,loadAuth:_,setAuth:p,setToken:d,loggedIn:R,isRegistrationStarted:I,removeRegistrationToken:k,setArea:l,setRegistrationToken:A,setAnonymousToken:v,clearAuthData:m,registrationIdentifierStorageKey:L,resendCode:w}}])}(angular);
"use strict";!function(e){e.module("lmxApp").service("backendEnumsService",function(){this.enums={permissionValue:{authorized:"Authorized",partner:"Partner",siteAdmin:"SiteAdmin",admin:"Admin",activateCard:"ActivateCard",cardEmission:"CardEmission",cardPacking:"CardPacking",manageUserPermissions:"ManageUserPermissions",bankPayment:"BankPayment",offerRead:"OfferRead",offerEdit:"OfferEdit",offerManage:"OfferManage",answerManage:"AnswerManage",partnerCatalogEdit:"PartnerCatalogEdit",answersLoad:"AnswersLoad",mailingEdit:"MailingEdit",depositToCard:"DepositToCard",targetGroupEdit:"TargetGroupEdit",viewDepositsToCard:"ViewDepositsToCard",sendCardPassword:"SendCardPassword",blockAccount:"BlockAccount",getHistoryAudit:"GetHistoryAudit",getPurchaseHistory:"GetPurchaseHistory",getCards:"GetCards",getSmses:"GetSmses",deleteCard:"DeleteCard",recoverCard:"RecoverCard",attachCard:"AttachCard",getQuestions:"GetQuestions",startMailingTask:"StartMailingTask",cancelMailingTask:"CancelMailingTask",changePhone:"ChangePhone",browseHistoryAuditCodes:"BrowseHistoryAuditCodes",viewReport:"ViewReport",deviceEmulation:"DeviceEmulation",cardIssuance:"CardIssuance",replaceExternalCard:"ReplaceExternalCard",blockCard:"BlockCard",defaultOfferEdit:"DefaultOfferEdit",defaultOfferManage:"DefaultOfferManage",subscriptionsManage:"SubscriptionsManage",managerPortalAuthorized:"ManagerPortalAuthorized",partnerCatalogRead:"PartnerCatalogRead",targetGroupRead:"TargetGroupRead",partnerCatalogDecline:"PartnerCatalogDecline",mailingRead:"MailingRead",targetGroupCalculation:"TargetGroupCalculation",operationConfirmCancel:"OperationConfirmCancel",editReadonlyQuestions:"EditReadonlyQuestions",editReadonlyAnswers:"EditReadonlyAnswers",viewActiveOffersForCard:"ViewActiveOffersForCard",announcementSpacesEdit:"AnnouncementSpacesEdit",viewAnnouncements:"ViewAnnouncements",editAnnouncements:"EditAnnouncements",publishAnnouncements:"PublishAnnouncements",registration:"Registration",registerUsers:"RegisterUsers",limitRulesView:"LimitRulesView",limitRulesEdit:"LimitRulesEdit",couponEmissionEdit:"CouponEmissionEdit",couponEmissionView:"CouponEmissionView",oAuthApplication:"OAuthApplication",communicationOfferView:"CommunicationOfferView",communicationOfferEdit:"CommunicationOfferEdit",manageLifeTimeDefinitions:"ManageLifeTimeDefinitions",getEMails:"GetEMails",getPushes:"GetPushes",partnerView:"PartnerView",partnerEdit:"PartnerEdit",manageGateways:"ManageGateways",userAttributeView:"UserAttributeView",userAttributeEdit:"UserAttributeEdit",manageLocations:"ManageLocations",showcaseCategoryEdit:"ShowcaseCategoryEdit",showcaseCategoryView:"ShowcaseCategoryView",socialNetworkEdit:"SocialNetworkEdit",socialNetworkView:"SocialNetworkView",showcaseCouponTypeEdit:"ShowcaseCouponTypeEdit",showcaseCouponTypeView:"ShowcaseCouponTypeView",showcasePartnerEdit:"ShowcasePartnerEdit",showcasePartnerView:"ShowcasePartnerView",couponEdit:"CouponEdit",couponView:"CouponView",announcementSpacesView:"AnnouncementSpacesView",goodsGroupsView:"GoodsGroupsView",goodsGroupsEdit:"GoodsGroupsEdit",registrationCustomer:"RegistrationCustomer",showcaseCouponView:"ShowcaseCouponView",marketingCampaignsView:"MarketingCampaignsView",marketingCampaignsEdit:"MarketingCampaignsEdit",applicationUserAuthorize:"ApplicationUserAuthorize",applicationProcessing:"ApplicationProcessing",partnerPlanView:"PartnerPlanView",partnerPlanEdit:"PartnerPlanEdit",getPushableDevices:"GetPushableDevices",getSocialAccounts:"GetSocialAccounts",purchaseView:"PurchaseView",marketingCampaignPlanView:"MarketingCampaignPlanView",marketingCampaignPlanEdit:"MarketingCampaignPlanEdit"},templateFieldType:{string:"String",dateTime:"DateTime",radioButton:"RadioButton",radioButtonString:"RadioButtonString",checkbox:"Checkbox",int32:"Int32"},questionModelType:{"int":"Int","double":"Double","boolean":"Boolean",string:"String",date:"Date",select:"Select"},autoCompleteType:{city:"City",street:"Street",house:"House"},offerState:{active:"Active",commingSoon:"CommingSoon"},communicationOfferTypeEnum:{original:"Original",personalGoods:"PersonalGoods",personalOffer:"PersonalOffer"},referrerCodeType:{cardNumber:"CardNumber"},platformType:{ios:"Ios",android:"Android",windowsPhone:"WindowsPhone",unknown:"Unknown"},questionnaireItemModelType:{question:"Question",questionGroup:"QuestionGroup",questionFixedAnswer:"QuestionFixedAnswer"},userStatus:{anonymous:"Anonymous",deleted:"Deleted",normal:"Normal",registered:"Registered"}}})}(angular);
"use strict";!function(o){o.module("lmxApp").service("backendTypesService",function(){this.enums={rewardThumbnail:{imageWithText:"Loymax.Mobile.Contract.Models.Offer.ImageWithText, Loymax.Mobile.Contract",oldNewPrice:"Loymax.Mobile.Contract.Models.Offer.OldNewPrice, Loymax.Mobile.Contract",twoLineText:"Loymax.Mobile.Contract.Models.Offer.TwoLineText, Loymax.Mobile.Contract"},supportMessages:{attachments:"Loymax.Support.Contract.Models.SupportMessageAttachmentCreateModel, Loymax.Support.Contract",comment:"Loymax.Support.Contract.Models.SupportMessageCommentCreateModel, Loymax.Support.Contract"},support:{attachment:"Loymax.Support.Contract.Models.SupportMessageAttachmentItem, Loymax.Support.Contract"},personalOfferDiscount:{amount:"Loymax.Mobile.Contract.Models.Offer.PersonalOffer.Discount.PersonalOfferAmountDiscountViewModel, Loymax.Mobile.Contract",amountPerMeasure:"Loymax.Mobile.Contract.Models.Offer.PersonalOffer.Discount.PersonalOfferAmountPerMeasureDiscountViewModel, Loymax.Mobile.Contract",amountPerUnit:"Loymax.Mobile.Contract.Models.Offer.PersonalOffer.Discount.PersonalOfferAmountPerUnitDiscountViewModel, Loymax.Mobile.Contract",percent:"Loymax.Mobile.Contract.Models.Offer.PersonalOffer.Discount.PersonalOfferPercentDiscountViewModel, Loymax.Mobile.Contract",price:"Loymax.Mobile.Contract.Models.Offer.PersonalOffer.Discount.PersonalOfferPriceDiscountViewModel, Loymax.Mobile.Contract",pricePerUnit:"Loymax.Mobile.Contract.Models.Offer.PersonalOffer.Discount.PersonalOfferPricePerUnitDiscountViewModel, Loymax.Mobile.Contract"},goodsCatalog:{node:"Loymax.Common.WebApi.Models.GoodsCatalog.GoodsCatalogNodeViewModel, Loymax.Common.WebApi",leaf:"Loymax.Common.WebApi.Models.GoodsCatalog.GoodsCatalogLeafViewModel, Loymax.Common.WebApi"}}})}(angular);
"use strict";!function(e){e.module("lmxApp").factory("componentStateService",["$q","$rootScope","messageService","configurationService","offerService","authService","backendEnumsService",function(e,n,o,t,r,f,s){function a(){return o.getUnreadNotificationCount().then(function(e){n.hasMessages=e.unReadCount>0})}function u(){return n.noPersonalOffers=!1,r.getOffers({offerState:p.active,offerType:m.personalOffer}).then(function(e){n.noPersonalOffers=0===e.$allCount})}function c(){return n.noPersonalGoods=!1,r.getOffers({offerState:p.active,offerType:m.personalGoods}).then(function(e){if(0===e.$allCount)return r.getOffers({offerState:p.commingSoon,offerType:m.personalGoods}).then(function(e){n.noPersonalGoods=0===e.$allCount})})}function i(){t.common.requestUnreadMessage&&a(),t.components.personalOffers.requestPersonalOffers&&u(),t.components.personalGoods.requestPersonalGoods&&c()}function l(){f.loggedIn()&&i()}var p=s.enums.offerState,m=s.enums.communicationOfferTypeEnum;return{populateComponentStates:l,hasUnReadMessages:a}}])}(angular);
"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.module("lmxApp").service("configurationService",["$log","$rootScope","$window","localStorageService","backendEnumsService","optionsService","DEFAULT_CONFIG","IDENTIFIERS","REGISTRATION_IDENTIFIERS","RESET_PASSWORD_IDENTIFIERS",function(t,n,o,r,s,i,a,c,p,l){function m(e){var n=e.config,o=Object.values(e["const"]),r=[];if(n.length){for(var s=n.split(","),i=0;i<s.length;++i){var a=s[i];e["const"][a]?r.push(a):t.warn('"'+a+'" - недопустимое значение для опции "'+e.name+'Identifiers". Допустимые следующие значения: '+o.join(", "))}r.length||r.push(o[0])}else t.warn("В опциях должно быть задано не пустое значение "+e.name+'Identifiers, содержащее массив идентификаторов, например: "phone" или "'+o.join(", ")+'".'),r.push(o[0]);f.identifiers[e.name]=r}o.lmxConfig=_.merge({},a,o.lmxConfig);var u=o.lmxConfig,f=this;f.showcase=i.get("showcaseHost")||u.showcase&&u.showcase.replace(/\/?$/,"/"),f.host=i.get("host")||u.host&&u.host.replace(/\/?$/,"/"),f.components=i.getComponents(),f.common=i.getCommon(),f.locales=i.get("locales")||u.locales,f.templatesPath=u.templatesPath?u.templatesPath.replace(/\/?$/,"/"):"",f.customTemplates=u.customTemplates,f.reCaptchaSiteKey=i.get("reCaptchaSiteKey")||o.lmxConfig.reCaptchaSiteKey,f.oAuthClientId=i.get("oAuthClientId")||u.oAuthClientId,f.imagesPath=u.imagesPath.replace(/\/?$/,"/"),f.customTemplates&&!e.isArray(f.customTemplates)&&t.warn('Configuration "customTemplates" must be an array'),f.enums=s.enums,f.userPortalDescriptionType="user_portal",r.get("e2e")&&n.$watch("$root.newOptions",function(e,t){e&&e!==t&&(f.components=_objectSpread({},f.components,{},"string"==typeof e?JSON.parse(e):e))}),r.get("newOptions")&&(f.components=_objectSpread({},f.components,{},r.get("newOptions")),f.common=_objectSpread({},f.common,{},r.get("newOptions")));var g={authentication:{name:"authentication",config:f.components.authentication.authenticationIdentifiers,"const":c},registration:{name:"registration",config:f.components.registration.registrationIdentifiers,"const":p},resetPassword:{name:"resetPassword",config:f.components.authentication.resetPasswordIdentifiers,"const":l}};f.identifiers={},f.loadIdentifiers=function(){m(g.authentication),m(g.registration),m(g.resetPassword)},f.loadIdentifiers()}])}(angular);
"use strict";!function(i){i.module("lmxApp").service("shareAuthLoginToRegistration",["configurationService",function(i){this.loginAuth="",this.identifier=i.identifiers.registration[0],this.setIdentifier=function(t){t&&i.identifiers.registration.includes(t)?this.identifier=t:this.identifier=i.identifiers.registration[0]},this.clearLogin=function(){this.loginAuth="",this.identifier=i.identifiers.registration[0]}}])}(angular);
"use strict";!function(e){var a={captchaResponseRequired:"CaptchaResponseRequired"};e.module("lmxApp").constant("API_RESPONSE_CODE",a)}(angular);
"use strict";!function(e){var s={host:"https://demo.loymax.tech/publicapi/",locales:"ru",templatesPath:"",customTemplates:[],imagesPath:"https://cdn.loymax.tech/js/v2.1/assets/images/",localesPath:"assets/locale/",reCaptchaSiteKey:"",oAuthClientId:"",pages:{authentication:"#login",resetPassword:"#reset-password",registration:"#registration",offers:"#offers",feedback:"#feedback",anonymousFeedback:"#anonymous-feedback",message:"#message",showcase:"#showcase",myCoupons:"#my-coupons",cards:"#cards",favoriteGoods:"#favorite-goods",balance:"#balance",history:"#history",brands:"#brands",merchant:"#merchant",userStatus:"#user-status",social:"#social-binding",announcement:"#announcement",settings:"#settings",questionnaire:"#questionnaire",options:"#options",personalOffers:"#personal-offers",personalGoods:"#personal-goods"},components:{authentication:{redirectUrlOnLogin:"#history",redirectUrlOnLogout:"#home",shareAuthLoginToRegistration:!0,authenticationIdentifiers:"phone",resetPasswordIdentifiers:"phone"},registration:{acceptTenderOfferByCheck:!0,authorizeOnRegistrationComplete:!0,forceRegistrationStartOnLoginAttempt:!0,ignoreDocsFetchingErrors:!1,redirectUrlOnRegistrationComplete:"#home",offerHtmlFileId:"",offerPdfFileId:"",opdAgreementFileId:"",referralRegistration:!1,setRegistrationSmsCodeAsPassword:!0,forceEmailStep:!1,registrationIdentifiers:"phone"},cards:{enableAppleWalletCards:!1,enableGoogleWalletCards:!1,cardNumberGraphicalCode:"bar,qr",cvcCodeCardsRegistration:!1},personalOffers:{requestPersonalOffers:!1},personalGoods:{requestPersonalGoods:!1,personalGoodsApprovalMessage:""},favoriteGoods:{favoriteGoodsImagesUrl:""},history:{loadMoreButton:!1},support:{supportEmail:"support@loymax.ru"},merchant:{filterByRegion:!1},announcement:{space:"offerSpace"}},common:{requestUserAttributes:!1,locales:"ru",requestUserStatus:!1,userStatusAttributeName:"",userPurchasesAmountAttributeName:"",obsoleteBrowserDetection:!0,requestUnreadMessage:!1,subscriptionTypes:"Advertisement",notificationTypes:"smsNotification,emailNotification",map:{}},version:"2.2"};e.module("lmxApp").constant("DEFAULT_CONFIG",s)}(angular);
"use strict";!function(n){var a={phone:"phone",email:"email",card:"card"},e={phone:"phone",card:"card"},o={phone:"phone",email:"email"};n.module("lmxApp").constant("IDENTIFIERS",a),n.module("lmxApp").constant("REGISTRATION_IDENTIFIERS",e),n.module("lmxApp").constant("RESET_PASSWORD_IDENTIFIERS",o)}(angular);
"use strict";!function(n){var t={INT32_MAX:2147483647};n.module("lmxApp").constant("LIMITS",t)}(angular);
"use strict";!function(t){t.module("lmxApp").constant("notificationTypes",{message:0,error:1,critical:2})}(angular);
"use strict";!function(n){var t={INT32_MAX:2147483647};n.module("lmxApp").constant("LIMIT_VALUE",t)}(angular);
"use strict";!function(n){n.module("lmxApp").config(["$provide",function(e){e.decorator("ngSwitchWhenDirective",["$delegate",function(e){var i=e[0],t=i.link;return i.compile=function(){return function(e,i,c){var r=/^{{(.+)}}$/g,o=r.exec(c.ngSwitchWhen);if(o&&o[1]){var u=e.$eval(o[1]);n.isDefined(u)&&c.$set("ngSwitchWhen",u.toString())}t.apply(this,arguments)}},e}])}])}(angular);
"use strict";!function(e){e.module("lmxApp").config(["$provide",function(r){r.decorator("$q",["$delegate",function(r){function n(n){var o=r.defer(),t=0,c=e.isArray(n)?[]:{};return e.forEach(n,function(e,n){t++,r.when(e).then(function(e){c.hasOwnProperty(n)||(c[n]={success:!0,value:e},--t||o.resolve(c))},function(e){c.hasOwnProperty(n)||(c[n]={success:!1,error:e},--t||o.resolve(c))})}),0===t&&o.resolve(c),o.promise}return r.allSettled=n,r}])}])}(angular);
"use strict";!function(e){e.module("lmxApp").service("devicePlatformService",["bowser","configurationService",function(e,r){for(var o=r.enums.platformType,t={type:o.unknown,isMobile:!1},n=Object.keys(o).remove(o.unknown.toLowerCase()),i=0;i<n.length;i++){var a=n[i];if(e[a.toLowerCase()]){t.type=a,t.isMobile=e.mobile||e.tablet;break}}return{currentPlatform:t}}])}(angular);
"use strict";!function(e){e.module("lmxApp").service("e2eService",["localStorageService",function(e){function t(){var t=window.location.hash.substr(2);e.get("e2e")&&!["login","resetPassword","reset-password","registration",""].contains(t)&&e.set("authorizationToken","e2e_tests_token"),e.get("e2eHttpResponses")&&(window.httpResponses=e.get("e2eHttpResponses"))}return{init:t}}])}(angular);
"use strict";!function(a){a.module("lmxApp").factory("emailConfirmationCheckerService",["$http","$rootScope","authService","configurationService","localStorageService","routingService","resetPasswordService","IDENTIFIERS",function(a,e,r,i,s,o,t,n){function c(e,r){var i={personID:e,confirmCode:r};return a.post(p,i)}function m(){var a=o.getSearchParams();if(a.params)if(a.action===f.email&&a.params.code&&a.params.id)e.$broadcast("showGlobalLoader"),c(parseInt(a.params.id,10),a.params.code).then(function(){var a;r.authentication.isRegistrationToken?a=o.pages.registration:r.authentication.token?(s.set("isConfirmEmailSuccess",!0),a=o.pages.settings):a=o.pages.login,o.replaceSearchParams(a)});else if(a.action===f.resetPassword&&a.params.email&&a.params.code){t.setResetPasswordConfirmationData({data:a.params,identifier:n.email});var i=o.pages.resetPassword;o.replaceSearchParams(i)}}var p=i.host+"api/User/Email/LinkConfirm",f={email:"confirmEmail",resetPassword:"confirmResetPassword"};return{parseEmailConfirmation:m,confirmationKeys:f}}])}(angular);
"use strict";!function(t){t.module("lmxApp").filter("capitalize",function(){return function(t){return t?t.charAt(0).toUpperCase()+t.slice(1):t}})}(angular);
"use strict";!function(n){n.module("lmxApp").filter("charsDivide",function(){return function(n,t){var r=new RegExp(".{1,"+t+"}","g");return n.toString().match(r).join(" ")}})}(angular);
"use strict";!function(e){e.module("lmxApp").filter("dateRange",["dateFilter","translateFilter",function(t,n){return function(a,r){if(e.isUndefined(a))return a;var i=[],o={from:n("dateRange.from"),to:n("dateRange.to"),toTime:n("dateRange.toTime"),since:n("dateRange.since")};a instanceof Date||(a=new Date(a));var f=a.getDate(),m=t(a,"d"),d=a.getMonth(),s=t(a,"MMMM"),g=t(a,"HH:mm");if(r){r instanceof Date||(r=new Date(r));var u=r.getDate(),M=t(r,"d"),c=r.getMonth(),l=t(r,"MMMM"),D=t(r,"HH:mm");d===c&&f===u?(i=[m,s],"00:00"===g&&"23:59"===D||i.pushArray([o.from,g,o.toTime,D])):i=[o.from,m,s,g,o.to,M,l,D]}else i=[o.since,m,s,g];return i.join(" ")}}])}(angular);
"use strict";!function(t){t.module("lmxApp").filter("lastCount",function(){return function(t,n){return t.substr(-n)}})}(angular);
"use strict";!function(e){e.module("lmxApp").filter("lastVisibleCount",function(){return function(e,i,l){var n=e.replace(/.?/g,"*").slice(0,-i-1)+e.slice(-i);return l&&(l<i&&(l=i),n=n.slice(-l)),n}})}(angular);
"use strict";!function(e){e.module("lmxApp").filter("lowerCamelCase",function(){return function(e){return e===e.toUpperCase()?e.toLowerCase():e.charAt(0).toLowerCase()+e.slice(1)}})}(angular);
"use strict";!function(n){n.module("lmxApp").filter("nbspSpaces",function(){return function(n){return n?n.replace(/ /g," "):n}})}(angular);
"use strict";!function(t){t.module("lmxApp").filter("shortDate",["$filter",function(t){return function(n){return t("date")(n,"dd.MM.yyyy")}}])}(angular);
"use strict";!function(t){t.module("lmxApp").filter("shortDateTime",["$filter",function(t){return function(e){return t("date")(e,"dd.MM.yyyy H:mm")}}])}(angular);
"use strict";!function(t){t.module("lmxApp").filter("shortTime",["$filter",function(t){return function(n){return t("date")(n,"H:mm")}}])}(angular);
"use strict";!function(t){t.module("lmxApp").filter("toUTC",function(){return function(t,n){var e=t;return t instanceof Date&&(e=t.toUTCDate(n)),e}})}(angular);
"use strict";!function(n){n.module("lmxApp").filter("zeroFill",function(){return function(n,r){function t(n){return isNaN(n)?0:n}var i="",u=".";n=String(t(n));for(var e=n.split(u)[1]||u,l=e===u,o=l?0:e.length,f=1;f<=t(r)-o;f++)i+=0;return l?n+u+i:n+i}})}(angular);
"use strict";!function(e){e.module("lmxApp").factory("globalService",["cardsService","configurationService","routingService","userService",function(e,t,n,r){function o(){return e.getCards()}function a(){return r.getUserInfo()}function c(){var e=n.getApplicationURL().replace(/\/?\?[^?]*$/,"");return e}function u(e){return n.getApplicationURLParts(e)}function i(e){n.goTo(e)}function g(){return r.getBalance()}function f(){return r.getUserStatus()}function s(){r.removeUserData()}function l(){n.goToDefaultPage()}return{changeLocation:i,getApplicationURLParts:u,getCards:o,getCurrentLocation:c,getUserBalance:g,getUserInfo:a,getUserStatus:f,removeUserData:s,goToDefaultPage:l}}])}(angular);
"use strict";!function(e){e.module("lmxApp").factory("authInterceptor",["$q","$location","$injector","configurationService","localStorageService","translateFilter",function(e,t,r,n,i,o){function a(e){var t,o=r.get("$http"),a=r.get("authService");e=e||{};var u=e.isFirstRequest&&!f,s=e.isRefresh&&!d,c=!e.isFirstRequest&&!e.isRefresh&&!l,h={method:"POST",url:R,data:"grant_type="+(e.isRefresh?"refresh_token&refresh_token="+i.get("refreshToken"):"anonymous"),params:e.isRefresh?void 0:{client_id:n.oAuthClientId},headers:{"Content-Type":"application/x-www-form-urlencoded"}};return(u||s||c)&&(t=o(h).then(function(e){a.setAnonymousToken(e.data.access_token,e.data.refresh_token)}),u?f=t:s?d=t:l=t),e.isFirstRequest?f:e.isRefresh?d:l}function u(e,t){var n=r.get("authService"),i=r.get("routingService");e.data.error_description=o("authentication.alerts.authenticationNeeded"),t&&n.clearAuthData(),i.goToLogin(!0)}function s(e){var t=r.get("$http");v.push(e.config.url);var n;return t(e.config)["catch"](function(e){n=e})["finally"](function(){v.remove(e.config.url),401===e.status&&n&&!v.length&&u(n),v.length||(l=null)})}function c(e){var t=r.get("authService");if(e.headers=e.headers||{},e.headers.Authorization)return e;var i=t.authentication.token;return i?(e.headers.Authorization="Bearer "+i,e):m&&e.url.startsWith(n.host)&&(e.url!==R||void 0===e.params)?(p.push(e.url),a({isFirstRequest:!0}).then(function(){return e.headers.Authorization="Bearer "+t.authentication.token,e})["finally"](function(){p.remove(e.url),p.length||(f=null)})):e}function h(t){if(401===t.status)if(m){if(t.config.url!==R&&!v.contains(t.config.url))return a({isRefresh:!0}).then(function(){return s(t)})["catch"](function(r){switch(r.status){case 400:return a().then(function(){return s(t)});default:return e.reject(r)}})["finally"](function(){d=null})}else u(t,!0);return e.reject(t)}var f,l,d,g={},v=[],p=[],m=!!n.oAuthClientId,R=n.host+"token";return g.request=c,g.responseError=h,g}])}(angular);
"use strict";!function(e){e.module("lmxApp").factory("currentRequestsInterceptor",["$q","$rootScope","$timeout",function(n,r,t){function o(){return 0===c}function u(){c--,o()&&t(function(){o()&&r.$broadcast("requestsCompleted")})}var c;return{request:function(t){return e.isUndefined(c)&&(r.$broadcast("showGlobalLoader"),c=0),c++,t||n.when(t)},response:function(e){return u(),e||n.when(e)},responseError:function(e){return u(),n.reject(e)}}}])}(angular);
"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){e.module("lmxApp").config(["$httpProvider",function(e){function t(e){if("object"!==_typeof(e))return e;for(var o in e)if(e.hasOwnProperty(o)){var n=e[o];"string"==typeof n?n.match(r)&&(e[o]=new Date(n)):t(n)}}var r=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/;e.defaults.transformResponse.push(function(e){return"null"===e&&(e=null),e}),e.defaults.transformResponse.push(function(e){return t(e),e}),e.interceptors.push("reCaptchaRequestInterceptor"),e.interceptors.push("localeInterceptor"),e.interceptors.push("paginationInterceptor"),e.interceptors.push("notificationInterceptor"),e.interceptors.push("templateRequestInterceptor"),e.interceptors.push("authInterceptor"),e.interceptors.push("responseStateInterceptor"),e.interceptors.push("currentRequestsInterceptor"),e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache"}])}(angular);
"use strict";!function(r){r.module("lmxApp").factory("notificationInterceptor",["$log","$q","$rootScope","API_RESPONSE_CODE","configurationService","notification","translateFilter",function(t,e,a,i,o,s,n){var d,c=[i.captchaResponseRequired];return{request:function(r){return d=r.area,r.url.match(/\.html$/)||r.isBackground===!0||s.clearNotifications(d),r},responseError:function(i){if(i.status===-1)i.data={error:"Canceled"};else if(r.isDefined(i.data.result)&&r.isDefined(i.data.result.state)){if("Error"===i.data.result.state)s.addError(i.data.result.message,d);else if("Fail"===i.data.result.state)s.addCritical(i.data.result.message,d);else if("ValidationError"===i.data.result.state){var l,u={};r.forEach(i.data.result.validationErrors,function(r){l=r.field.split(".")[1].toLowerCase(),u[l]=r.errorMessages}),r.equals({},u)||a.$broadcast("validationErrors",u)}}else c.contains(i.data.error)||("RegistrationRequired"!==i.data.error||r.isDefined(i.data.error_description)||o.components.registration.forceRegistrationStartOnLoginAttempt||(i.data.error_description=n("authentication.alerts.wrongCredentials")),r.isDefined(i.data.error_description)?s.addError(i.data.error_description,d):i.config.url.match(/\.ya?ml$/)&&404===i.status||(s.addCritical(n("alerts.systemError"),d),t.warn("Unrecognized response",i)));return e.reject(i)}}}])}(angular);
"use strict";!function(t){t.module("lmxApp").factory("paginationInterceptor",function(){return{response:function(t){return t.headers("x-pageable-totalcount")&&(t.data.$allCount=parseInt(t.headers("x-pageable-totalcount"))),t}}})}(angular);
"use strict";!function(e){e.module("lmxApp").factory("reCaptchaRequestInterceptor",["$injector","$log","$q","API_RESPONSE_CODE","configurationService","notification","reCaptchaService",function(t,r,n,a,c,i,o){function u(){i.addError("Ошибка reCaptcha")}function s(e,r){return o.execute(r).then(function(r){e.headers["X-Captcha-Response"]=r,h.currentRequestStack.shift();var n=t.get("$http");return n(e)},function(e){return u(),n.reject(e)})}var h=this;return h.currentRequestStack=[],{responseError:function(t){if(e.isDefined(t.data)&&e.isDefined(t.data.error)&&t.data.error===a.captchaResponseRequired){var i,o=t.headers("x-captcha");if(o&&(i=JSON.parse(o).siteKey,i||r.warn('`X-Captcha` header is exposed, but `siteKey` property not found. Current header content: "'+o+'"')),c.reCaptchaSiteKey)i?r.info("Using `reCaptchaSiteKey` config is deprecated. Just delete it."):i=c.reCaptchaSiteKey;else if(!i)return u(),r.error("You should fill the `reCaptchaSiteKey` config to enable reCaptcha check."),n.reject(t);var p=h.currentRequestStack;return p.length?p.push(p[p.length-1].then(function(){return s(t.config,i)})):p.push(s(t.config,i)),p[p.length-1]}return n.reject(t)}}}])}(angular);
"use strict";!function(t){t.module("lmxApp").factory("responseStateInterceptor",["$q",function(e){return{response:function(a){if(t.isDefined(a.data)&&t.isDefined(a.data.result)&&t.isDefined(a.data.result.state)){if("Success"!==a.data.result.state)return e.reject(a);a.data=a.data.data}return a}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").factory("templateRequestInterceptor",["configurationService",function(e){var t=e.templatesPath,r=e.customTemplates,a=/^app\/directives\//;return{request:function(e){return Array.isArray(r)&&r.length&&e.url.match(/^app\/directives\/.*\.html$/)&&r.contains(e.url.replace(a,""))&&(e.url=e.url.replace(a,t)),e}}}])}(angular);
"use strict";!function(e){e.module("lmxApp").service("identifiersService",function(){function e(e){return e.replace(/\+|\s|\(|\)|-/g,"")}function n(n){return/^(7|8)?\d{10}$/.test(e(n))}function t(e){return/@/.test(e)}return{isPhone:n,isEmail:t}})}(angular);
"use strict";!function(e){e.module("lmxApp").factory("localeInterceptor",["$injector",function(e){function r(r){var t=e.get("localeService");return r.headers=r.headers||{},r.headers["Accept-Language"]=t.getCurrentLocale(),r}return{request:r}}])}(angular);
"use strict";!function(a){a.module("lmxApp").config(["$translateProvider","$windowProvider","tmhDynamicLocaleProvider","DEFAULT_CONFIG",function(a,e,l,t){var o=t.localesPath,r=t.version,s=e.$get().lmxConfig;s&&s.localesPath&&(o=s.localesPath),a.useLoader("$translateStaticFilesLoader",{prefix:o.replace(/\/?$/,"/"),suffix:".yml"}),a.useMissingTranslationHandlerLog(),a.useSanitizeValueStrategy("escapeParameters"),l.defaultLocale("ru"),l.localeLocationPattern("https://cdn.loymax.tech/js/v"+r+"/assets/locale/i18n/angular-locale_{{locale}}.js")}])}(angular);
"use strict";!function(e){e.module("lmxApp").factory("localeService",["$window","$rootScope","$translate","$q","$document","localStorageService","tmhDynamicLocale","configurationService","userAlertService","DEFAULT_CONFIG","notification",function(e,n,t,o,a,r,c,i,l,u,s){function f(e){if("en"!==e){var n=u.version,t=a[0].createElement("script");t.type="text/javascript",t.src="https://cdn.loymax.tech/js/v"+n+"/assets/lib/moment/locale/"+e+".js",a[0].body.appendChild(t)}}function d(e){var a;return t.use(e).then(function(){return f(e),a=e,r.set(C,a),c.set(a),a})["catch"](function(a){var r=!t.getTranslationTable(v());if(e===z&&r){var c=m("Не найден файл локализации. Проверьте наличие корректного файла/настройки локализации и обновите страницу","Localization file not found. Check the correct localization file existance or localization config and reload the page");return L(c).then(function(){return o.reject(a)})}var i=r?d(z):o.when(v());return i.then(function(o){var a;return t("alerts.localeFileUploadFailed",{locale:e}).then(function(e){return a=e,o})["catch"](function(){return a=m("Не найден файл локализации","Localization file not found for locale").message+" &laquo;"+e+"&raquo;",o})["finally"](function(){var e=n.$on("requestsCompleted",function(){s.addCritical(a),e()})})})})}function g(n){var t=v();d(n).then(function(){t!==v()&&e.location.reload()})}function v(){return t.use()}function h(){return y}function p(e){return e?e.replace(/_/g,"-"):""}function m(e,n){var t=x.contains(v()||S);return{message:t?e:n,buttonText:t?"Обновить страницу":"Reload"}}function L(n){return l(n.message,"localeError",n.buttonText,!1,!1).then(function(){e.location.reload()})}var C="locale",x=["ru","ru-ru"],y=[];i.locales&&(y=i.locales.split(/\s*\|+\s*/).map(p).uniqueValues());var z=y[0]||p(e.navigator.language),S=p(r.get(C))||z;if(y.length)t.preferredLanguage(z),y.contains(S)||(S=z),d(S);else{var $=m("Некорректно настроена локализация приложения. Проверьте настройки локализации и обновите страницу","Incorrect config of application localization. Check localization config and reload the page");L($)}return{getCurrentLocale:v,getRegisteredLocales:h,setLocale:g}}])}(angular);
"use strict";!function(r){r.module("lmxApp").filter("translatePlural",["$filter","$sce","$translate","translatePluralService","$log",function(n,t,a,l,e){return function(n,u){var i=u.plural||u,s=u["class"];if(isNaN(n))return e.warn("Using translatePlural filter with not a number"),null;if(!r.isDefined(i))return e.warn("Using translatePlural filter with an empty plural param"),null;var f={number:n};return r.isDefined(s)&&(f.number='<span class="'+s+'">'+n+"</span>"),a(l.getTranslationPath(n,i),f.number).then(function(r){return t.trustAsHtml(r)})}}])}(angular);
"use strict";!function(r){r.module("lmxApp").service("translatePluralService",function(){var r=function(r){r<0&&(r=-r);var n;if(parseInt(r)!==r)n="few";else{var e=String(r),t=Number(e.substr(-1)),u=e.length>1?Number(e.substr(-2,1)):null;n=1===t&&1!==u?"one":(r<=4||r>=22)&&t>=2&&t<=4&&1!==u?"few":"many"}return n};return{getTranslationPath:function(n,e){return e+"_plural."+r(n)},getTranslationKey:r}})}(angular);
"use strict";!function(r){r.module("lmxApp").factory("$translateStaticFilesLoader",["$http","$log","$q","YAML","FALLBACK_YAML_TRANSLATIONS",function(i,e,f,t,n){return function(s){function a(){e.info("Используется встроеная таблица переводов");var r;try{return r=t.parse(n)}catch(i){return e.error("Ошибка парсинга Fallback-локали"),null}}if(!(s&&(r.isArray(s.files)||r.isString(s.prefix)&&r.isString(s.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");s.files||(s.files=[{prefix:s.prefix,suffix:s.suffix}]);var u=function(n){if(!n||!r.isString(n.prefix)||!r.isString(n.suffix)){var u="Ошибка загрузки локали:";throw n?r.isString(n.prefix)?r.isString(n.suffix)||(u+=" суффикс не распознан"):u+=" префикс не распознан":u+=" отсутствует файл",new Error(u)}var o=[n.prefix,s.key,n.suffix].join("");return r.isObject(s.fileMap)&&s.fileMap[o]&&(o=s.fileMap[o]),i(r.extend({url:o,method:"GET"},s.$http)).then(function(r){if(o.match(/\.ya?ml$/)){var i;try{return i=t.parse(r.data)}catch(n){return e.error("Ошибка парсинга "+o+". Проверьте правильность формата."),a()||f.reject(s.key)}}return r.data},function(){return e.info("Файл локали не найден ("+o+")"),a()||f.reject(s.key)})};return u({prefix:s.files[0].prefix,key:s.key,suffix:s.files[0].suffix})}}])}(angular);
"use strict";!function(t){t.module("lmxApp").factory("locationService",["$http","configurationService",function(e,n){function i(t){return t.then(function(t){return t.data})}function r(e,n,i){return{params:t.extend({startWith:e||null,count:n||10},i)}}function u(t){return i(e.get(g+"Regions",{params:t}))}function o(t,n){return i(e.get(g+"Region/"+n+"/Cities",{params:t}))}function s(t,n){return i(e.get(g+"Cities",r(t,n)))}function c(t,n,u){return i(e.get(g+"Streets",r(t,u,{city:n})))}function a(t,n,u){return i(e.get(g+"Houses",r(t,u,{street:n})))}var g=n.host+"api/Location/";return{getRegions:u,getCitiesByRegion:o,getCities:s,getStreets:c,getHouses:a}}])}(angular);
"use strict";!function(e){e.module("lmxApp").factory("mapService",["$q","$rootScope","$window","configurationService","openHoursService","scriptLoadService","toArrayFilter","markdown",function(t,o,n,a,l,s,r,c){var i=function(){function i(e){var o=e.properties.get("schedule");return o?e.properties.get("scheduleProcessed")?l.getCurrentStatus(o).then(function(t){var o='<p class="lmx-map-balloon-schedule '+(t.isOpen?"_open":"_close")+'">'+t.text+"</p>",n=e.properties.get("balloonContent");n=n.replace(/(<div id="lmx-merchant-status">)(<p class="lmx-map-balloon-schedule (?:_close|_open)">(?:.*)<\/p>)(<\/div>)/,"$1"+o+"$3"),e.properties.set("balloonContent",n)}):l.getOpenHours(o).then(function(t){e.properties.set("scheduleProcessed",!0);var o="<ul>"+t.openHours.map(function(e){return"<li>"+e+"</li>"}).join("")+"</ul>",n='<p class="lmx-map-balloon-schedule '+(t.currentStatus.isOpen?"_open":"_close")+'">'+t.currentStatus.text+"</p>",a=e.properties.get("balloonContent");a=a.replace(/(<div id="lmx-merchant-schedule">)()(<\/div>)/,"$1"+o+"$3").replace(/(<div id="lmx-merchant-status">)()(<\/div>)/,"$1"+n+"$3"),e.properties.set("balloonContent",a)}):t.when()}function p(e,t){e.iconLayout="default#image",e.iconImageHref=t,e.iconImageSize=S.iconImageSize,e.iconImageOffset=S.iconImageOffset}function m(e){v.removeAll(),f.geoObjects.removeAll(),h={},e.forEach(function(e,t){if(e.location){var n="",a={hideIconOnBalloonOpen:!0};S.useCustomBalloon?a.balloonLayout=x:(n='<div class="lmx-map-balloon-wrapper">',e.imgUrl&&(n+='<div class="lmx-map-balloon-brand-logo-container"><img src="'+e.imgUrl+'" alt=""></div>'),e.markerImgUrl?p(a,e.markerImgUrl):S.useCustomIcon?p(a,S.iconImageHref):a.preset=S.preset,n+='<h2 class="lmx-map-balloon-merchant-title">'+e.title+'</h2><p class="lmx-map-balloon-merchant-location">'+e.location.description+"</p>",e.scheduleModel&&(n+='<div class="lmx-map-balloon-merchant-schedule"><p><strong>График работы</strong></p><div id="lmx-merchant-schedule"></div><div id="lmx-merchant-status"></div>'+(e.contacts?"<p>"+e.contacts+"</p>":"")+"</div>"),e.description&&(n+='<div class="lmx-map-balloon-merchant-description">',n+=c.makeHtml(e.description),n+="</div>"),n+="</div>");var l=new ymaps.Placemark([e.location.latitude,e.location.longitude],{id:e.id,name:e.title,location:e.location.description,schedule:e.scheduleModel,balloonContent:n},a);l.events.add("click",function(e){var t="isForcedLmxEvent";if(!e.get(t)){var o=e.get("target");o.properties.get("schedule")&&(e.preventDefault(),e.stopPropagation(),i(o).then(function(){var e={};e[t]=!0,o.events.fire("click",e)}))}}),l.events.add("balloonopen",function(e){o.$broadcast("yMapsBalloonOpened",e.get("target").properties.getAll())}),l.events.add("balloonclose",function(e){o.$broadcast("yMapsBalloonClosed",e.get("target").properties.getAll())}),h[t]=l}}),v.add(r(h,!1)),f.geoObjects.add(v),f.setBounds(v.getBounds(),{checkZoomRange:!0,duration:300,preciseZoom:!0,zoomMargin:1})}function u(e,t){b='<div class="lmx-balloon"><h2 class="lmx-title">{{ properties.name }}</h2><img class="lmx-close" src="'+S.balloonCloseImage+'" alt="" /></div>',ymaps.ready(function(){o.$apply(function(){o.$broadcast("ymapsReady")}),f=new ymaps.Map(e,k),S.useCustomBalloon&&(x=ymaps.templateLayoutFactory.createClass(b,{build:function(){x.superclass.build.call(this);var e=this.getParentElement().querySelector(".lmx-balloon");e.style.marginTop="-"+e.offsetHeight+"px",e.querySelector(".lmx-close").addEventListener("click",this.onCloseClick.bind(this))},clear:function(){x.superclass.clear.call(this)},onCloseClick:function(){this.events.fire("userclose")}})),w.customClusterIconContentLayout&&(w.clusterIconContentLayout=ymaps.templateLayoutFactory.createClass(w.customClusterIconContentLayout),delete w.customClusterIconContentLayout),v=new ymaps.Clusterer(w),m(t),n.lmxMap=f;var a=new CustomEvent("lmxMapReady",{detail:"Loymax map object in window.lmxMap"});document.dispatchEvent(a)})}function d(t,o){var l=a.common.map||{};e.extend(I,l.general),e.extend(k,l.state),e.extend(S,l.marker),e.extend(w,l.cluster),n.ymaps?u(t,o):C.load("https://api-maps.yandex.ru/"+I.version+"/?lang=ru_RU&load="+I.load,function(){u(t,o)})}function g(e){var t=h[e];t&&i(t).then(function(){var e=v.getObjectState(t);e.isClustered?f.setCenter(t.geometry.getCoordinates(),y+1,{checkZoomRange:!0}).then(function(){t.balloon.open()}):f.panTo(t.geometry.getCoordinates(),{flying:!1}).then(function(){t.balloon.open()})})}var v,f,h,b,x,y=14,C=new s,I={version:"2.1.55",load:"package.map,package.clusters"},k={center:[56.49771,84.97437],zoom:13,controls:[]},S={preset:"islands#blueDotIcon",useCustomIcon:!1,iconImageHref:"",iconImageSize:[35,45],iconImageOffset:[-20,-47],useCustomBalloon:!1},w={preset:"islands#invertedBlueClusterIcons",maxZoom:y};return{setYmaps:d,showBalloon:g,updateData:m}};return i}])}(angular);
"use strict";!function(e){e.module("markdown").config(["markdownProvider",function(e){e.config({omitExtraWLInCodeBlocks:!0,noHeaderId:!0,parseImgDimensions:!0,simplifiedAutoLink:!1,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,prefixHeaderId:!1,disableForced4SpacesIndentedSublists:!1,ghCompatibleHeaderId:!0,smartIndentationFix:!1,simpleLineBreaks:!0})}])}(angular);
"use strict";!function(){Array.prototype.insertAt=function(t,r){return this.splice(t,0,r),this},Array.prototype.remove=function(t){var r=this.indexOf(t);return this.removeAt(r),this},Array.prototype.removeAt=function(t){return t>=0&&t<this.length&&this.splice(t,1),this},Array.prototype.occurrencesCount=function(t){for(var r=0,e=t.length-1;e>=0;--e)this.contains(t[e])&&r++;return r},Array.prototype.contains=function(t){return this.indexOf(t)!==-1},Array.prototype.flatten=function(){for(var t=[],r=0;r<this.length;r++){var e=this[r];angular.isArray(e)?t=t.concat(e.flatten()):t.push(e)}return t},Array.prototype.fieldValues=function(t){for(var r=[],e=0;e<this.length;e++)r.push(this[e][t]);return r},Array.prototype.toDictionary=function(t,r){if(this.length<1)return null;0===arguments.length&&(t="id",r="name");for(var e={},n=this.length-1;n>=0;--n)e[this[n][t]]=angular.isDefined(r)?this[n][r]:this[n];return e},Array.prototype.uniqueValues=function(t){var r=[];if(t)for(var e=0;e<this.length;e++)r.contains(this[e][t])||r.push(this[e][t]);else r=this.filter(function(t,r,e){return e.indexOf(t)===r});return r},Array.prototype.indexOfObjectByField=function(t,r){for(var e=null,n=0;n<this.length;n++)if(this[n].hasOwnProperty(t)){if(!angular.isDefined(r)){e=n;break}if(this[n][t]===r){e=n;break}}return e},Array.prototype.getObjectByField=function(t,r){return this[this.indexOfObjectByField(t,r)]||null},Array.prototype.pushArray=function(t){return Array.prototype.push.apply(this,t),this},Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r,e=Object(this),n=e.length>>>0,i=arguments[1],o=0;o<n;o++)if(r=e[o],t.call(i,r,o,e))return r}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,r){function e(t,r){return t===r||"number"==typeof t&&"number"==typeof r&&isNaN(t)&&isNaN(r)}if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var o=0|r,u=Math.max(o>=0?o:i-Math.abs(o),0);u<i;){if(e(n[u],t))return!0;u++}return!1}})}();
"use strict";!function(){Date.prototype.addDays=function(t){var e=new Date(this);return e.setDate(e.getDate()+t),e},Date.prototype.addMinutes=function(t){return new Date(this.getTime()+6e4*t)},Date.prototype.toUTCDate=function(t){var e=(new Date).getTimezoneOffset();return t&&(e=-e),new Date(this.addMinutes(e))}}(angular);
"use strict";!function(){Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}}();
"use strict";!function(){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!==r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},writable:!0,configurable:!0}),Object.values=Object.values?Object.values:function(e){var t=["[object String]","[object Object]","[object Array]","[object Function]"],n=Object.prototype.toString.call(e);if(null===e||"undefined"==typeof e)throw new TypeError("Cannot convert undefined or null to object");if(t.contains(n))return[];if(Object.keys)return Object.keys(e).map(function(t){return e[t]});var r=[];for(var o in e)e.hasOwnProperty(o)&&r.push(e[o]);return r}}();
"use strict";function _typeof(t){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){String.prototype.contains=function(t){return this.indexOf(t)!==-1},String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,n){return void 0!==_typeof(t[n])?t[n]:e})},String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(t,e){return e=e||0,this.lastIndexOf(t,e)===e}}),String.prototype.padStart||(String.prototype.padStart=function(t,e){return t>>=0,e=String("undefined"!=typeof e?e:" "),this.length>t?String(this):(t-=this.length,t>e.length&&(e+=e.repeat(t/e.length)),e.slice(0,t)+String(this))})}();
"use strict";!function(e){e.module("lmxApp").service("openHoursService",["$translate","translatePluralService",function(r,t){function n(e){return"map."+e}function o(e,r){var t=60*parseInt(e.slice(0,2),10)+parseInt(e.slice(-2),10),n=60*parseInt(r.slice(0,2),10)+parseInt(r.slice(-2),10);return n-t}function i(e){if(null!==e){var r={workTime:{from:e[0].from,to:e[e.length-1].to},breakTime:!1};return e.length>1&&(r.breakTime={from:e[0].to,to:e[1].from}),r}return!1}function u(u){function a(e,o){return o=n(o),r(t.getTranslationPath(c,"plurals.minute"),{number:c}).then(function(t){return r(o,{minutes:t}).then(function(r){return{isOpen:e,text:r}})})}var s=new Date,l=u[m[s.getDay()-1]];if(!l)return r("map.closed").then(function(e){return{isOpen:!1,text:e}});e.isArray(l)&&(l=i(l));var c,f=s.getHours().toString().padStart(2,"0")+":"+s.getMinutes().toString().padStart(2,"0");if(l.breakTime){if(c=o(f,l.breakTime.to),c>0&&c<60)return a(!1,"closedForLunchButWillOpenSoon");if(c=o(f,l.breakTime.from),c>0&&c<60)return a(!0,"openedButWillCloseSoonForLunch");if(c=o(f,l.breakTime.to),c>0&&(c=o(l.breakTime.from,f),c>=0))return a(!1,"closedForLunch")}return c=o(f,l.workTime.to),c>0&&c<=60?a(!0,"openedButWillCloseSoon"):(c=o(f,l.workTime.from),c>0&&c<=60?a(!1,"closedButWillOpenSoon"):(c=o(f,l.workTime.to),c>0&&(c=o(l.workTime.from,f),c>=0)?a(!0,"opened"):a(!1,"closed")))}function a(t){var o=[],a=[],s=e.copy(t),l=["breakTime","weekend"].pushArray(m).map(n);return r(l).then(function(r){return m.forEach(function(t){var u;e.isArray(s[t])&&(s[t]=i(s[t])),s[t]?(u=s[t].workTime.from+"–"+s[t].workTime.to,s[t].breakTime&&(u+=", "+r[n("breakTime")]+": "+s[t].breakTime.from+"–"+s[t].breakTime.to)):u=r[n("weekend")],o[o.length-1]!==u?(a.push(r[n(t)]),o.push(u)):(a[a.length-1]+="-"+r[n(t)],a[a.length-1]=a[a.length-1].replace(/([^-]+)-(([^-]+)-)*([^-]+)/gi,"$1-$4"))}),u(s).then(function(e){return{openHours:a.map(function(e,r){return e+": "+o[r]}),currentStatus:e}})})}var m=["mon","tue","wed","thu","fri","sat","sun"];return{getOpenHours:a,getCurrentStatus:u}}])}(angular);
"use strict";!function(i){i.module("lmxApp").factory("permissionService",["$http","authService",function(n,r){function t(n){if(void 0===n)throw new Error("permission is not defined");if("string"!=typeof n)throw new Error("permission is not string");return r.loggedIn()&&i.isArray(r.authentication.permissions)&&r.authentication.permissions.contains(n)}return{hasPermission:t}}])}(angular);
"use strict";!function(e){e.module("lmxApp").service("classPrefixerService",function(){function e(e){return e.split(" ").reduce(function(e,t,i,n){return!t.startsWith(r)&&t.length&&n.indexOf(r+t)===-1?e.push(r+t):(t.startsWith(r)||"material-icons"===t)&&e.push(t),e},[]).join(" ")}var r="lmx-";return{prefix:r,getPrefixed:e}})}(angular);
"use strict";!function(e){e.module("lmxApp").service("modalService",["$uibModal","classPrefixerService",function(t,n){function d(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var d=n.offsetWidth;return e.parentNode.removeChild(e),t-d}function o(){var e=document.createElement("style");e.type="text/css",e.innerHTML="body.modal-open { padding-right: "+d()+"px; }",document.getElementsByTagName("head")[0].appendChild(e)}function a(d){var a={backdrop:"static",keyboard:!1},l="loymax-modal loymax-container show";return e.extend(a,d),a.windowClass?a.windowClass=n.getPrefixed(a.windowClass)+" "+l:a.windowClass=l,i||(o(),i=!0),t.open(a)}var i=!1;return{open:a}}])}(angular);
"use strict";function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach(function(t){_defineProperty(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}!function(e){e.module("lmxApp").factory("routingService",["$injector","$location","$rootScope","$window","configurationService",function(e,t,o,n,r){function a(e){t.search({}),t.path(e)}function i(e){"#"===e.charAt(0)?a(e.substr(1)):n.location.replace(e)}function c(){i(r.components.authentication.redirectUrlOnLogin||"#history")}function s(){y?(t.path(y),y=null):c()}function u(e){"/login"!==t.url()&&(e&&(y=t.$$path),a("login"))}function l(){var e=n.location,t=e.port;return e.protocol+"//"+e.hostname+(80!==t&&t?":"+t:"")}function p(){return t.url().substr(1)}function f(e){return e?e.split("/"):[]}function g(){var e={action:void 0,params:void 0},o=n.location.search.slice(1);return o.length?e.params=JSON.parse('{"'+decodeURI(o).replace(/&/g,'","').replace(/=/g,'":"')+'"}'):(e.action=t.path().substr(1),e.params=Object.keys(t.search()).length?t.search():void 0),e}function h(e){if(n.location.search.slice(1)){var o=n.location.href.indexOf(n.location.search),r=n.location.href.substring(0,o);e&&(r+=/\/$/.test(r)?e.replace(/^\//,""):e),n.location.href=r}else t.search({}),e&&i(e)}function d(e){return e.replace(/[^a-z0-9]|\s+|\r?\n|\r/gim,"")}function b(){var o=["login","auth","registration","forgot","reset-password"],n=e.get("authService");n.loggedIn()&&o.contains(d(t.url()))&&i(r.components.authentication.redirectUrlOnLogin||"#history")}function m(){var t=e.get("authService");i(t.loggedIn()?r.components.authentication.redirectUrlOnLogin||"#offers":r.components.authentication.redirectUrlOnLogout||"#login")}var y,O={authentication:"#login",resetPassword:"#reset-password",registration:"#registration",offers:"#offers",feedback:"#feedback",anonymousFeedback:"#anonymous-feedback",message:"#message",showcase:"#showcase",myCoupons:"my-coupons",cards:"#cards",favoriteGoods:"#favorite-goods",balance:"#balance",history:"#history",brands:"#brands",merchant:"#merchant",userStatus:"#user-status",social:"#social-binding",announcement:"#announcement",settings:"#settings",questionnaire:"#questionnaire",options:"#options",personalOffers:"#personal-offers",personalGoods:"#personal-goods"},v=_objectSpread({},O,{},n.lmxConfig.pages);return{checkOnUnavailablePageForAuthenticatedUser:b,getLocationURL:l,getApplicationURL:p,getApplicationURLParts:f,getSearchParams:g,replaceSearchParams:h,goHome:c,goToDefault:s,goToLogin:u,goTo:a,redirectTo:i,pages:v,goToDefaultPage:m}}])}(angular);
"use strict";!function(e){e.module("lmxApp").factory("scriptLoadService",function(){var t=function(){function t(t,n){var a=document.createElement("script");a.onload=a.onreadystatechange=function(){a.readyState&&"complete"!==a.readyState&&"loaded"!==a.readyState||(a.onload=a.onreadystatechange=null,e.isFunction(n)&&n())},a.async=!0,a.src=t,document.getElementsByTagName("body")[0].appendChild(a)}return{load:t}};return t})}(angular);
"use strict";!function(t){t.module("lmxApp").service("showcaseService",["$http","configurationService","LIMITS",function(t,n,e){function u(){return t.get(s+"categories").then(function(t){return t.data})}function r(n){return t.get(s+n+"/types").then(function(t){return t.data})}function o(n){return t.get(s+"types/"+n).then(function(t){return t.data})}function c(n){return t.get(s+"user",{params:{count:e.INT32_MAX,onlyActive:n}}).then(function(t){return t.data})}function a(n){return t.post(s+"buy/"+n).then(function(t){return t.data})}function i(n){return t.post(s+"Refund/"+n).then(function(t){return t.data})}var s=n.showcase+"api/coupons/";return{getCategories:u,getCouponsByCategory:r,getCouponById:o,getUserCoupons:c,buyCoupon:a,refundUserCoupon:i}}])}(angular);
"use strict";!function(e){e.module("lmxApp").factory("socialActionCheckerService",["$window","authService","configurationService","localStorageService","registrationService","routingService","socialService",function(e,a,r,t,i,o,n){function c(){var c=o.getSearchParams();if(c.params&&c.params.code&&c.params.providerType){var s=o.getLocationURL()+e.location.pathname+"?providerType="+c.params.providerType+"&action="+c.params.action;switch(c.params.action){case"auth":n.login(c.params.providerType,c.params.code,s).then(function(e){a.clearAuthData(),a.setToken(e.access_token),i.tryFinishRegistration().then(function(i){i.registrationCompleted?a.setAuth(i.access_token,i.refresh_token).then(function(){o.replaceSearchParams(r.components.authentication.redirectUrlOnLogin||o.pages.history)}):(t.set("tokenForSocialRegistration",e.access_token),t.set("refreshTokenForSocialRegistration",e.refresh_token),o.replaceSearchParams(o.pages.registration))})});break;case"binding":n.setClient(c.params.providerType,c.params.code,s).then(function(){o.replaceSearchParams(o.pages.socialBinding)})}}}return{parseSocialAction:c}}])}(angular);
"use strict";!function(t){t.module("lmxApp").factory("stateService",function(){function t(t,e){n[t]=e}function e(t){return n[t]}var n={};return{setState:t,getState:e}})}(angular);
"use strict";!function(e){e.module("templateCache",[])}(angular);
"use strict";!function(t){t.module("lmxApp").service("userService",["$http","$q","$rootScope","configurationService","backendEnumsService",function(n,e,r,a,u){function c(){var t={userInfo:i(),userBalance:s()};return e.all(t).then(function(t){var n=t.userInfo;return n.balanceAccounts=t.userBalance,n.baseBalanceAccount=n.balanceAccounts[0],n})}function i(t){if(p)return e.when(p);var r={};return t&&(r.headers={Authorization:t.data.token_type+" "+t.data.access_token}),n.get(b,r).then(function(t){return t.data.state&&t.data.state===u.enums.userStatus.registered&&(p=t.data),t.data})}function o(){p=null}function s(){return n.get(v+"Balance").then(function(t){return t.data})}function f(){return n.get(b+"DetailedBalance").then(function(t){return t.data})}function l(){return n.get(b+"Attributes").then(function(n){var e={};return t.forEach(n.data,function(t){e[t.info.logicalName]=t}),e})}function d(t){return n.get(b+"Subscriptions",{params:{subscriptionExternalIds:t}}).then(function(t){return t.data})}function g(t){return n.post(b+"Subscriptions",t).then(function(t){return t})}function h(){return n.get(b+"Status").then(function(t){return t.data})}var p,b=a.host+"api/User/",v=a.host+"v1.1/User/";return{getUserInfo:c,getDetailedBalance:f,getBalance:s,getAttributes:l,getSubscriptions:d,setSubscriptions:g,getUserStatus:h,getUser:i,removeUserData:o}}])}(angular);
angular.module("templateCache").run(["$templateCache",function(n){n.put("app/directives/announcement/modal/announcementModal.html",'<div>\r\n    <div class="modal-header">\r\n        <div class="lmx-modal-closer" ng-click="close()"></div>\r\n        <h2>{{:: announcement.attributes.OfferTitle.value}}</h2>\r\n    </div>\r\n\r\n    <div class="modal-content-wrapper">\r\n        <div class="modal-body">\r\n            <div class="lmx-image">\r\n                <img ng-src="{{:: getAnnouncementImagePath(announcement.attributes.OfferImage.value)}}" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="">\r\n            </div>\r\n            <div class="lmx-description">{{:: announcement.attributes.OfferDescription.value}}</div>\r\n        </div>\r\n        <div class="modal-footer lmx-btn-container">\r\n            <button type="button" ng-click="close()">{{\'buttons.close\' | translate}}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/announcement/modal/authAnnouncementModal.html",'<div>\r\n    <div class="lmx-modal-closer" ng-click="close()"></div>\r\n    <div loader="inProgress">\r\n        <div ng-if="!inProgress" class="modal-content-wrapper">\r\n            <div class="modal-body">\r\n                <a href="#/offers">\r\n                    <div class="lmx-image">\r\n                        <img ng-src="{{:: getAnnouncementImagePath(announcement.attributesDictionary.OfferImage.value)}}" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="" ng-click="openOffer()">\r\n                    </div>\r\n                </a>\r\n            </div>\r\n            <div class="modal-footer lmx-btn-container">\r\n                <button type="button" ng-click="close()">{{\'buttons.close\' | translate}}</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/announcement/offerSpace.html",'<div class="lmx-container lmx-announcements">\r\n    <section>\r\n        <h2>{{\'announcement.title\' | translate}}</h2>\r\n        <div loader="isProgress" class="lmx-announcements-list">\r\n            <article ng-repeat="announcement in announcements track by announcement.id" ng-click="openAnnouncementModal(announcement)" class="lmx-announcement lmx-card">\r\n                <div class="lmx-card-image">\r\n                    <img ng-src="{{:: getAnnouncementImagePath(announcement.attributes.OfferImage.value)}}" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="">\r\n                </div>\r\n                <div class="lmx-card-content">\r\n                    <div class="lmx-card-title" title="{{:: announcement.attributes.OfferTitle.value}}">\r\n                        {{:: announcement.attributes.OfferTitle.value}}\r\n                    </div>\r\n                    <div class="lmx-card-description">\r\n                        {{:: announcement.attributes.OfferDescription.value}}\r\n                    </div>\r\n                </div>\r\n            </article>\r\n        </div>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/anonymousFeedback/anonymousFeedback.html",'<div class="lmx-container lmx-anonymous-feedback">\r\n    <section>\r\n        <h2>{{\'anonymousFeedback.title\' | translate}}:</h2>\r\n        <div class="lmx-hint">\r\n            <p ng-bind-html="\'anonymousFeedback.hint\' | translate"></p>\r\n        </div>\r\n        <form novalidate="" name="anonFeedbackForm" ng-submit="anonFeedbackForm.$valid && sendMail(anonFeedbackForm)">\r\n            <form-group label-text="{{\'anonymousFeedback.theme\' | translate}}">\r\n                <input type="text" id="lmx-subject" ng-model="messageModel.subject" name="subject" required="">\r\n            </form-group>\r\n            <form-group label-text="{{\'anonymousFeedback.message\' | translate}}">\r\n                <textarea id="lmx-msg-textarea" ng-model="messageModel.message" name="msg-textarea" required="">\r\n                </textarea>\r\n            </form-group>\r\n            <div class="lmx-btn-container">\r\n                <button type="submit" class="lmx-right">{{\'buttons.send\' | translate}}</button>\r\n            </div>\r\n        </form>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/authentication/authentication.html",'<div class="lmx-container lmx-auth">\r\n    <h2>{{\'authentication.title\' | translate}}</h2>\r\n    <lmx-notifications area="login"></lmx-notifications>\r\n\r\n    <identifiers ng-if=":: identifiers.arr !== undefined" ng-hide="cvcRequired" identifiers="identifiers.arr" ng-model="model.identifier" ng-change="resetFormModels()"></identifiers>\r\n\r\n    <form novalidate="" method="post" name="loginForm" ng-submit="loginForm.$valid && login()" id="lmx-loginForm">\r\n        <div ng-if="cvcRequired">\r\n            <p>{{cvcMessage}}</p>\r\n            <form-group label-text="{{\'authentication.code\' | translate}}">\r\n                <input type="text" ng-model="model.cvcData.password" id="lmx-cvc" name="cvc" ng-disabled="authInProgress" required="">\r\n            </form-group>\r\n            <div>\r\n                <a id="lmx-confirm-code-repeated" ng-click="resendCode()" ng-hide="authInProgress" href="">{{\'resetPassword.resendCode\' | translate}}</a>\r\n            </div>\r\n        </div>\r\n        <div ng-if="!cvcRequired">\r\n            <form-group ng-if="model.identifier === IDENTIFIERS.phone" label-text="{{\'identifiers.\' + model.identifier | translate}}">\r\n                <phone-input ng-model="model.loginData.login" id="lmx-login_{{model.identifier}}" name="login" ng-disabled="authInProgress" required="" autofocus=""></phone-input>\r\n            </form-group>\r\n            <form-group ng-if="model.identifier === IDENTIFIERS.email" label-text="{{\'identifiers.\' + model.identifier | translate}}">\r\n                <input type="email" ng-model="model.loginData.login" id="lmx-login_{{model.identifier}}" name="login" placeholder="example@mail.com" required="">\r\n            </form-group>\r\n            <form-group ng-if="model.identifier === IDENTIFIERS.card" label-text="{{\'identifiers.\' + model.identifier | translate}}">\r\n                <input type="text" ng-model="model.loginData.login" id="lmx-login_{{model.identifier}}" name="login" ng-disabled="authInProgress" placeholder="0000 0000 0000 0000" mask="9999 9999 9999 9999" clean="true" validate="false" restrict="reject" required="">\r\n            </form-group>\r\n            <form-group label-text="{{\'authentication.password\' | translate}}">\r\n                <input type="password" ng-model="model.loginData.password" id="lmx-password" name="password" ng-disabled="authInProgress" required="">\r\n            </form-group>\r\n            <div ng-if="!cvcRequired" class="lmx-auth-links lmx-row" ng-class="{\'lmx-invisible\': authInProgress}">\r\n                <div>\r\n                    <a ng-click="resetPassword()" href="">{{\'authentication.forgotPassword\' | translate}}</a>\r\n                </div>\r\n                <div>\r\n                    <a href="{{:: registrationUrl}}">{{\'authentication.register\' | translate}}</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="lmx-btn-container">\r\n            <button type="reset" ng-hide="authInProgress" ng-if="cvcRequired" ng-click="cancelCvcConfirmation()">\r\n                {{\'buttons.cancel\' | translate}}\r\n            </button>\r\n            <button type="submit" ng-hide="authInProgress">\r\n                {{\'authentication.login\' | translate}}\r\n            </button>\r\n\r\n            <inline-loader line="">authInProgress</inline-loader>\r\n        </div>\r\n        <lmx-social ng-if="!cvcRequired" ng-hide="authInProgress"></lmx-social>\r\n    </form>\r\n</div>\r\n'),n.put("app/directives/balance/balance.html",'<div class="lmx-container lmx-balance">\r\n    <section>\r\n        <h2>{{\'balance.title\' | translate}}</h2>\r\n        <div loader="inProgress">\r\n            <div ng-if="!inProgress" ng-switch="!!balanceAccounts.length">\r\n                <div ng-switch-when="true" class="lmx-balance-block">\r\n                    <lmx-tabs list="balanceAccounts" ng-model="selectedAccount" view-field="title">\r\n                    </lmx-tabs>\r\n                    <balance-info></balance-info>\r\n                    <div class="lmx-balance-accordion-wrap">\r\n                        <uib-accordion class="lmx-balance-accordion">\r\n                            <uib-accordion-group ng-repeat="selectedAccount in balanceAccounts" class="lmx-balance-accordion-group">\r\n                                <uib-accordion-heading class="lmx-balance-header">\r\n                                    <span>{{::selectedAccount.title}}</span>\r\n                                    <span class="glyphicon glyphicon-chevron-down"></span>\r\n                                    <span class="glyphicon glyphicon-chevron-up"></span>\r\n                                </uib-accordion-heading>\r\n                                <balance-info></balance-info>\r\n                            </uib-accordion-group>\r\n                        </uib-accordion>\r\n                    </div>\r\n                </div>\r\n                <div ng-switch-when="false" class="lmx-no-balance-block">\r\n                    {{\'balance.infoNotFound\' | translate}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/balance/balanceInfo.html",'<div class="lmx-balance-tab-content">\r\n    <h3>{{selectedAccount.currency.name}}</h3>\r\n    <div class="lmx-account-description">{{selectedAccount.currency.description}}</div>\r\n    <div class="lmx-account-details">\r\n        <div>\r\n            <b>{{\'balance.amount\' | translate}}</b>: {{selectedAccount.amount | number: 2}}\r\n            {{selectedAccount.currency.nameCases[getCurrencyNameCase(selectedAccount.amount)]}}\r\n        </div>\r\n        <div>\r\n            <b>{{\'balance.notActivatedAmount\' | translate}}</b>:\r\n            {{selectedAccount.notActivatedAmount | number: 2}}\r\n            {{selectedAccount.currency.nameCases[getCurrencyNameCase(selectedAccount.notActivatedAmount)]}}\r\n        </div>\r\n    </div>\r\n    <table ng-if="selectedAccount.lifeTimesByTime.length">\r\n        <tr>\r\n            <th>{{\'balance.lastWeekChanges\' | translate}}</th>\r\n            <th>{{\'balance.date\' | translate}}</th>\r\n        </tr>\r\n        <tr ng-repeat="lifeTime in selectedAccount.lifeTimesByTime track by $index">\r\n            <td class="lmx-for-desktop">\r\n                {{lifeTime.amount | number:\r\n                2}}&nbsp;{{selectedAccount.currency.nameCases[getCurrencyNameCase(lifeTime.amount)]}}\r\n            </td>\r\n            <td class="lmx-for-mobile">\r\n                {{lifeTime.amount | number: 2}}\r\n                <span class="lmx-amount-name">{{selectedAccount.currency.nameCases[getCurrencyNameCase(lifeTime.amount)]}}</span>\r\n            </td>\r\n            <td>{{lifeTime.date | toUTC | shortDateTime}}</td>\r\n        </tr>\r\n    </table>\r\n\r\n    <table ng-if="selectedAccount.lifeTimesByPeriod.length">\r\n        <tr>\r\n            <th>{{\'balance.period\' | translate}}</th>\r\n            <th>{{\'balance.activationAmount\' | translate}}</th>\r\n            <th>{{\'balance.expirationAmount\' | translate}}</th>\r\n        </tr>\r\n        <tr ng-repeat="lifeTime in selectedAccount.lifeTimesByPeriod track by $index">\r\n            <td>\r\n                {{(\'balance.lifeTimePeriod.\' + (lifeTime.period | lowerCamelCase)) | translate}}\r\n            </td>\r\n            <td class="lmx-for-desktop">\r\n                {{lifeTime.activationAmount | number:\r\n                2}}&nbsp;{{selectedAccount.currency.nameCases[getCurrencyNameCase(lifeTime.activationAmount)]}}\r\n            </td>\r\n            <td class="lmx-for-mobile">\r\n                {{lifeTime.activationAmount | number: 2}}\r\n                <span class="lmx-amount-name">{{selectedAccount.currency.nameCases[getCurrencyNameCase(lifeTime.activationAmount)]}}</span>\r\n            </td>\r\n            <td class="lmx-for-desktop">\r\n                {{lifeTime.expirationAmount | number:\r\n                2}}&nbsp;{{selectedAccount.currency.nameCases[getCurrencyNameCase(lifeTime.expirationAmount)]}}\r\n            </td>\r\n            <td class="lmx-for-mobile">\r\n                {{lifeTime.expirationAmount | number: 2}}\r\n                <span class="lmx-amount-name">{{selectedAccount.currency.nameCases[getCurrencyNameCase(lifeTime.expirationAmount)]}}</span>\r\n            </td>\r\n        </tr>\r\n    </table>\r\n</div>\r\n'),n.put("app/directives/birthdayPicker/birthdayPicker.html",'<div class="lmx-birthday-picker">\r\n    <div class="lmx-birthday-picker-wrapper lmx-day">\r\n        <div lmx-custom-select="" ng-model="date" repeat="dates" placeholder="{{\'datePicker.day\' | translate}}" options="d for d in dates track by d" is-disabled="disabled"></div>\r\n    </div>\r\n    <div class="lmx-birthday-picker-wrapper lmx-month">\r\n        <div lmx-custom-select="" ng-model="month" repeat="months" placeholder="{{\'datePicker.month\' | translate}}" options="m.value as m.name for m in months" is-disabled="disabled"></div>\r\n    </div>\r\n    <div class="lmx-birthday-picker-wrapper lmx-year">\r\n        <div lmx-custom-select="" ng-model="year" repeat="years" placeholder="{{\'datePicker.year\' | translate}}" options="y for y in years" is-disabled="disabled"></div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/brand/brand.html",'<div class="lmx-container lmx-brand">\r\n    <section>\r\n        <h2>{{::brand.name}}</h2>\r\n        <p>{{::brand.description}}</p>\r\n        <div class="lmx-content">\r\n            <div class="lmx-image">\r\n                <img ng-src="{{:: brand.imgUrl}}" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="">\r\n            </div>\r\n            <a ng-href="{{::brand.url}}">{{\'brands.site\' | translate}}</a>\r\n            <div ng-if="merchants.length">\r\n                <p>{{\'brands.locations\' | translate}}:</p>\r\n                <div ng-repeat="merchant in merchants track by merchant.id">\r\n                    <span>{{::merchant.location.description}}</span>\r\n                </div>\r\n                <lmx-map class="lmx-map" data="merchants" options="{\r\n                                    markerImg: brand.markerUrl,\r\n                                    markerSize: [29, 32]\r\n                                   }">\r\n                </lmx-map>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/brands/brands.html",'<div>\r\n    <div class="lmx-container lmx-brands" ng-if="!appLocationParts[1]">\r\n        <section>\r\n            <h2>{{\'brands.title\' | translate}}</h2>\r\n            <div loader="inProgress">\r\n                <!-- TODO width: 400px; height: 400px; -->\r\n                <div class="lmx-card" style="width: 400px; height: 400px;" ng-repeat="brand in brands track by brand.id" ng-click="changeLocation(\'brands/\' + brand.id)">\r\n                    <div>\r\n                        <img ng-src="{{:: brand.imgUrl}}" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="" style="height: 250px; padding: 10px">\r\n                    </div>\r\n                    <div class="lmx-card-content">\r\n                        <span class="lmx-card-title">{{:: brand.name}}</span>\r\n                        <div class="lmx-description">{{::brand.description}}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n    <brand ng-if="appLocationParts[1]" brand-id="appLocationParts[1]"></brand>\r\n</div>\r\n'),n.put("app/directives/brandsNames/brandsNames.html",'<div class="lmx-brands-names" ng-class="{\'lmx-one-brand\': brands.length === 1}">\r\n    <div ng-if="brands.length > 1">\r\n        <span ng-repeat="brand in brands track by brand.id">\r\n            {{::brand.name | nbspSpaces}}<span ng-show="!$last">, </span>\r\n        </span>\r\n    </div>\r\n    <div ng-if="brands.length === 1" ng-switch=":: !!brands[0].imgUrl && brands[0].imgUrl !== \'undefined\'">\r\n        <span ng-switch-when="false">{{:: brands[0].name | nbspSpaces}}</span>\r\n        <img ng-switch-when="true" class="lmx-brand-img" ng-src="{{:: brands[0].imgUrl}}" fallback-image="" alt="" title="{{:: brands[0].name}}">\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/cards/card/card.html",'<div>\r\n    <div class="lmx-card-item__image" ng-class="{\'lmx-blocked\': card.block}">\r\n        <img ng-src="{{ card.imageUrl}}" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="">\r\n    </div>\r\n    <div class="lmx-card-item__info" ng-switch=":: !!cardNumberGraphicalCodes.length && !card.isInGroup">\r\n        <div ng-switch-when="true">\r\n            <!-- Пробел после :: в {{::cardNumberGraphicalCodes.join(\' \')}} сводит префиксер с ума -->\r\n            <div class="lmx-card-number lmx-card-code lmx-{{::cardNumberGraphicalCodes.join(\' lmx-\')}}" ng-click="displayCodes(card)">\r\n                <a class="lmx-pseudolink">{{:: card.number | charsDivide: 4}}</a>\r\n            </div>\r\n        </div>\r\n        <div ng-switch-when="false" class="lmx-card-number">{{:: card.number | charsDivide: 4}}</div>\r\n\r\n        <div class="lmx-card-category" ng-hide="::card.cardCategory.title.toLowerCase() === \'стандартная\'">\r\n            {{:: card.cardCategory.title}}\r\n        </div>\r\n        <div class="lmx-card-blocked-state-info" ng-if="::card.block">\r\n            {{\'cards.info.blocked\' | translate}}\r\n        </div>\r\n\r\n        <dl class="lmx-card-owner" ng-if="::card.cardOwnerInfo.firstName || card.cardOwnerInfo.lastName || card.patronymicName">\r\n            <dt>{{\'cards.info.owner\' | translate}}:</dt>\r\n            <dd>\r\n                <span>{{:: card.cardOwnerInfo.lastName}}</span>\r\n                <span>{{:: card.cardOwnerInfo.firstName}}</span>\r\n                <span>{{:: card.cardOwnerInfo.patronymicName}}</span>\r\n            </dd>\r\n        </dl>\r\n        <dl class="lmx-card-paid">\r\n            <dt>{{\'cards.info.paid\' | translate}}:</dt>\r\n            <dd>\r\n                <span>{{:: card.paid.amount | number: 2}}</span>\r\n                <span>{{:: card.paid.currencyInfo.nameCases.abbreviation}}</span>\r\n            </dd>\r\n        </dl>\r\n        <div ng-if=":: !card.isInGroup" class="lmx-card-actions">\r\n            <button ng-class="card.block ? \'lmx-card-action__unblock\' : \'lmx-card-action__block\'" class="lmx-block-btn" ng-if="card.cardActionAccessInfo.canBlock" ng-click="blockStateChange(card)" type="button">\r\n                {{card.block ? \'cards.actions.unblock\' : \'cards.actions.block\' | translate}}\r\n            </button>\r\n            <button ng-if="card.cardActionAccessInfo.canReplace" ng-click="replaceCard(card)" type="button" class="lmx-replace-btn">\r\n                {{\'cards.actions.replace\' | translate}}\r\n            </button>\r\n            <a ng-if="card.walletUrl && !card.block && platfotm.currentPlatform" ng-href="{{::card.walletUrl}}" target="_blank" class="lmx-wallet-btn lmx-{{::platfotm.currentPlatform}}-wallet-btn"></a>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/cards/cards.html",'<div class="lmx-container lmx-cards">\r\n    <section>\r\n        <h2>{{\'cards.title\' | translate}}</h2>\r\n        <div loader="inProgress">\r\n            <div ng-if="!inProgress">\r\n                <lmx-tabs ng-if="isAttachCardAvailable" list="tabs" ng-model="selectedTab.value" view-field="name">\r\n                </lmx-tabs>\r\n                <div ng-show="selectedTab.value === tabs.personalCards" ng-class="::{\'lmx-no-add-card-button\': !maxCountOfMainCardsForUserNotReached}" class="lmx-personal-cards">\r\n                    <p ng-bind-html="\'cards.replaceHint\' | translate"></p>\r\n\r\n                    <div class="lmx-card-item-wrap" ng-repeat="card in cards.personal track by card.id">\r\n                        <card card="card" class="lmx-card-item"></card>\r\n                    </div>\r\n                    <div class="lmx-add-card-buttons" ng-if="maxCountOfMainCardsForUserNotReached">\r\n                        <button ng-click="setCard()" type="button" class="lmx-set-card-btn">\r\n                            {{\'cards.actions.set\' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div ng-show="selectedTab.value === tabs.accountCards" class="lmx-account-cards">\r\n                    <div ng-repeat="card in cards.group track by card.id">\r\n                        <card card="card" class="lmx-card-item" in-group=""></card>\r\n                    </div>\r\n                    <div class="lmx-add-card-buttons">\r\n                        <button ng-click="attachCard()" type="button" class="lmx-attach-btn">\r\n                            {{\'cards.actions.attach\' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/cards/modal/modalAttachCard.html",'<div class="lmx-attach-card-modal">\r\n    <div class="modal-header">\r\n        <h2>{{\'cards.attachCardModal.title\' | translate}}</h2>\r\n    </div>\r\n\r\n    <lmx-notifications area="cardModal"></lmx-notifications>\r\n    <div loader="confirmForm === undefined">\r\n        <div ng-hide="confirmForm === undefined" class="lmx-hint lmx-modal-description lmx-row">\r\n            <div>{{\'cards.attachCardModal.separationImpossible\' | translate}}</div>\r\n            <div ng-if="confirmForm" ng-bind-html="\'cards.attachCardModal.confirmCode\' | translate"></div>\r\n        </div>\r\n        <form novalidate="" ng-if="confirmForm === false" name="attachCardForm" ng-submit="attachCardForm.$valid && startAttachCard()">\r\n            <div class="modal-content-wrapper">\r\n                <div class="modal-body">\r\n                    <form-group label-text="{{\'cards.attachCardModal.cardNumber\' | translate}}">\r\n                        <input type="text" ng-model="model.cardNumber" ng-disabled="inProgress" id="lmx-cardnumber" name="cardnumber" required="" autofocus="">\r\n                    </form-group>\r\n                    <form-group label-text="{{\'cards.attachCardModal.password\' | translate}}">\r\n                        <input type="password" ng-model="model.password" ng-disabled="inProgress" id="lmx-password" name="password" autocomplete="off" required="">\r\n                    </form-group>\r\n                </div>\r\n                <div class="modal-footer lmx-btn-container">\r\n                    <div ng-hide="inProgress">\r\n                        <button class="lmx-btn-cancel" type="button" ng-click="cancel()">\r\n                            {{\'buttons.cancel\' | translate}}\r\n                        </button>\r\n                        <button type="submit">{{\'buttons.next\' | translate}}</button>\r\n                    </div>\r\n                    <inline-loader>inProgress</inline-loader>\r\n                </div>\r\n            </div>\r\n        </form>\r\n\r\n        <form novalidate="" ng-if="confirmForm" name="attachCardConfirmForm" ng-submit="attachCardConfirmForm.$valid && confirm()">\r\n            <div class="modal-content-wrapper">\r\n                <div class="modal-body">\r\n                    <form-group label-text="{{\'cards.attachCardModal.code\' | translate}}">\r\n                        <input type="text" ng-model="model.confirmCode" ng-disabled="inProgress" id="lmx-confirmCode" name="confirmCode" required="" autofocus="">\r\n                    </form-group>\r\n                    <div ng-hide="inProgress">\r\n                        <a ng-click="sendConfirmCode()" href="">{{\'cards.attachCardModal.resendConfirmCode\' | translate}}</a>\r\n                    </div>\r\n                </div>\r\n                <div class="modal-footer lmx-btn-container">\r\n                    <div ng-hide="inProgress">\r\n                        <button class="lmx-btn-cancel" ng-click="cancelAttachCard()" type="button">\r\n                            {{\'buttons.cancel\' | translate}}\r\n                        </button>\r\n                        <button type="submit">{{\'cards.actions.attach\' | translate}}</button>\r\n                    </div>\r\n                    <inline-loader>inProgress</inline-loader>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/cards/modal/modalBlockStateChange.html",'<div class="lmx-block-state-change-modal">\r\n    <div class="modal-header">\r\n        <h2>\r\n            {{\'cards.blockCardModal.\' + (isBlocked ? \'unblockTitle\' : \'blockTitle\') | translate}}\r\n        </h2>\r\n    </div>\r\n    <lmx-notifications area="cardModal"></lmx-notifications>\r\n    <form novalidate="" name="blockCardForm" ng-submit="blockCardForm.$valid && blockStateChange()">\r\n        <div class="modal-content-wrapper">\r\n            <div class="modal-body">\r\n                <form-group label-text="{{\'cards.blockCardModal.password\' | translate}}">\r\n                    <input type="password" ng-model="model.password" ng-disabled="inProgress" id="lmx-userPassword" name="userPassword" autocomplete="off" required="" autofocus="">\r\n                </form-group>\r\n            </div>\r\n            <div class="modal-footer lmx-btn-container">\r\n                <div ng-hide="inProgress">\r\n                    <button class="lmx-btn-cancel" ng-click="cancel()" type="button">\r\n                        {{\'buttons.cancel\' | translate}}\r\n                    </button>\r\n                    <button type="submit">\r\n                        {{isBlocked ? \'cards.actions.unblock\' : \'cards.actions.block\' | translate}}\r\n                    </button>\r\n                </div>\r\n                <inline-loader>inProgress</inline-loader>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n'),n.put("app/directives/cards/modal/modalGraphicalCodes.html",'<div class="lmx-card-codes-modal">\r\n    <div class="modal-body">\r\n        <section ng-if=":: displayBarCode" class="lmx-bar-code lmx-margin-bottom">\r\n            <h2>{{\'cards.graphicalCodesModal.barCode\' | translate}}</h2>\r\n            <angular-barcode ng-model="card.barCode" bc-type="svg"></angular-barcode>\r\n        </section>\r\n\r\n        <section ng-if=":: displayQrCode" class="lmx-qr-code">\r\n            <h2>{{\'cards.graphicalCodesModal.qrCode\' | translate}}</h2>\r\n            <qrcode data="{{:: card.number}}" size="222"></qrcode>\r\n        </section>\r\n    </div>\r\n\r\n    <div class="modal-footer lmx-btn-container">\r\n        <button type="button" ng-click="close()">{{\'buttons.close\' | translate}}</button>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/cards/modal/modalReplaceCard.html",'<div class="lmx-replace-card-modal">\r\n    <div class="modal-header">\r\n        <h2>{{\'cards.replaceCardModal.title\' | translate}}</h2>\r\n    </div>\r\n    <lmx-notifications area="cardModal"></lmx-notifications>\r\n    <form novalidate="" name="replaceCardForm" ng-submit="replaceCardForm.$valid && replaceCard()">\r\n        <div class="modal-content-wrapper">\r\n            <div class="modal-body">\r\n                <form-group label-text="{{\'cards.replaceCardModal.cardNumber\' | translate}}">\r\n                    <input type="text" ng-model="model.cardNumber" ng-disabled="inProgress" id="lmx-cardNumber" name="cardNumber" required="" autofocus="">\r\n                </form-group>\r\n                <form-group ng-if="cvcCodeCardsRegistration" label-text="{{\'cards.replaceCardModal.cvcCode\' | translate}}">\r\n                    <input type="number" ng-model="model.cvcCode" ng-disabled="inProgress" id="lmx-cvcCode" name="cvcCode">\r\n                </form-group>\r\n                <form-group label-text="{{\'cards.replaceCardModal.password\' | translate}}">\r\n                    <input type="password" ng-model="model.password" ng-disabled="inProgress" id="lmx-password" name="password" autocomplete="off" required="">\r\n                </form-group>\r\n            </div>\r\n            <div class="modal-footer lmx-btn-container">\r\n                <div ng-hide="inProgress">\r\n                    <button class="lmx-btn-cancel" ng-click="cancel()" type="button">\r\n                        {{\'buttons.cancel\' | translate}}\r\n                    </button>\r\n                    <button type="submit">\r\n                        {{\'cards.actions.replace\' | translate}}\r\n                    </button>\r\n                </div>\r\n                <inline-loader>inProgress</inline-loader>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n'),n.put("app/directives/cards/modal/modalSetCard.html",'<div class="lmx-set-card-modal">\r\n    <div class="modal-header">\r\n        <h2>{{\'cards.setCardModal.title\' | translate}}</h2>\r\n    </div>\r\n\r\n    <lmx-notifications area="cardModal"></lmx-notifications>\r\n\r\n    <form novalidate="" name="setCardForm" ng-submit="setCardForm.$valid && setCard()">\r\n        <div class="modal-content-wrapper">\r\n            <div class="modal-body">\r\n                <form-group label-text="{{\'cards.setCardModal.cardNumber\' | translate}}">\r\n                    <input type="text" ng-model="model.cardNumber" ng-disabled="inProgress" id="lmx-cardNumber" name="cardNumber" required="" autofocus="">\r\n                </form-group>\r\n                <form-group ng-if="cvcCodeCardsRegistration" label-text="{{\'registration.cardStep.cvcCode\' | translate}}">\r\n                    <input type="number" ng-model="model.cvcCode" ng-disabled="inProgress" id="lmx-cvcCode" name="cvcCode">\r\n                </form-group>\r\n            </div>\r\n            <div class="modal-footer lmx-btn-container">\r\n                <div ng-hide="inProgress">\r\n                    <button class="lmx-btn-cancel" ng-click="cancel()" type="button">\r\n                        {{\'buttons.cancel\' | translate}}\r\n                    </button>\r\n                    <button type="submit">\r\n                        {{\'cards.actions.set\' | translate}}\r\n                    </button>\r\n                </div>\r\n                <inline-loader>inProgress</inline-loader>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n'),n.put("app/directives/coupon/coupon.html",'<div class="lmx-card" style="width: 400px; height: 400px;">\r\n    <div class="lmx-card-image">\r\n        <img ng-src="{{::coupon.imageUri || \'undefined\'}}" fallback-image="" fallback-title="{{\'coupons.imageNotFound\' | translate}}" alt="" style="height: 250px; padding: 10px">\r\n    </div>\r\n    <div class="lmx-card-content">\r\n        <span class="lmx-card-title">{{coupon.name}}</span>\r\n        <span><b>{{\'coupons.price\' | translate}}:</b> {{coupon.price}} RUB</span>\r\n    </div>\r\n    <div class="lmx-card-reveal">\r\n        <span class="lmx-card-title"><span class="glyphicon glyphicon-remove"></span>{{coupon.name}}</span>\r\n        <p>\r\n            <span><b>{{\'coupons.description\' | translate}}:</b>{{:: couponInfo.description ||\r\n                (\'coupons.noDescription\' | translate)}}</span>\r\n        </p>\r\n        <button ng-if=":: loggedIn" type="button" ng-click="openBuyCouponModal(coupon)">\r\n            <div>\r\n                {{\'coupons.buy\' | translate}}\r\n                <span class="lmx-price">{{ coupon.price | zeroFill: 2 }}</span>\r\n            </div>\r\n        </button>\r\n        <button ng-if=":: !loggedIn" type="button" ng-click="goToLogin()">\r\n            <div>{{\'coupons.login\' | translate}}</div>\r\n        </button>\r\n    </div>\r\n</div>\r\n'),
n.put("app/directives/datePicker/datePickerView.html",'<span class="date-picker-wrap" outside-click="toggleCalendar($event, false)">\r\n    <div class="toggler" ng-click="toggleCalendar($event)">\r\n        <span class="glyphicon glyphicon-calendar"></span>\r\n    </div>\r\n\r\n    <input type="text" ng-class="\'lmx-\'+inputClass" datetime-picker="{{dateFormat}}" ng-model="model" ng-keyup="validateModel($event)" ng-model-options="modelOptions" datepicker-options="options" button-bar="{show:false}" is-open="isOpen" enable-time="false">\r\n</span>\r\n'),n.put("app/directives/dateTimePicker/datetimePickerView.html",'<span class="date-picker-wrap" outside-click="toggleCalendar($event, false)">\r\n    <div class="toggler glyphicon glyphicon-calendar" ng-click="toggleCalendar($event)"></div>\r\n\r\n    <input type="text" ng-if=":: timepickerOptions" ng-class="\'lmx-\'+inputClass" datetime-picker="{{dateFormat}}" ng-model="model" ng-keyup="checkModel($event)" ng-model-options="modelOptions" button-bar="buttonsOptions" initial-picker="date" re-open-default="date" datepicker-options="{showWeeks:false}" timepicker-options="timepickerOptions" is-open="isOpen">\r\n</span>\r\n'),n.put("app/directives/favoriteGoods/favoriteGood/favoriteGood.html",'<div class="lmx-favorite-goods-item">\r\n    <div class="lmx-favorite-goods-item__image">\r\n        <img ng-src="{{:: favoriteGoodsImagesUrl}}{{:: favoriteGood.good ? favoriteGood.good.codeGood : \'undefined\'}}.png" fallback-image="" fallback-title="Изображение отсутствует" alt="">\r\n    </div>\r\n    <p ng-if=":: !favoriteGood.good || favoriteGood.good.id === 0">\r\n        {{\'favoriteGoods.noFavoriteGood\' | translate}}\r\n    </p>\r\n    <p ng-if=":: favoriteGood.good && favoriteGood.good.id !== 0">{{:: favoriteGood.good.name}}</p>\r\n    <button class="lmx-btn lmx-change-favorite-good-btn" ng-click="changeGood(favoriteGood)" ng-if=":: favoriteGood.allowChange" type="button">\r\n        {{\'favoriteGoods.actions.edit\' | translate}}\r\n    </button>\r\n    <small>\r\n        <p class="lmx-favorite-goods-already-changed" ng-if=":: !favoriteGood.allowChange">\r\n            {{\'favoriteGoods.alreadyChanged\' | translate}}\r\n        </p>\r\n    </small>\r\n</div>\r\n'),n.put("app/directives/favoriteGoods/favoriteGoods.html",'<div class="lmx-container lmx-favorite-goods" ng-class="{\'lmx-empty\': !inProgress && !favoriteGoods}">\r\n    <section>\r\n        <h2>{{\'favoriteGoods.title\' | translate}}</h2>\r\n        <div loader="inProgress">\r\n            <div ng-if="!inProgress">\r\n                <div>\r\n                    <p>{{\'favoriteGoods.info.description\' | translate}}.</p>\r\n                    <p>\r\n                        {{\'favoriteGoods.info.limitation.part1\' | translate}}\r\n                        <a href="#offers">{{\'favoriteGoods.info.limitation.part2\' | translate}}</a>.\r\n                    </p>\r\n                </div>\r\n                <div class="lmx-favorite-goods-list">\r\n                    <p ng-if="!(favoriteGoods && favoriteGoods.goods && favoriteGoods.goods.length)">\r\n                        {{\'favoriteGoods.favoriteGoodsEmpty\' | translate}}\r\n                    </p>\r\n                    <favorite-good favorite-good="favoriteGoodsItem" change-good="changeGood" ng-repeat="favoriteGoodsItem in favoriteGoods.goods" loader="goodsInProgres_{{:: favoriteGoodsItem.position}}"></favorite-good>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/favoriteGoods/modal/goodsOrCategory/goodsOrCategory.html",'<ul class="lmx-goods-or-category-item">\r\n    <li ng-if=":: isCategory" class="lmx-category-item-li">\r\n        <div>\r\n            <div class="lmx-category-item">\r\n                <p class="material-icons">folder</p>\r\n                <p class="lmx-category-item-name" ng-click="changeVisibilityCategoryList()">\r\n                    {{:: goodsOrCategory.name}}\r\n                </p>\r\n            </div>\r\n            <div ng-if=":: !inProgress">\r\n                <goods-or-category ng-show="isShow" goods-group-id="goodsGroupId" goods-or-category="item" ng-repeat="item in nodeItems track by item.id"></goods-or-category>\r\n            </div>\r\n            <inline-loader>inProgress</inline-loader>\r\n        </div>\r\n    </li>\r\n    <li ng-if=":: !isCategory" class="lmx-good-item-li">\r\n        <p ng-click="selectNewFavoriteGood()" class="lmx-good-item">\r\n            {{:: goodsOrCategory.name}}\r\n        </p>\r\n    </li>\r\n</ul>\r\n'),n.put("app/directives/favoriteGoods/modal/modalSelectNewFavoriteGood.html",'<div class="modal-content-favorite-goods">\r\n    <div class="lmx-modal-closer" ng-click="cancel()"></div>\r\n    <div loader="inProgress" class="lmx-modal-favorite-goods-container">\r\n        <div ng-if="!inProgress" class="lmx-modal-favorite-goods-content">\r\n            <div class="modal-header">\r\n                <h2>{{\'favoriteGoods.modal.selectGood\' | translate}}</h2>\r\n            </div>\r\n            <div class="lmx-content lmx-select-new-favorite-good">\r\n                <div class="lmx-categories-list">\r\n                    <goods-or-category goods-group-id="goodsGroupId" goods-or-category="goodsOrCategory" ng-repeat="goodsOrCategory in categories track by goodsOrCategory.id"></goods-or-category>\r\n                </div>\r\n                <button class="lmx-btn lmx-close-modal-btn" ng-click="cancel()" type="button">\r\n                    {{\'favoriteGoods.modal.close\' | translate}}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/feedback/feedback.html",'<div class="lmx-container lmx-feedback">\r\n    <section>\r\n        <h2>{{\'feedback.title\' | translate}}</h2>\r\n        <lmx-notifications area="feedback"></lmx-notifications>\r\n\r\n        <div loader="inProgress && messages === undefined">\r\n            <div ng-show="!inProgress || messages !== undefined">\r\n                <div class="lmx-hint">\r\n                    <p>{{\'feedback.askQuestion\' | translate}}:</p>\r\n                </div>\r\n\r\n                <form novalidate="" name="feedbackForm" ng-submit="feedbackForm.$valid && send(feedbackForm)">\r\n                    <form-group>\r\n                        <textarea ng-disabled="sendInProgress" id="lmx-msgTextarea" name="msgTextarea" ng-model="messageModel.text" placeholder="{{\'feedback.typeText\' | translate}}" required="">\r\n                        </textarea>\r\n                    </form-group>\r\n\r\n                    <inline-loader line="">sendInProgress</inline-loader>\r\n\r\n                    <div class="lmx-file-input-and-submitter lmx-clearfix lmx-margin-bottom" ng-if="!sendInProgress">\r\n                        <file-input ng-model="messageModel.attachment" class="lmx-left"></file-input>\r\n                        <button type="submit" class="lmx-right lmx-row">\r\n                            {{\'buttons.send\' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n\r\n                <div class="lmx-message-history" loader="sendInProgress || inProgress">\r\n                    <lmx-scroller>\r\n                        <div class="lmx-chat-message-line lmx-clearfix" ng-repeat="item in messages track by item.message.id">\r\n                            <div ng-class="{\'lmx-outcoming\': item.isUserMessage}" class="lmx-chat-message">\r\n                                <div class="lmx-from">\r\n                                    {{\'feedback.\' + (item.isUserMessage ? \'you\' : \'operator\') |\r\n                                    translate}}\r\n                                </div>\r\n                                <div class="lmx-text">{{::item.message.message}}</div>\r\n                                <div class="lmx-file-name" ng-if="item.message.fileName">\r\n                                    {{\'feedback.file\' | translate}}: {{::item.message.fileName}}\r\n                                </div>\r\n                                <div class="date">\r\n                                    {{::item.message.dateTime | toUTC | shortDateTime}}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </lmx-scroller>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/fileInput/fileInput.html",'<div class="lmx-file-input">\r\n    <form-group>\r\n        <inline-loader>loader</inline-loader>\r\n        <input type="file" ng-model="attachment.fileInfo" id="lmx-file-input" ng-attr-name="{{inputName}}" base-sixty-four-input="" maxsize="5120" do-not-parse-if-oversize="" onloadstart="onFileLoadStart" onerror="onFileLoadError" onload="onFileLoadSuccess">\r\n        <label for="lmx-file-input" ng-switch="loadError.value" ng-hide="loader" ng-click="clearAttachment(); loadError.value = false;">\r\n            <a>{{\'buttons.attachFile\' | translate}}</a>\r\n            <span class="lmx-file-input-span"></span>\r\n            <span ng-switch-when="false" ng-if="attachment.fileInfo" class="lmx-attachment">\r\n                <span class="lmx-attachment-name" ng-attr-title="{{attachment.fileInfo.filename}}">{{attachment.fileInfo.filename}}</span>\r\n                <span ng-click="clearAttachment($event)" class="lmx-attachment-remove glyphicon glyphicon-remove"></span>\r\n            </span>\r\n            <span ng-switch-when="true" class="lmx-attachment-error">{{loadError.text || (\'file.error\' | translate)}}</span>\r\n        </label>\r\n    </form-group>\r\n</div>\r\n'),n.put("app/directives/formGroup/formGroupTemplate.html",'<div class="lmx-form-group lmx-clearfix lmx-row" ng-class="{\'lmx-has-error\': form.$submitted && model.$invalid}">\r\n    <div ng-if="labelText !== undefined" class="lmx-label-container">\r\n        <label class="lmx-form-group-label lmx-{{:: lmx-labelAlign+\'align\'}}" for="{{itemId}}">{{labelText}}</label>\r\n    </div>\r\n    <div class="lmx-input-container">\r\n        <div><ng-transclude></ng-transclude></div>\r\n        <div class="lmx-help-block" ng-if="form.$submitted">\r\n            <div class="lmx-help-block__error" ng-if="model.$error.validationErrors" ng-repeat="error in model.$error.validationErrors">\r\n                <div>{{error}}</div>\r\n            </div>\r\n            <div class="lmx-help-block__error" ng-if="!model.$error.validationErrors" ng-repeat="(error, value) in model.$error">\r\n                <div>{{errorMessage(error, model.$viewValue)}}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/history/history.html",'<div class="lmx-container lmx-history">\r\n    <section>\r\n        <h2 ng-if=":: !isPreview">{{\'history.title\' | translate}}</h2>\r\n        <div loader="history === undefined">\r\n            <div ng-show=":: history">\r\n                <div ng-show=":: !isPreview" class="lmx-history-filters lmx-clearfix lmx-margin-bottom">\r\n                    <div class="date-filters">\r\n                        <div class="date-filter lmx-since-date-filter">\r\n                            <span class="lmx-pretext">{{\'history.fromDate\' | translate}}</span>\r\n                            <date-picker ng-model="fromDate" ng-change="reloadHistory()">\r\n                            </date-picker>\r\n                        </div>\r\n                        <div class="date-filter lmx-to-date-filter">\r\n                            <span class="lmx-pretext">{{\'history.toDate\' | translate}}</span>\r\n                            <date-picker ng-model="toDate" ng-change="reloadHistory()">\r\n                            </date-picker>\r\n                        </div>\r\n                    </div>\r\n                    <div class="lmx-card-filter">\r\n                        <inline-loader>cardsInProgress</inline-loader>\r\n                        <div ng-hide="cardsInProgress">\r\n                            <select ng-model="selectedCard" ng-change="reloadHistory()" id="lmx-cardFilter" name="cardFilter">\r\n                                <option ng-value="0">{{\'history.allCards\' | translate}}</option>\r\n                                <option ng-repeat="card in cards" ng-value="card.id">{{:: card.number | charsDivide: 4}}</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class="lmx-reset-filters">\r\n                        <a ng-click="resetFilters()" class="lmx-pseudolink" href="">{{\'history.resetFilters\' | translate}}</a>\r\n                    </div>\r\n                </div>\r\n                <div class="lmx-history-table" ng-show="history.allCount || inProgress">\r\n                    <div class="lmx-operations-list lmx-margin-bottom" loader="inProgress && (isPaginated || isReload)">\r\n                        <div ng-class="{\'lmx-loading\': inProgress}" ng-hide="inProgress && isReload">\r\n                            <table ng-if="history.rows.length">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>{{\'history.date\' | translate}}</th>\r\n                                        <th>{{\'history.cardNumber\' | translate}}</th>\r\n                                        <th>{{\'history.description\' | translate}}</th>\r\n                                        <th>{{\'history.operation\' | translate}}</th>\r\n                                        <th>{{\'history.amount\' | translate}}</th>\r\n                                        <th></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody ng-repeat="item in history.rows track by item.id" class-toggle-click="cheque-opened" ng-class="::{\'lmx-empty-cheque\': !item.data.chequeItems.length}">\r\n                                    <tr class="lmx-operation-info">\r\n                                        <td class="date-time" ng-attr-title="{{:: item.dateTime | toUTC | shortDateTime}}">\r\n                                            {{:: item.dateTime | toUTC | shortDateTime}}\r\n                                        </td>\r\n                                        <td class="lmx-identity" ng-attr-title="{{:: item.identity ? (\'**** \' + (item.identity | lastCount: 4)) : undefined}}">\r\n                                            <span ng-if="::item.identity">****\r\n                                                <b>{{:: item.identity | lastCount: 4 }}</b></span>\r\n                                        </td>\r\n                                        <td class="lmx-description" ng-attr-title="{{:: item.description}}">\r\n                                            <img ng-if=":: item.logoSquareUrl" ng-src="{{:: item.logoSquareUrl}}" class="lmx-logo-square" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="">\r\n                                            <span class="lmx-description-text">{{:: item.description}}</span>\r\n                                        </td>\r\n                                        <td class="lmx-withdraws lmx-text">\r\n                                            <div ng-if=":: item.data.withdraws.length" ng-repeat="wdrw in item.data.withdraws" ng-attr-title="{{\'history.gift\' + (item.data.isRefund ? \'Refund\' : \'\' ) + \'.withdraw\' | translate}}" class="lmx-text-overflow-ellipsis">\r\n                                                {{\'history.gift\' + (item.data.isRefund ? \'Refund\' :\r\n                                                \'\' ) + \'.withdraw\' | translate}}\r\n                                            </div>\r\n                                            <div ng-if=":: item.data.rewards.length" ng-repeat="(type, values) in item.rewardsResult">\r\n                                                <div ng-repeat="(currency, value) in values" ng-attr-title="{{\'history.gift\' + (item.data.isRefund ? \'Refund.\' : \'.\') + (type | lowerCamelCase) | translate}}" class="lmx-text-overflow-ellipsis">\r\n                                                    {{\'history.gift\' + (item.data.isRefund ?\r\n                                                    \'Refund.\' : \'.\') + (type | lowerCamelCase) |\r\n                                                    translate}}\r\n                                                </div>\r\n                                            </div>\r\n                                            <div ng-if=":: item.type == \'RewardData\' || item.type == \'WithdrawData\'" ng-attr-title="{{\'history.gift\' + (item.data.isRefund ? \'Refund.\' : \'.\') + (item.type | lowerCamelCase) | translate}}" class="lmx-text-overflow-ellipsis">\r\n                                                {{\'history.gift\' + (item.data.isRefund ? \'Refund.\' :\r\n                                                \'.\') + (item.type | lowerCamelCase) | translate}}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td class="lmx-withdraws lmx-amount">\r\n                                            <div ng-if=":: item.data.withdraws.length" ng-repeat="wdrw in item.data.withdraws" ng-attr-title="{{:: (item.data.isRefund ? wdrw.amount.amount * -1 : wdrw.amount.amount) | number: 2}} {{:: wdrw.amount.currency }}" class="lmx-text-overflow-ellipsis">\r\n                                                {{:: (item.data.isRefund ? wdrw.amount.amount * -1 :\r\n                                                wdrw.amount.amount) | number: 2}} {{::\r\n                                                wdrw.amount.currency }}\r\n                                            </div>\r\n                                            <div ng-if=":: item.data.rewards.length" ng-repeat="(type, values) in item.rewardsResult">\r\n                                                <div ng-repeat="(currency, value) in values" ng-attr-title="{{:: (item.data.isRefund ? value * -1 : value) | number: 2}} {{:: currency }}" class="lmx-text-overflow-ellipsis">\r\n                                                    {{:: (item.data.isRefund ? value * -1 : value) |\r\n                                                    number: 2}} {{:: currency }}\r\n                                                </div>\r\n                                            </div>\r\n                                            <div ng-if=":: item.type == \'RewardData\' || item.type == \'WithdrawData\'" ng-attr-title="{{:: (item.data.isRefund ? item.data.amount.amount * -1 : item.data.amount.amount) | number: 2}} {{:: item.data.amount.currency }}" class="lmx-text-overflow-ellipsis">\r\n                                                {{:: (item.data.isRefund ? item.data.amount.amount *\r\n                                                -1 : item.data.amount.amount) | number: 2}} {{::\r\n                                                item.data.amount.currency }}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td class="lmx-cheque-expander"></td>\r\n                                    </tr>\r\n                                    <tr class="lmx-cheque-info" ng-if="item.data.chequeItems.length">\r\n                                        <td colspan="6">\r\n                                            <div class="lmx-cheque-content">\r\n                                                <div class="lmx-cheque-line" ng-repeat="chequeItem in item.data.chequeItems">\r\n                                                    <span class="lmx-cheque-item">{{::chequeItem.description |\r\n                                                        nbspSpaces}}</span>\r\n                                                    <span class="lmx-cheque-count">{{::chequeItem.count}}\r\n                                                        <span ng-if=":: chequeItem.unit" class="lmx-cheque-unit">{{:: chequeItem.unit}}</span></span>\r\n                                                </div>\r\n                                                <div class="lmx-cheque-total">\r\n                                                    {{::item.data.amount.amount | number: 2}} {{::\r\n                                                    item.data.amount.currency }}\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                    <div ng-show=":: !isPreview" ng-switch=":: !!isPaginated">\r\n                        <uib-pagination ng-switch-when="true" ng-show="!isReload && history.allCount > onPage" total-items="history.allCount" ng-model="$parent.currentPage" max-size="4" items-per-page="{{:: onPage}}" class="lmx-pagination" boundary-links="true" boundary-link-numbers="true" direction-links="false" force-ellipses="true" first-text="<<" last-text=">>" ng-change="paginationChange()"></uib-pagination>\r\n                        <div ng-switch-when="false">\r\n                            <a class="lmx-pseudolink lmx-right" ng-if="!inProgress && (from + onPage < history.allCount)" ng-click="increaseFrom()" href="">{{\'history.showMore\' | translate}}</a>\r\n                            <inline-loader line="">inProgress && !isReload</inline-loader>\r\n                        </div>\r\n                    </div>\r\n                    <a ng-if=":: isPreview" href="{{:: historyUrl}}" class="lmx-pseudolink">{{\'history.goToFullHistory\' | translate}}</a>\r\n                </div>\r\n                <div class="lmx-history-not-found" ng-if="!history.allCount && !inProgress">\r\n                    {{\'history.notFound\' | translate}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/identifiers/identifiers.html",'<div>\r\n    <div class="lmx-identifier-types lmx-row" ng-if=":: identifiers.length > 1">\r\n        <div class="lmx-identifier-type-radio" ng-repeat="identifier in identifiers track by $index">\r\n            <input type="radio" ng-model="model.currentIdentifier" value="{{identifier}}" id="lmx-{{identifier}}" ng-disabled="authInProgress" name="{{identifier}}">\r\n            <label for="lmx-{{identifier}}">{{\'identifiers.\' + identifier | translate}}</label>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/limiters/repeatLimitDirective.html",'<ul ng-if="::items.length > 0" class="lmx-repeat-limit">\r\n    <li ng-repeat="item in items | limitTo: limit track by $index" class="lmx-repeat-limit-item">\r\n        <span ng-if="!textLimit">{{::item}}</span>\r\n        <text-limit ng-if="textLimit" limit="{{textLimit}}" text="item"></text-limit>\r\n        <span ng-if="::delimiter " class="lmx-repeat-limit-item-delimiter" ng-class="{\'lmx-hide\': $index === items.length - 1}">{{::delimiter}}&nbsp;</span>\r\n    </li>\r\n    <li class="lmx-toggle-limit-btn" ng-click="toggleLimit()" ng-if="items.length > limit">\r\n        {{ limit ? \'showAll\' : \'hide\' | translate | lowercase }}\r\n        <span ng-if="limit"> ({{:: items.length}})</span>\r\n    </li>\r\n</ul>\r\n<span ng-if="::items.length === 0 && defaultMessage">{{:: defaultMessage}}</span>\r\n'),n.put("app/directives/limiters/textLimitDirective.html",'<span>\r\n    {{:: framing}}{{ text | limitTo: limit }}\r\n    <span ng-if="::framing && text.length < limit">{{:: framing}}</span>\r\n    <span ng-if="::framing && text.length > limit">{{limit ? \'\' : framing}}</span>\r\n</span>\r\n<span ng-click="toggleLimit()" ng-if="text.length > limit" class="lmx-toggle-limit-btn">\r\n    <span ng-if="limit">\r\n        ...\r\n        <span ng-if="::framing">{{limit ? framing : \'\'}}</span>\r\n    </span>\r\n    {{ limit ? \'show\' : \'hide\' | translate | lowercase}}\r\n</span>\r\n'),n.put("app/directives/lmxApp/lmxApp.html",'<div class="loymax-container">\r\n    <div class="lmx-body-loader" ng-hide="allRequestsCompleted"></div>\r\n    <div class="lmx-main-block lmx-embedded-user-info lmx-clearfix">\r\n        <lmx-user-info></lmx-user-info>\r\n    </div>\r\n    <nav class="lmx-main-block lmx-embedded-menu lmx-base-menu" ng-if="allRequestsCompleted">\r\n        <ul class="lmx-side-nav">\r\n            <li class="lmx-hide-when-authed">\r\n                <a href="#login"><i class="material-icons">input</i>{{\'menu.authentication\' | translate}}</a>\r\n            </li>\r\n            <li class="lmx-hide-when-authed">\r\n                <a href="#registration"><i class="material-icons">person_add</i>{{\'menu.registration\' | translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#contacts"><i class="material-icons">settings</i>{{\'menu.settings\' | translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#balance"><i class="material-icons">account_balance_wallet</i>{{\'menu.balance\' |\r\n                    translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#cards"><i class="material-icons">card_membership</i>{{\'menu.cards\' | translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#history"><i class="material-icons">card_membership</i>{{\'menu.history\' | translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#personal"><i class="material-icons">question_answer</i>{{\'menu.personalData\' |\r\n                    translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#personal-offers" style="{{noPersonalOffers ? \'color:gray\' : \'\'}}"><i class="material-icons">shopping_cart</i>{{\'menu.personalOffers\' |\r\n                    translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#personal-goods" style="{{noPersonalGoods ? \'color:gray\' : \'\'}}"><i class="material-icons">add_shopping_cart</i>{{\'menu.personalGoods\' |\r\n                    translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#favorite-goods"><i class="material-icons">shopping_cart</i>{{\'menu.favoriteGoods\' |\r\n                    translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#accounts"><i class="material-icons">people</i>{{\'menu.socials\' | translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#message"><i class="material-icons" style="{{hasMessages ? \'color:red\' : \'\'}}">notifications</i>{{\'menu.messages\' | translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#feedback"><i class="material-icons">feedback</i>{{\'menu.feedback\' | translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#user-status"><i class="material-icons">shopping_cart</i>{{\'menu.status\' | translate}}</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#user-info"><i class="material-icons">shopping_cart</i>{{\'menu.userInfo\' | translate}}</a>\r\n            </li>\r\n            <li>\r\n                <a href="#anonymous-feedback"><i class="material-icons">feedback</i>{{\'menu.anonymousFeedback\' |\r\n                    translate}}</a>\r\n            </li>\r\n            <li>\r\n                <a href="#offers"><i class="material-icons">local_offer</i>{{\'menu.offers\' | translate}}</a>\r\n            </li>\r\n            <li>\r\n                <a href="#brands"><i class="material-icons">thumb_up</i>{{\'menu.brands\' | translate}}</a>\r\n            </li>\r\n            <li>\r\n                <a href="#announcement"><i class="material-icons">loyalty</i>{{\'menu.announcement\' | translate}}</a>\r\n            </li>\r\n            <li>\r\n                <a href="#merchants"><i class="material-icons">store</i>{{\'menu.merchants\' | translate}}</a>\r\n            </li>\r\n            <li>\r\n                <a href="#options"><i class="material-icons">settings</i>Опции сайта</a>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n    <div class="lmx-main-block lmx-section" ng-cloak="" ng-if="allRequestsCompleted">\r\n        <div ng-switch="appLocationParts[0]">\r\n            <lmx-authentication ng-switch-when="login"></lmx-authentication>\r\n            <lmx-reset-password ng-switch-when="reset-password"></lmx-reset-password>\r\n            <lmx-registration ng-switch-when="registration"></lmx-registration>\r\n            <lmx-offers ng-switch-when="offers"></lmx-offers>\r\n            <lmx-feedback ng-switch-when="feedback"></lmx-feedback>\r\n            <lmx-anonymous-feedback ng-switch-when="anonymous-feedback"></lmx-anonymous-feedback>\r\n            <lmx-message ng-switch-when="message"></lmx-message>\r\n            <lmx-user-status ng-switch-when="user-status"></lmx-user-status>\r\n            <lmx-cards ng-switch-when="cards" card-number-graphical-code="bar,qr"></lmx-cards>\r\n            <lmx-favorite-goods ng-switch-when="favorite-goods"></lmx-favorite-goods>\r\n            <lmx-balance ng-switch-when="balance"></lmx-balance>\r\n            <lmx-history ng-switch-when="history"></lmx-history>\r\n            <lmx-merchant filter-by-region="" ng-switch-when="merchants"></lmx-merchant>\r\n            <lmx-user-info ng-switch-when="user-info"></lmx-user-info>\r\n            <lmx-announcement ng-switch-when="announcement" space="offerSpace"></lmx-announcement>\r\n\r\n            <div class="lmx-settings" ng-if="[\'personal\', \'contacts\', \'accounts\'].contains(currentLocation)">\r\n                <nav class="lmx-menu grid lmx-clearfix lmx-margin-bottom">\r\n                    <a class="lmx-col4" ng-class="{\'active\': currentLocation == \'personal\'}" ng-click="changeLocation(\'personal\')" href="">{{\'menu.personalData\' | translate}}</a>\r\n                    <a class="lmx-col4" ng-class="{\'active\': currentLocation == \'contacts\'}" ng-click="changeLocation(\'contacts\')" href="">{{\'contacts.title\' | translate}}</a>\r\n                    <a class="lmx-col4" ng-class="{\'active\': currentLocation == \'accounts\'}" ng-click="changeLocation(\'accounts\')" href="">{{\'settings.accountsTitle\' | translate}}</a>\r\n                </nav>\r\n            </div>\r\n\r\n            <div ng-switch-when="contacts">\r\n                <div class="lmx-container lmx-contacts">\r\n                    <lmx-user-phone></lmx-user-phone>\r\n                    <lmx-user-email></lmx-user-email>\r\n                    <lmx-subscriptions subscription-types="Advertisement" notification-types="smsNotification,emailNotification"></lmx-subscriptions>\r\n                    <lmx-unregistration></lmx-unregistration>\r\n                </div>\r\n            </div>\r\n            <div ng-switch-when="accounts">\r\n                <div class="lmx-container lmx-accounts">\r\n                    <lmx-user-password></lmx-user-password>\r\n                    <lmx-social is-binding=""></lmx-social>\r\n                </div>\r\n            </div>\r\n            <div ng-switch-when="personal">\r\n                <div class="lmx-container lmx-personal">\r\n                    <h2>{{\'questionnaire.title\' | translate}}</h2>\r\n                    <lmx-questionnaire registration="false"></lmx-questionnaire>\r\n                </div>\r\n            </div>\r\n            <lmx-options ng-switch-when="options"></lmx-options>\r\n\r\n            <lmx-brands ng-switch-when="brands"></lmx-brands>\r\n            <lmx-personal-offers ng-switch-when="personal-offers"></lmx-personal-offers>\r\n            <lmx-personal-goods ng-switch-when="personal-goods"></lmx-personal-goods>\r\n\r\n            <div ng-switch-when="logout" ng-init="logout()"></div>\r\n\r\n            <div ng-switch-default="" ng-init="goToDefaultPage()"></div>\r\n        </div>\r\n    </div>\r\n    <lmx-notifications></lmx-notifications>\r\n    <re-captcha></re-captcha>\r\n</div>\r\n'),
n.put("app/directives/lmxAppMenu/lmxAppMenu.html",'<div class="lmx-loymax-menu-container">\r\n    <nav ng-if="allRequestsCompleted" class="lmx-base-menu">\r\n        <ul class="lmx-side-nav">\r\n            <li class="lmx-hide-when-authed">\r\n                <a href="#login"><i class="material-icons">input</i>Вход</a>\r\n            </li>\r\n            <li class="lmx-hide-when-authed">\r\n                <a href="#registration"><i class="material-icons">person_add</i>Регистрация</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#personal"><i class="material-icons">settings</i>Настройки</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#balance"><i class="material-icons">account_balance_wallet</i>Детальный баланс</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#cards"><i class="material-icons">card_membership</i>Карты</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#history"><i class="material-icons">card_membership</i>История операций</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#history-load-more-button"><i class="material-icons">card_membership</i>История операций (подгрузка)</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#personal"><i class="material-icons">question_answer</i>Анкета</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#personal-offers" style="{{noPersonalOffers ? \'color:gray\' : \'\'}}"><i class="material-icons">shopping_cart</i>Персональные предложения</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#personal-goods" style="{{noPersonalGoods ? \'color:gray\' : \'\'}}"><i class="material-icons">add_shopping_cart</i>Персональные товары</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#favorite-goods"><i class="material-icons">shopping_cart</i>Любимые вкусы</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#social-binding"><i class="material-icons">people</i>Привязка соц-сетей</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#message"><i class="material-icons" style="{{hasMessages ? \'color:red\' : \'\'}}">notifications</i>Уведомления</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#feedback"><i class="material-icons">feedback</i>Обратная связь</a>\r\n            </li>\r\n            <li ng-if="userStatus" class="lmx-show-when-authed">\r\n                <a href="#user-status"><i class="material-icons">shopping_cart</i>Статус пользователя</a>\r\n            </li>\r\n            <li class="lmx-show-when-authed">\r\n                <a href="#user-info"><i class="material-icons">shopping_cart</i>User Info</a>\r\n            </li>\r\n            <li>\r\n                <a href="#anonymous-feedback"><i class="material-icons">feedback</i>Бесплатная обратная связь</a>\r\n            </li>\r\n            <li>\r\n                <a href="#offers"><i class="material-icons">local_offer</i>Рекламные материалы</a>\r\n            </li>\r\n            <li>\r\n                <a href="#showcase"><i class="material-icons">shopping_basket</i>Витрина</a>\r\n            </li>\r\n            <li>\r\n                <a href="#brands"><i class="material-icons">thumb_up</i>Бренды</a>\r\n            </li>\r\n            <li>\r\n                <a href="#announcement"><i class="material-icons">loyalty</i>Реклама</a>\r\n            </li>\r\n            <li>\r\n                <a href="#merchants"><i class="material-icons">store</i>Магазины</a>\r\n            </li>\r\n            <li>\r\n                <a href="#merchants-filter-by-region"><i class="material-icons">store</i>Магазины по регионам</a>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n</div>\r\n'),n.put("app/directives/lmxScroller/lmxScroller.html",'<div class="scroller-wrapper">\r\n    <div class="scroller">\r\n        <div ng-transclude=""></div>\r\n    </div>\r\n    <div class="scroller-track">\r\n        <div class="scroller-bar"></div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/lmxTabs/lmxTabs.html",'<ul class="lmx-tabs-container">\r\n    <!-- TODO ng-class \'active\' не срабатывает на внешние события (изменения URL, например) !-->\r\n    <!-- После исправления - обновить page.html в плагине (меню в разделе "Настройки" -> на эти табы) !-->\r\n    <li ng-repeat="item in list track by $index" ng-click="selectItem(item)" ng-class="{\'active\': selectedItem === item}">\r\n        {{viewField ? item[viewField] : item}}\r\n    </li>\r\n</ul>\r\n'),n.put("app/directives/localeSwitcher/localeSwitcher.html",'<div class="lmx-locale-switcher">\r\n    <div ng-repeat="locale in ::availableLanguages track by $index" ng-class="{\'active\': isCurrentLocale(locale)}" ng-click="!isCurrentLocale(locale) && switchLocale(locale)">\r\n        <span ng-class="::\'lmx-\'+locale + \'-locale\'">{{:: locale}}</span>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/merchant/merchant.html",'<div class="lmx-container lmx-merchants">\r\n    <section>\r\n        <h2>{{\'merchants.title\' | translate}}</h2>\r\n\r\n        <div loader="loaders.inProgress">\r\n            <div ng-if="!loaders.inProgress" ng-switch="!!merchants.length" class="lmx-merchants-by-regions__wrapper">\r\n                <div ng-if=":: filterByRegion" class="lmx-row lmx-merchants-by-regions__filterByRegion">\r\n                    <div class="lmx-merchant-filter" ng-if=":: regions.length">\r\n                        <div lmx-custom-select="" ng-model="region.id" repeat="regions" placeholder="{{\'merchants.chooseRegion\' | translate}}" options="r.id as r.name for r in regions"></div>\r\n                        <div lmx-custom-select="" ng-model="city.id" repeat="cities" placeholder="{{\'merchants.chooseCity\' | translate}}" options="c.id as c.name for c in cities" loader="loaders.cities"></div>\r\n                    </div>\r\n                    <div ng-if="!regions.length">{{\'merchants.noRegionInfo\' | translate}}</div>\r\n                </div>\r\n\r\n                <div ng-switch-when="true" class="lmx-merchants-map-row" ng-class="{\'lmx-list-tab-selected\': selectedTab.value === tabs.asList}" loader="loaders.brands || loaders.ymaps || loaders.merchantsList">\r\n                    <lmx-tabs ng-hide="loaders.merchantsList" list="tabs" ng-model="selectedTab.value" view-field="name">\r\n                    </lmx-tabs>\r\n\r\n                    <div class="lmx-merchant-list">\r\n                        <lmx-scroller ng-hide="loaders.merchantsList">\r\n                            <ul>\r\n                                <li ng-repeat="merchant in merchants | limitTo: merchantsLimit track by merchant.id" ng-init="isUnclickable = !merchant.location" ng-class="::{\'lmx-unclickable\': isUnclickable}" ng-click="!isUnclickable && showMerchantOnMap($index)">\r\n                                    <p>\r\n                                        {{:: merchant.title}}{{:: merchant.location ? (\', \' +\r\n                                        merchant.location.description) : \'\'}}\r\n                                    </p>\r\n                                </li>\r\n                            </ul>\r\n\r\n                            <a class="lmx-pseudolink" ng-if="merchants.length > merchantsLimit" ng-click="changeListExpansionState(true)" href="">\r\n                                <span ng-if="merchantsCountText">{{\'merchants.showAll\' | translate}}\r\n                                    <span ng-bind-html="merchantsCountText"></span></span>\r\n                            </a>\r\n                            <a class="lmx-pseudolink" ng-if="merchantsLimit === merchants.length" ng-click="changeListExpansionState()" href="">\r\n                                {{\'merchants.hide\' | translate}}\r\n                            </a>\r\n                        </lmx-scroller>\r\n                    </div>\r\n\r\n                    <lmx-map class="lmx-map" data="merchants" ng-if="merchants.length && !loaders.brands"></lmx-map>\r\n\r\n                    <script type="text/javascript">\r\n                        document.addEventListener("lmxMapReady", function() {\r\n                            var map = window.lmxMap;\r\n                            map.balloon.events.add("open", function() {\r\n                                $(".ymaps-2-1-74-panel-pane").addClass("panel-opened");\r\n                                $(".ymaps-2-1-74-panel-pane").removeClass("panel-closed");\r\n                                $(".ymaps-2-1-74-copyrights-pane").addClass("copyrights-hidden");\r\n                            });\r\n                            map.balloon.events.add("close", function() {\r\n                                $(".ymaps-2-1-74-panel-pane").addClass("panel-closed");\r\n                                $(".ymaps-2-1-74-panel-pane").removeClass("panel-opened");\r\n                                $(".ymaps-2-1-74-copyrights-pane").removeClass("copyrights-hidden");\r\n                            });\r\n                        });\r\n                    </script>\r\n                    <style>\r\n                        @media (max-width: 450px) {\r\n                            .ymaps-2-1-74-panel-pane.panel-opened,\r\n                            .ymaps-2-1-74-panel-pane.panel-opened\r\n                                .ymaps-2-1-74-balloon-panel\r\n                                .ymaps-2-1-74-balloon {\r\n                                top: 10px;\r\n                                left: 10px;\r\n                                right: 10px;\r\n                                bottom: 10px;\r\n                            }\r\n                            .ymaps-2-1-74-panel-pane.panel-opened\r\n                                .ymaps-2-1-74-balloon-panel\r\n                                .ymaps-2-1-74-balloon__content\r\n                                ymaps {\r\n                                overflow-y: visible !important;\r\n                                height: 100% !important;\r\n                            }\r\n                            .ymaps-2-1-74-copyrights-pane.copyrights-hidden {\r\n                                z-index: -1 !important;\r\n                            }\r\n                        }\r\n                    </style>\r\n                </div>\r\n                <div ng-if="!merchants.length && !loaders.merchantsList">\r\n                    {{\'merchants.\' + (filterByRegion ? \'filteredNotFound\' : \'notFound\') |\r\n                    translate}}\r\n                </div>\r\n\r\n                <div class="lmx-offers lmx-row" ng-if="offers.length" loader="loaders.offers">\r\n                    <h3>\r\n                        {{\'merchants.offers\' | translate}} &laquo;{{titleOfMerchantOffers}}&raquo;\r\n                    </h3>\r\n                    <offers-list offers="offers"></offers-list>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/message/message.html",'<div class="lmx-container lmx-message">\r\n    <section>\r\n        <h2>{{\'messages.title\' | translate}}</h2>\r\n\r\n        <div ng-if="messages.length || state.isProgress" loader="isProgress" class="lmx-messages-container">\r\n            <article ng-repeat="message in messages">\r\n                <div class="date">{{:: message.creationDate | shortDate }}</div>\r\n\r\n                <div class="lmx-remove" ng-click="remove(message);">\r\n                    {{\'buttons.delete\' | translate | lowercase}}\r\n                </div>\r\n\r\n                <h4 class="lmx-title" ng-class="{\'lmx-notRead\': !message.isReaded}">\r\n                    <span ng-click="toggleView(message);">{{:: message.title }}</span>\r\n                </h4>\r\n\r\n                <div class="lmx-text" ng-if="message._isShowText">\r\n                    <p>{{:: message.body }}</p>\r\n                </div>\r\n            </article>\r\n        </div>\r\n\r\n        <p ng-if="!messages.length && !isProgress">{{\'messages.notFound\' | translate}}</p>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/myCoupons/modal/couponViewModal.html",'<div class="lmx-view-coupon-modal" loader="inProgress">\r\n    <div class="modal-header">\r\n        <div class="lmx-modal-closer" ng-click="cancel()"></div>\r\n        <h2>{{:: coupon.text}}</h2>\r\n    </div>\r\n\r\n    <div class="lmx-hint">\r\n        <p class="lmx-modal-description">{{\'coupons.coupon\' | translate}} №{{:: coupon.number}}</p>\r\n    </div>\r\n\r\n    <div class="lmx-content">\r\n        <div class="lmx-coupon-content" ng-switch="coupon.content.contentType.toLowerCase()">\r\n            <!--QRCODE-->\r\n            <div ng-switch-when="qrcode">\r\n                <qrcode data="{{:: coupon.content.data}}" href="{{:: coupon.content.data}}" size="200"></qrcode>\r\n            </div>\r\n            <!--BARCODE-->\r\n            <div ng-switch-when="barcode">\r\n                <barcode string="{{:: coupon.content.data}}" render="img" type="code128b" options="barcodeOptions"></barcode>\r\n            </div>\r\n            <!--URL-->\r\n            <div ng-switch-when="uri">\r\n                <a ng-href="{{:: coupon.content.data}}" target="_blank">{{\'coupons.viewOnSite\' | translate}}</a>\r\n            </div>\r\n        </div>\r\n        <div class="modal-footer">\r\n            <button ng-if="isRefundable" type="button" ng-click="refundCoupon(coupon.couponId)">\r\n                {{\'coupons.refund\' | translate}}\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/myCoupons/myCoupons.html",'<div class="lmx-container lmx-my-coupons">\r\n    <section>\r\n        <h2>{{\'coupons.title\' | translate}}</h2>\r\n        <div loader="inProgress">\r\n            <div ng-if="!inProgress">\r\n                <div class="lmx-coupon lmx-card" ng-repeat="coupon in coupons track by coupon.couponId" ng-click="openCouponViewModal(coupon)">\r\n                    <div class="lmx-card-image">\r\n                        <img ng-src="{{::coupon.imageUri || \'undefined\'}}" fallback-image="" fallback-title="{{\'coupons.imageNotFound\' | translate}}" alt="" style="height: 250px; padding: 10px">\r\n                    </div>\r\n                    <div class="lmx-card-content">\r\n                        <div class="lmx-coupon-details">\r\n                            <div class="lmx-coupon-number">\r\n                                {{:: coupon.number}}\r\n                            </div>\r\n                            <div class="lmx-coupon-content" ng-switch="coupon.content.contentType.toLowerCase()">\r\n                                <!--QRCODE-->\r\n                                <div ng-switch-when="qrcode">\r\n                                    <qrcode data="{{:: coupon.content.data}}" href="{{:: coupon.content.data}}" size="200"></qrcode>\r\n                                </div>\r\n                                <!--BARCODE-->\r\n                                <div ng-switch-when="barcode">\r\n                                    <barcode string="{{:: coupon.content.data}}" render="img" type="code128b" options="barcodeOptions"></barcode>\r\n                                </div>\r\n                                <!--URL-->\r\n                                <div ng-switch-when="uri">\r\n                                    <a ng-href="{{:: coupon.content.data}}" target="_blank">{{\'coupons.viewOnSite\' | translate}}</a>\r\n                                </div>\r\n                            </div>\r\n                            <div class="lmx-coupon-dates">\r\n                                {{\'coupons.date\' | translate}}: {{:: coupon.recievedDate |\r\n                                shortDateTime}}\r\n                            </div>\r\n                            <div ng-if="coupon.expireDate" class="lmx-rating-container">\r\n                                {{\'coupons.expirationDate\' | translate}}: {{:: coupon.expireDate |\r\n                                shortDateTime}}\r\n                            </div>\r\n                        </div>\r\n                        <div class="lmx-coupon-actions">\r\n                            <span class="lmx-card-title">{{:: coupon.text}}</span>\r\n                            <a ng-if="isRefundable(coupon)" ng-click="refundCoupon(coupon.couponId)" href="">{{\'coupons.refund\' | translate}}</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/notifications/notificationsView.html",'<div class="lmx-notifications">\r\n    <div ng-repeat="(text, type) in notifications.value">\r\n        <div class="lmx-alert" ng-class="::{\'lmx-alert-info\': type == notificationTypes.message,\'lmx-alert-warning\': type == notificationTypes.error,\'lmx-alert-danger\': type == notificationTypes.critical}">\r\n            <span class="lmx-close-btn" ng-click="clearNotifications(area)" ng-if="!notificationsAreEmpty()">&times;</span>\r\n            <span ng-bind-html=":: text"></span>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/offers/modal/offerModal.html",'<div>\r\n    <div class="lmx-modal-closer" ng-click="cancel()"></div>\r\n    <div loader="inProgress">\r\n        <div ng-if="!inProgress">\r\n            <div class="modal-header">\r\n                <h2>{{:: offer.title}}</h2>\r\n            </div>\r\n\r\n            <div class="modal-body">\r\n                <div class="lmx-image">\r\n                    <img ng-src="{{::offer.imgUrl}}" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="">\r\n\r\n                    <div class="lmx-reward-thumbnail" ng-if=":: offer.rewardThumbnail" ng-switch="rewardThumbnailTypes[offer.rewardThumbnail.$type]">\r\n                        <div class="lmx-thumbnail lmx-two-line-text" ng-switch-when="twoLineText">\r\n                            <div title="{{::offer.rewardThumbnail.firstLine}}" class="lmx-first-line">\r\n                                {{::offer.rewardThumbnail.firstLine}}\r\n                            </div>\r\n                            <div title="{{::offer.rewardThumbnail.secondLine}}" class="lmx-second-line">\r\n                                {{::offer.rewardThumbnail.secondLine}}\r\n                            </div>\r\n                        </div>\r\n                        <div class="lmx-thumbnail lmx-image-with-text" ng-switch-when="imageWithText">\r\n                            <div title="{{::offer.rewardThumbnail.header}}">\r\n                                {{::offer.rewardThumbnail.header}}\r\n                            </div>\r\n                            <div class="lmx-reward-image">\r\n                                <img ng-src="{{::offer.rewardThumbnail.imgUrl || \'undefined\'}}" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="">\r\n                            </div>\r\n                            <div title="{{::offer.rewardThumbnail.footer}}">\r\n                                {{::offer.rewardThumbnail.footer}}\r\n                            </div>\r\n                        </div>\r\n                        <div class="lmx-thumbnail lmx-old-new-price" ng-switch-when="oldNewPrice">\r\n                            <div title="{{::offer.rewardThumbnail.oldPrice}}" class="lmx-old-price">\r\n                                {{::offer.rewardThumbnail.oldPrice}}\r\n                            </div>\r\n                            <div title="{{::offer.rewardThumbnail.newPrice}}" class="lmx-new-price">\r\n                                {{::offer.rewardThumbnail.newPrice}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="lmx-details">\r\n                    <div>\r\n                        <div class="lmx-offer-title">{{\'offers.date\' | translate}}:</div>\r\n                        <div>{{:: (offer.begin | toUTC) | dateRange: (offer.end | toUTC)}}</div>\r\n                    </div>\r\n\r\n                    <section ng-if=":: offer.description">\r\n                        <div class="lmx-offer-title">{{\'offers.description\' | translate}}:</div>\r\n                        <div ng-bind-html="offer.description | markdown"></div>\r\n                    </section>\r\n\r\n                    <section ng-if=":: offer.instructions.length">\r\n                        <div class="lmx-offer-title">{{\'offers.instructions\' | translate}}:</div>\r\n                        <ol>\r\n                            <li ng-repeat="item in offer.instructions track by $index">\r\n                                {{::item }}\r\n                            </li>\r\n                        </ol>\r\n                    </section>\r\n\r\n                    <section ng-if=":: offer.merchants.length" ng-init="merchantsLimit = (offer.merchants.length === 4 ? 4 : 3)">\r\n                        <div class="lmx-offer-title">{{\'offers.merchants\' | translate}}:</div>\r\n                        <ul>\r\n                            <li ng-repeat="merchant in offer.merchants | limitTo: merchantsLimit track by merchant.id">\r\n                                {{:: merchant.title}}{{:: merchant.location ? (\', \' +\r\n                                merchant.location.description) : \'\'}}\r\n                            </li>\r\n                        </ul>\r\n                        <a class="lmx-pseudolink" ng-if="merchantsLimit !== offer.merchants.length && offer.merchants.length > 4" ng-click="$parent.merchantsLimit = offer.merchants.length" href="">\r\n                            <span ng-if="merchantsCountText">{{\'offers.showAllMerchants\' | translate}}\r\n                                <span ng-bind-html="merchantsCountText"></span></span>\r\n                        </a>\r\n                        <a class="lmx-pseudolink" ng-if="merchantsLimit === offer.merchants.length && offer.merchants.length > 4" ng-click="$parent.merchantsLimit = 3" href="">\r\n                            {{\'offers.hideMerchants\' | translate}}\r\n                        </a>\r\n                    </section>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="modal-footer lmx-btn-container">\r\n                <button type="button" ng-click="cancel()">{{\'buttons.close\' | translate}}</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/offers/offers.html",'<div class="lmx-container lmx-offers">\r\n    <section>\r\n        <h2>{{\'offers.title\' | translate}}</h2>\r\n        <div loader="inProgress">\r\n            <div ng-if="!inProgress" class="lmx-offers-list">\r\n                <offers-list offers="offers"></offers-list>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/offers/offersList.html",'<div class="lmx-offers-list">\r\n    <div ng-repeat="offer in offers track by offer.id" ng-click="openCommunicationOfferModal(offer)" class="lmx-offer lmx-card">\r\n        <div class="lmx-card-image">\r\n            <img ng-src="{{::offer.imgUrl}}" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="">\r\n        </div>\r\n        <div class="lmx-content">\r\n            <div class="lmx-reward-thumbnail" ng-if=":: offer.rewardThumbnail" ng-switch="rewardThumbnailTypes[offer.rewardThumbnail.$type]">\r\n                <div class="lmx-two-line-text" ng-switch-when="twoLineText">\r\n                    <div title="{{::offer.rewardThumbnail.firstLine}}" class="lmx-first-line">\r\n                        {{::offer.rewardThumbnail.firstLine}}\r\n                    </div>\r\n                    <div title="{{::offer.rewardThumbnail.secondLine}}" class="lmx-second-line">\r\n                        {{::offer.rewardThumbnail.secondLine}}\r\n                    </div>\r\n                </div>\r\n                <div class="lmx-image-with-text" ng-switch-when="imageWithText">\r\n                    <div title="{{::offer.rewardThumbnail.header}}">\r\n                        {{::offer.rewardThumbnail.header}}\r\n                    </div>\r\n                    <div class="lmx-reward-image">\r\n                        <img ng-src="{{::offer.rewardThumbnail.imgUrl}}" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="">\r\n                    </div>\r\n                    <div title="{{::offer.rewardThumbnail.footer}}">\r\n                        {{::offer.rewardThumbnail.footer}}\r\n                    </div>\r\n                </div>\r\n                <div class="lmx-old-new-price" ng-switch-when="oldNewPrice">\r\n                    <div title="{{::offer.rewardThumbnail.oldPrice}}" class="lmx-old-price">\r\n                        {{::offer.rewardThumbnail.oldPrice}}\r\n                    </div>\r\n                    <div title="{{::offer.rewardThumbnail.newPrice}}" class="lmx-new-price">\r\n                        {{::offer.rewardThumbnail.newPrice}}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="lmx-card-content">\r\n                <div class="lmx-card-title" title="{{::offer.title}}">{{::offer.title}}</div>\r\n                <div class="lmx-card-description">{{:: offer.shortDescription}}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div ng-if="!offers.length">\r\n        {{\'offers.\' + (offerState === states.active ? \'noActiveOffers\' : \'noFutureOffers\') |\r\n        translate}}\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/options/options.html",'<div class="lmx-container lmx-options">\r\n    <section>\r\n        <h2>Параметры сайта</h2>\r\n\r\n        <table>\r\n            <tr>\r\n                <td>\r\n                    <input type="text" id="lmx-api" ng-model="api">\r\n                    <label for="lmx-api">API</label>\r\n                </td>\r\n                <td>\r\n                    <button type="button" ng-click="saveConfiguration(\'host\', api)">\r\n                        {{\'buttons.save\' | translate}}\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    <input type="text" id="lmx-showcaseApi" ng-model="showcaseApi">\r\n                    <label for="lmx-showcaseApi">ShowcaseAPI</label>\r\n                </td>\r\n                <td>\r\n                    <button type="button" ng-click="saveConfiguration(\'showcaseHost\', showcaseApi)">\r\n                        {{\'buttons.save\' | translate}}\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    <input type="text" id="lmx-locales" ng-model="locales" required="">\r\n                    <label for="lmx-locales">Локализации</label>\r\n                </td>\r\n                <td>\r\n                    <button type="button" ng-click="saveConfiguration(\'locales\', locales)">\r\n                        {{\'buttons.save\' | translate}}\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    <input type="text" id="lmx-reCaptchaSiteKey" ng-model="reCaptchaSiteKey">\r\n                    <label for="lmx-reCaptchaSiteKey">reCaptchaSiteKey</label>\r\n                </td>\r\n                <td>\r\n                    <button type="button" ng-click="saveConfiguration(\'reCaptchaSiteKey\', reCaptchaSiteKey)">\r\n                        {{\'buttons.save\' | translate}}\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    <input type="text" id="lmx-oAuthClientId" ng-model="oAuthClientId">\r\n                    <label ng-class="{\'active\': oAuthClientId}" for="lmx-oAuthClientId">oAuthClientId</label>\r\n                </td>\r\n                <td>\r\n                    <button type="button" ng-click="saveConfiguration(\'oAuthClientId\', oAuthClientId)">\r\n                        {{\'buttons.save\' | translate}}\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n\r\n        <h2>Опции компонент</h2>\r\n        <div>\r\n            <table ng-repeat="(key, value) in components">\r\n                <th>{{optionsNames[key]}}</th>\r\n\r\n                <tr ng-repeat="(compKey, compValue) in value">\r\n                    <td>{{compKey}}</td>\r\n                    <td ng-init="inputType = getType(compValue)" ng-switch="inputType">\r\n                        <textarea ng-switch-when="textarea" ng-attr-id="{{compKey}}" readonly="">\r\n{{value[compKey] | json}}</textarea>\r\n                        <input ng-switch-default="" ng-attr-id="{{compKey}}" ng-attr-type="{{inputType}}" ng-class="\'lmx-\'+getClass(compValue)" ng-model="value[compKey]">\r\n                        <label ng-attr-for="{{compKey}}"></label>\r\n                    </td>\r\n                    <td>{{optionsNames[compKey]}}</td>\r\n                </tr>\r\n            </table>\r\n\r\n            <button type="button" ng-click="saveComponentsOptions()">\r\n                {{\'buttons.save\' | translate}}\r\n            </button>\r\n        </div>\r\n\r\n        <h2>Общие опции</h2>\r\n        <div>\r\n            <table>\r\n                <tr ng-repeat="(key, value) in common">\r\n                    <td>{{key}}</td>\r\n                    <td ng-init="inputType = getType(value)" ng-switch="inputType">\r\n                        <textarea ng-switch-when="textarea" ng-attr-id="{{key}}" readonly="">\r\n{{common[key] | json}}</textarea>\r\n                        <input ng-switch-default="" ng-attr-id="{{key}}" ng-attr-type="{{inputType}}" ng-class="\'lmx-\'+getClass(value)" ng-model="common[key]">\r\n                        <label ng-attr-for="{{key}}"></label>\r\n                    </td>\r\n                    <td>{{optionsNames[key]}}</td>\r\n                </tr>\r\n            </table>\r\n\r\n            <button type="button" ng-click="saveCommonOptions()">\r\n                {{\'buttons.save\' | translate}}\r\n            </button>\r\n        </div>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/personalGoods/personalGoods.html",'<div>\r\n    <div class="lmx-container lmx-personal-goods" ng-if="!appLocationParts[1]">\r\n        <h2>{{\'personalGoods.title\' | translate}}</h2>\r\n\r\n        <div loader="inProgress">\r\n            <div ng-show="!inProgress">\r\n                <section class="lmx-my-goods lmx-margin-bottom" ng-if="approvedPersonalOffers.length">\r\n                    <h3>{{\'personalGoods.myGoodsOffers\' | translate}}:</h3>\r\n                    <personal-goods-offer-info ng-repeat="offer in approvedPersonalOffers track by offer.id" offer="offer" goods-preview=""></personal-goods-offer-info>\r\n                </section>\r\n\r\n                <section class="lmx-current-goods lmx-margin-bottom">\r\n                    <h3>{{\'personalGoods.activeOffers\' | translate}}:</h3>\r\n                    <div ng-if="activePersonalOffers.length">\r\n                        <personal-goods-offer-info ng-repeat="offer in activePersonalOffers track by offer.id" offer="offer"></personal-goods-offer-info>\r\n                    </div>\r\n                    <div ng-if="!activePersonalOffers.length">\r\n                        {{\'personalGoods.noActiveOffers\' | translate}}\r\n                    </div>\r\n                </section>\r\n\r\n                <section class="lmx-future-goods lmx-margin-bottom" ng-if="futurePersonalOffers.length">\r\n                    <h3>{{\'personalGoods.futureOffers\' | translate}}:</h3>\r\n                    <personal-goods-offer-info ng-repeat="offer in futurePersonalOffers track by offer.id" offer="offer"></personal-goods-offer-info>\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <personal-goods-offer ng-if="appLocationParts[1]" offer-id="appLocationParts[1]" show-full-description="true"></personal-goods-offer>\r\n</div>\r\n'),
n.put("app/directives/personalGoods/personalGoodsOffer/personalGoodsOffer.html",'<div class="lmx-container lmx-personal-goods-offer" loader="inProgress">\r\n    <div class="lmx-margin-bottom" ng-show="!inProgress">\r\n        <div class="lmx-margin-bottom">\r\n            <a href="{{:: personalGoodsUrl}}">&larr; {{\'buttons.backToList\' | translate}}</a>\r\n        </div>\r\n\r\n        <personal-goods-offer-info offer="offer" class="lmx-margin-bottom" show-full-description="showFullDescription"></personal-goods-offer-info>\r\n\r\n        <div class="lmx-personal-goods-offer__goods-list lmx-card" ng-class="{\'lmx-unselectable\': !selectableGoodsCount,\'lmx-readonly\': !offer.canSelectGoods,\'lmx-many-goods\': offerGoods.length > 9}" loader="offerDetailsInProgress">\r\n            <div class="lmx-approve lmx-card-action">\r\n                <div class="lmx-available-amount-hint">\r\n                    {{selectableGoodsCount ? (\'personalGoods.availableGoodsCount\' | translate:\r\n                    {availableCount: selectableGoodsCount || 0, maxGoodsCount:\r\n                    offer.attribute.maxGoodsCount}) : (\'personalGoods.maxGoodsCount\' | translate)}}\r\n                </div>\r\n                <button type="button" ng-if="availableGoodsCount" ng-click="approveSelectedGoods()" ng-disabled="!selectedGoods.length">\r\n                    {{\'buttons.approve\' | translate}}\r\n                </button>\r\n            </div>\r\n            <div class="lmx-card-content">\r\n                <div ng-repeat="goods in offerGoods track by goods.id" ng-click="changeSelectedGoods(goods)" ng-class="{\'lmx-approved\': goods.selected,\'lmx-selected\': selectedGoods.contains(goods)}" class="lmx-goods">\r\n                    <div class="lmx-img-wrapper">\r\n                        <img ng-src="{{:: goods.imgUrl}}" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="">\r\n                    </div>\r\n                    <div class="lmx-goods__title" title="{{:: goods.title}}">{{:: goods.title}}</div>\r\n                    <div ng-if="goods.typeRewardThumbnail" ng-switch="goods.typeRewardThumbnail">\r\n                        <div ng-switch-when="oldNewPrice" class="lmx-old-new-price">\r\n                            <span class="lmx-new-price">{{:: goods.rewardThumbnail.newPrice}}</span>\r\n                            <span class="lmx-old-price">{{:: goods.rewardThumbnail.oldPrice}}</span>\r\n                        </div>\r\n                        <div ng-switch-when="imageWithText" class="lmx-image-with-text">\r\n                            <div title="{{::goods.rewardThumbnail.header}}">\r\n                                {{::goods.rewardThumbnail.header}}\r\n                            </div>\r\n                            <div class="lmx-reward-image">\r\n                                <img ng-src="{{::goods.rewardThumbnail.imgUrl}}" fallback-image="" fallback-title="{{\'imageNotFound\' | translate}}" alt="">\r\n                            </div>\r\n                            <div title="{{::goods.rewardThumbnail.footer}}">\r\n                                {{::goods.rewardThumbnail.footer}}\r\n                            </div>\r\n                        </div>\r\n                        <div ng-switch-when="twoLineText" class="lmx-two-line-text">\r\n                            <div title="{{:: goods.rewardThumbnail.firstLine}}" class="lmx-first-line">\r\n                                {{:: goods.rewardThumbnail.firstLine}}\r\n                            </div>\r\n                            <div title="{{:: goods.rewardThumbnail.secondLine}}" class="lmx-second-line">\r\n                                {{:: goods.rewardThumbnail.secondLine}}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div ng-if="availableGoodsCount" class="lmx-approve lmx-card-action lmx-approve-footer-duplicate lmx-clearfix">\r\n                <button type="button" ng-click="approveSelectedGoods()" ng-disabled="!selectedGoods.length">\r\n                    {{\'buttons.approve\' | translate}}\r\n                </button>\r\n            </div>\r\n            <div class="lmx-goods-list-overlayer">\r\n                <p ng-bind-html="(\'personalGoods.editingNotAvailable\' | translate) + \': \' + ((offer.attribute.startFillDate | toUTC | dateRange: (offer.attribute.endFillDate | toUTC)) | nbspSpaces)"></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/personalGoods/personalGoodsOfferInfo/personalGoodsOfferInfo.html",'<div class="lmx-personal-goods-offer__info" ng-class="::{\'lmx-card\': isPreview}">\r\n    <div class="lmx-card-content lmx-clearfix">\r\n        <div ng-if=":: goodsPreview" class="lmx-goods-preview">\r\n            <div class="lmx-selected-count">\r\n                {{(\'personalGoods.goodsSelected\' | translate: {approvedCount:\r\n                offer.approvedGoodsCount, maxGoodsCount: offer.attribute.maxGoodsCount})}}\r\n            </div>\r\n            <div ng-repeat="goods in offer.approvedGoods track by goods.id" class="lmx-goods">\r\n                <img ng-src="{{:: goods.imgUrl}}" fallback-image="" alt="" title="{{:: goods.title}}">\r\n            </div>\r\n        </div>\r\n\r\n        <brands-names brands="offer.brands"></brands-names>\r\n\r\n        <div class="lmx-title-wrap" ng-switch=":: isPreview">\r\n            <h2 ng-switch-when="false" class="lmx-title">{{:: offer.title}}</h2>\r\n            <h4 ng-switch-when="true" class="lmx-title">{{:: offer.title}}</h4>\r\n        </div>\r\n\r\n        <div ng-if="showFullDescription" class="lmx-description lmx-row" ng-bind-html="offer.description | markdown"></div>\r\n        <div ng-if="!showFullDescription" class="lmx-description lmx-row">\r\n            {{:: offer.shortDescription}}\r\n        </div>\r\n        <div class="lmx-duration lmx-row">\r\n            <b>{{\'personalGoods.offerPeriod\' | translate}}:</b>\r\n            <div>{{:: offer.begin | toUTC | dateRange: (offer.end | toUTC) | capitalize}}</div>\r\n        </div>\r\n        <div class="lmx-edit-duration lmx-row">\r\n            <b ng-bind-html="(\'personalGoods.editingNotAvailable\' | translate) + \':\'"></b>\r\n            <div>\r\n                {{:: offer.attribute.startFillDate | toUTC | dateRange: (offer.attribute.endFillDate\r\n                | toUTC) | capitalize}}\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="lmx-card-action lmx-clearfix">\r\n        <button type="button" ng-click=":: changeLocation(\'personal-goods/\' + offer.id)">\r\n            {{\'buttons.viewMore\' | translate}}\r\n        </button>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/personalOffers/personalOffer/modal/personalOfferMapModal.html",'<div class="lmx-personal-offers-map">\r\n    <div loader="inProgress" class="modal-body">\r\n        <lmx-map ng-if="merchants.length" class="lmx-map" data="merchants"> </lmx-map>\r\n    </div>\r\n    <div class="modal-footer lmx-btn-container">\r\n        <button type="button" ng-click="cancel()">{{\'buttons.close\' | translate}}</button>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/personalOffers/personalOffer/personalOffer.html",'<div class="lmx-container lmx-personal-offer" loader="inProgress">\r\n    <div ng-if="!inProgress">\r\n        <div class="lmx-margin-bottom">\r\n            <a href="{{:: personalOffersUrl}}" class="lmx-go-back-link">&larr; {{\'buttons.backToList\' | translate}}</a>\r\n        </div>\r\n\r\n        <personal-offer-content class="lmx-margin-bottom" personal-offer="personalOffer" show-full-description="true"></personal-offer-content>\r\n\r\n        <div ng-if=":: offerDetails.length" class="lmx-offer-details-container lmx-margin-bottom">\r\n            <uib-accordion class="lmx-offer-details-accordion">\r\n                <uib-accordion-group ng-repeat="offerDetail in offerDetails" class="lmx-offer-details-accordion-group">\r\n                    <uib-accordion-heading class="lmx-offer-details-header">\r\n                        <span>{{::offerDetail.title}}</span>\r\n                        <span class="glyphicon glyphicon-chevron-down"></span>\r\n                        <span class="glyphicon glyphicon-chevron-up"></span>\r\n                    </uib-accordion-heading>\r\n                    <dl class="lmx-offer-details-list">\r\n                        <dt class="lmx-offer-detail__title">{{\'personalOffers.offer\' | translate}}:</dt>\r\n                        <dd class="lmx-offer-detail__description">{{::offerDetail.description}}</dd>\r\n\r\n                        <dt class="lmx-offer-detail__title">\r\n                            {{\'personalOffers.details\' | translate}}:\r\n                        </dt>\r\n                        <dd class="lmx-offer-detail__values">\r\n                            <personal-offer-discount-view ng-if="offerDetail.discount" value="offerDetail.discount.value" type="offerDetail.discount.$type" measure-amount="offerDetail.discount.measureAmount" discount-type="offerDetail.discount.discountType"></personal-offer-discount-view>\r\n                            <div>{{::offerDetail.annotation}}</div>\r\n                        </dd>\r\n\r\n                        <dt class="lmx-offer-detail__title lmx-_interval" ng-if="offerDetail.detailBeginLocalDate || offerDetail.detailEndLocalDate">\r\n                            {{\'personalOffers.detailPeriodTitle\' | translate}}:\r\n                        </dt>\r\n                        <dd class="lmx-offer-detail__dates" ng-if="offerDetail.detailBeginLocalDate || offerDetail.detailEndLocalDate">\r\n                            <span ng-if="offerDetail.detailBeginLocalDate && !offerDetail.detailEndLocalDate">\r\n                                {{(\'personalOffers.detailPeriod\' | translate: {offerBeginning:\r\n                                (offerDetail.detailBeginLocalDate | toUTC | shortDate), offerEnd:\r\n                                (\'personalOffers.offerEnd\' | translate)})}}\r\n                            </span>\r\n                            <span ng-if="!offerDetail.detailBeginLocalDate && offerDetail.detailEndLocalDate">\r\n                                {{(\'personalOffers.detailPeriod\' | translate: {offerBeginning:\r\n                                (\'personalOffers.offerBeginning\' | translate), offerEnd:\r\n                                (offerDetail.detailEndLocalDate | toUTC | shortDate)})}}\r\n                            </span>\r\n                            <span ng-if="offerDetail.detailBeginLocalDate && offerDetail.detailEndLocalDate">\r\n                                {{(\'personalOffers.detailPeriod\' | translate: {offerBeginning:\r\n                                (offerDetail.detailBeginLocalDate | toUTC | shortDate), offerEnd:\r\n                                (offerDetail.detailEndLocalDate | toUTC | shortDate)})}}\r\n                            </span>\r\n                        </dd>\r\n\r\n                        <dt class="lmx-offer-detail__title">\r\n                            {{\'personalOffers.goodsCode\' | translate}}:\r\n                        </dt>\r\n                        <dd class="lmx-offer-detail__codes">\r\n                            <repeat-limit list="offerDetail.codes" delimiter="," limit="3" field="value"></repeat-limit>\r\n                        </dd>\r\n                    </dl>\r\n                    <div class="lmx-btn-container lmx-offer-details-map">\r\n                        <button type="button" ng-show="offerDetail.hasMerchants" ng-click="openPersonalOfferMapModal(offerDetail.id)">\r\n                            {{\'personalOffers.viewOnMap\' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </uib-accordion-group>\r\n            </uib-accordion>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/personalOffers/personalOfferContentView/personalOfferContent.html",'<div class="lmx-offer-content-container lmx-card-content lmx-clearfix">\r\n    <brands-names brands="personalOffer.brands"></brands-names>\r\n\r\n    <div class="lmx-personal-offer__title-container" ng-switch=":: isPreview">\r\n        <h2 ng-switch-when="false" class="lmx-personal-offer__title">{{:: personalOffer.title}}</h2>\r\n        <h4 ng-switch-when="true" class="lmx-card-title lmx-personal-offer__title">\r\n            {{:: personalOffer.title}}\r\n        </h4>\r\n    </div>\r\n\r\n    <div class="lmx-personal-offer__map-link">\r\n        <a ng-click="openPersonalOfferMapModal()" class="lmx-pseudolink" href="">{{\'personalOffers.showOnMap\' | translate}}</a>\r\n    </div>\r\n    <div ng-if=":: showFullDescription" class="lmx-personal-offer__description lmx-row" ng-bind-html="personalOffer.description | markdown"></div>\r\n    <div ng-if=":: !showFullDescription" class="lmx-personal-offer__description lmx-row">\r\n        {{:: personalOffer.shortDescription}}\r\n    </div>\r\n    <div class="lmx-personal-offer__duration lmx-row">\r\n        <b>{{\'personalOffers.offerPeriod\' | translate}}:</b>\r\n        <div>\r\n            {{:: personalOffer.begin | toUTC | dateRange: (personalOffer.end | toUTC) | capitalize}}\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/personalOffers/personalOfferDiscountView/personalOfferDiscountView.html",'<div class="lmx-discount-view" ng-switch=":: discountEnums[type]">\r\n    <span ng-switch-default="">{{:: discountView}}</span>\r\n    <div ng-switch-when="pricePerUnit">\r\n        <span>{{::discountView}}</span>\r\n        <span class="lmx-tooltip glyphicon glyphicon-question-sign" uib-tooltip="{{\'personalOffers.pricePerUnitDiscountHint.\' + (discountType | lowerCamelCase) | translate }}" tooltip-placement="right"></span>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/personalOffers/personalOffers.html",'<div>\r\n    <div class="lmx-container lmx-personal-offers" ng-if="!appLocationParts[1]">\r\n        <h2>{{\'personalOffers.title\' | translate}}</h2>\r\n        <div loader="inProgress">\r\n            <div class="lmx-margin-bottom" ng-if="!inProgress">\r\n                <div ng-repeat="personalOffer in personalOffers track by personalOffer.id" class="lmx-card">\r\n                    <personal-offer-content personal-offer="personalOffer"></personal-offer-content>\r\n                    <div class="lmx-card-action lmx-clearfix">\r\n                        <button type="button" ng-click="openOffer(personalOffer.id)">\r\n                            {{\'buttons.viewMore\' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div ng-if=":: !personalOffers.length">\r\n                    {{\'personalOffers.noActiveOffers\' | translate}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <personal-offer ng-if="appLocationParts[1]" offer-id="appLocationParts[1]"></personal-offer>\r\n</div>\r\n'),n.put("app/directives/phoneInput/phoneInput.html",'<input ng-transclude="" ng-keypress="keyPress($event)" ng-paste="paste($event)" type="text" mask="{{phoneSettings.prefix}} {{phoneSettings.mask}}" clean="true" validate="false" restrict="reject" is-phone="" placeholder="{{phoneSettings.prefix}} {{phoneSettings.mask}}">\r\n'),n.put("app/directives/questionnaire/questionCancel.html",'<div class="lmx-cancel-link">\r\n    <a ng-click="cancelForm()" href="">{{\'buttons.cancel\' | translate}}</a>\r\n</div>\r\n'),n.put("app/directives/questionnaire/questionEdit.html",'<div>\r\n    <a ng-click="openForm()" href="">{{\'buttons.change\'|translate}}</a>\r\n</div>\r\n'),n.put("app/directives/questionnaire/questionErrors.html",'<div class="lmx-questionnaire-error" ng-repeat="message in errors">\r\n    <span>{{::message}}</span>\r\n</div>\r\n'),n.put("app/directives/questionnaire/questionnaire.html",'<div>\r\n    <div ng-if=":: registration">\r\n        <h2>{{\'personal.title\' | translate}}</h2>\r\n    </div>\r\n    <div class="lmx-questionnaire" loader="loader.templatesInProgress" ng-class="::{\'lmx-questionnaire-edit\': !registration}">\r\n        <div ng-hide="loader.templatesInProgress">\r\n            <div class="lmx-questionnaire-column">\r\n                <questionnaire-item ng-repeat="questionnaireItem in questionnaire | filter: {type: questionnaireItemTypes.question} : true | orderBy: \'order\' track by questionnaireItem.id" question="questionnaireItem"></questionnaire-item>\r\n            </div>\r\n            <questionnaire-group ng-repeat="questionnaireItem in questionnaire | filter: {type: questionnaireItemTypes.questionGroup} : true | orderBy: \'order\' track by questionnaireItem.id" group="questionnaireItem" class="lmx-questionnaire-column"></questionnaire-group>\r\n        </div>\r\n\r\n        <lmx-notifications ng-if=":: registration" area="registration"></lmx-notifications>\r\n        <lmx-notifications area="questionnaire"></lmx-notifications>\r\n        <div ng-if="!loader.templatesInProgress">\r\n            <div class="lmx-btn-container">\r\n                <div ng-hide="loader.saveInProgress">\r\n                    <button type="button" ng-if=":: registration" class="lmx-btn-cancel" ng-click="cancelForm()" id="lmx-registration-questionnaire__cancel">\r\n                        {{\'buttons.cancel\' | translate}}\r\n                    </button>\r\n                    <button type="button" ng-click="saveQuestionnaire()" id="lmx-registration-questionnaire__submit" ng-class="::{\'lmx-right\': !registration}">\r\n                        {{(registration ? \'buttons.next\' : \'buttons.save\') |translate}}\r\n                    </button>\r\n                </div>\r\n                <inline-loader>loader.saveInProgress</inline-loader>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/questionnaire/questionnaireGroup.html",'<div>\r\n    <h3>{{::group.name}}</h3>\r\n    <div ng-repeat="question in group.questions | orderBy: \'order\' track by question.id">\r\n        <questionnaire-item question="question"></questionnaire-item>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/questionnaire/questionSave.html",'<div>\r\n    <inline-loader line="">inProgress</inline-loader>\r\n    <button type="submit" ng-hide="inProgress">{{\'buttons.save\'|translate}}</button>\r\n</div>\r\n'),n.put("app/directives/questionnaire/questionTypes/Boolean.html",'<div class="lmx-question-boolean">\r\n    <form novalidate="" name="questionnaireForm" ng-submit="questionnaireForm.$valid && save()">\r\n        <form-group ng-init="registerForm(questionnaireForm)" ng-class="::{\'lmx-required\': question.isRequired}">\r\n            <input type="checkbox" ng-attr-id="{{::question.logicalName}}" name="{{::question.logicalName}}" ng-model="question.value" ng-disabled="question.isReadOnly || disabled">\r\n            <label ng-attr-for="{{::question.logicalName}}" class="lmx-checkbox-item-label">\r\n                {{::question.name}}\r\n            </label>\r\n\r\n            <question-errors></question-errors>\r\n        </form-group>\r\n    </form>\r\n</div>\r\n'),n.put("app/directives/questionnaire/questionTypes/Date.html",'<div class="lmx-question-date">\r\n    <form novalidate="" name="questionnaireForm" ng-submit="questionnaireForm.$valid && save()">\r\n        <form-group label-text="{{::question.name}}" ng-init="registerForm(questionnaireForm)" ng-class="::{\'lmx-required\': question.isRequired}">\r\n            <birthday-picker ng-attr-id="{{:: question.logicalName}}" ng-attr-name="{{:: question.logicalName}}" ng-model="question.value" ng-required="::question.isRequired" is-disabled="question.isReadOnly || disabled" ng-class="{\'disabled\': question.isReadOnly || disabled}"></birthday-picker>\r\n\r\n            <question-errors></question-errors>\r\n        </form-group>\r\n    </form>\r\n</div>\r\n'),n.put("app/directives/questionnaire/questionTypes/Double.html",'<div class="lmx-question-double">\r\n    <form novalidate="" name="questionnaireForm" ng-submit="questionnaireForm.$valid && save()">\r\n        <form-group ng-init="registerForm(questionnaireForm)" ng-class="::{\'lmx-required\': question.isRequired}" ng-attr-title="{{:: question.name.length > 30 ? question.name : \'\'}}" label-text="{{::question.name}}">\r\n            <input type="number" ng-model="question.value" name="{{::question.logicalName}}" id="lmx-{{::question.logicalName}}" ng-disabled="question.isReadOnly || disabled" ng-required="::question.isRequired" ng-pattern=":: question.regexp" ng-pattern-message="{{:: question.regexpErrorMessage}}">\r\n\r\n            <question-errors></question-errors>\r\n        </form-group>\r\n    </form>\r\n</div>\r\n'),n.put("app/directives/questionnaire/questionTypes/Int.html",'<div class="lmx-question-int">\r\n    <form novalidate="" name="questionnaireForm" ng-submit="questionnaireForm.$valid && save()">\r\n        <form-group ng-init="registerForm(questionnaireForm)" ng-class="::{\'lmx-required\': question.isRequired}" ng-attr-title="{{:: question.name.length > 30 ? question.name : \'\'}}" label-text="{{::question.name}}">\r\n            <input type="number" ng-model="question.value" ng-attr-name="{{::question.logicalName}}" ng-attr-id="{{::question.logicalName}}" ng-disabled="question.isReadOnly || disabled" ng-required="::question.isRequired" ng-pattern=":: question.regexp" ng-pattern-message="{{:: question.regexpErrorMessage}}" integer="">\r\n\r\n            <question-errors></question-errors>\r\n        </form-group>\r\n    </form>\r\n</div>\r\n'),n.put("app/directives/questionnaire/questionTypes/Select.html",'<div ng-class="::{\'lmx-question-radio\': !question.isMultiSelect,\'lmx-question-checkbox\': question.isMultiSelect,\'lmx-question-custom\': question.hasCustomAnswer}">\r\n    <form novalidate="" name="questionnaireForm" ng-submit="questionnaireForm.$valid && save()">\r\n        <form-group label-text="{{::question.name}}" ng-init="registerForm(questionnaireForm)" ng-class="::{\'lmx-required\': question.isRequired}">\r\n            <input type="hidden" ng-model="question.value" ng-attr-id="{{::question.logicalName}}" ng-attr-name="{{::question.logicalName}}" ng-required="::question.isRequired">\r\n            <!-- select (if answers > 5) -->\r\n            <div ng-if=":: question.fixedAnswers.length > 5 && !question.isMultiSelect">\r\n                <div ng-init="lmxCustomSelectValue = getFixedAnswerByProperty(\'isSelected\', true).id" lmx-custom-select="" ng-model="lmxCustomSelectValue" repeat="question.fixedAnswers" ng-change="updateAnswerObject(lmxCustomSelectValue)" options="q.id as q.name for q in question.fixedAnswers"></div>\r\n                <input ng-show="question.value.isCustom" type="text" ng-attr-name="{{::question.logicalName+\'_custom\'}}" ng-model="question.value.value" placeholder="{{\'questionnaire.customAnswerPlaceholder\' | translate}}" ng-required="question.value.isCustom" ng-pattern="question.regexp" class="lmx-question-custom__text">\r\n            </div>\r\n            <div ng-if=":: !(question.fixedAnswers.length > 5 && !question.isMultiSelect)" ng-repeat="item in question.fixedAnswers" ng-init="elementId = question.logicalName+\'_\'+item.id" ng-class="::{\'lmx-question-radio-item\': !question.isMultiSelect,\'lmx-question-checkbox-item\': question.isMultiSelect}">\r\n                <!-- radio (if answers < 6) -->\r\n                <div ng-if=":: !question.isMultiSelect">\r\n                    <input type="radio" ng-model="question.value" ng-value="item" ng-disabled="item.isReadOnly || disabled" ng-attr-id="{{::elementId}}">\r\n                    <label class="lmx-radio-item-label" ng-attr-for="{{::elementId}}">\r\n                        {{::item.name}}\r\n                    </label>\r\n                    <input ng-if="item.isCustom" type="text" placeholder="{{\'questionnaire.customAnswerPlaceholder\' | translate}}" ng-attr-name="{{::question.logicalName+\'_custom\'}}" ng-model="item.value" ng-click="question.value = item" ng-required="question.value === item" ng-disabled="disabled || question.value !== item" ng-pattern="question.value === item ? question.regexp : undefined" class="lmx-question-custom__text">\r\n                </div>\r\n\r\n                <!-- checkBox -->\r\n                <div ng-if=":: question.isMultiSelect">\r\n                    <input type="checkbox" ng-attr-id="{{::elementId}}" ng-model="item.isSelected" ng-change="updateCheckBoxValues()" ng-disabled="item.isReadOnly || disabled">\r\n                    <label ng-attr-for="{{::elementId}}" class="lmx-checkbox-item-label">\r\n                        {{::item.name}}\r\n                    </label>\r\n                    <input ng-if="item.isCustom" type="text" name="{{::question.logicalName+\'_custom\'}}" ng-model="item.value" ng-click="item.isSelected = true" ng-required="item.isSelected" ng-disabled="disabled || !item.isSelected" ng-pattern="item.isSelected ? question.regexp : undefined" class="lmx-question-custom__text">\r\n                </div>\r\n            </div>\r\n\r\n            <question-errors></question-errors>\r\n        </form-group>\r\n    </form>\r\n</div>\r\n'),n.put("app/directives/questionnaire/questionTypes/String.html",'<div class="lmx-question-string">\r\n    <form novalidate="" name="questionnaireForm" ng-submit="questionnaireForm.$valid && save()" ng-attr-autocomplete="{{::browserAutocomplete}}">\r\n        <form-group ng-init="registerForm(questionnaireForm)" ng-class="::{\'lmx-required\': question.isRequired}" ng-switch=":: browserAutocomplete" label-text="{{::question.name}}" ng-attr-title="{{:: question.name.length > 30 ? question.name : \'\'}}">\r\n            <input ng-switch-when="off" type="text" ng-model="question.value" ng-attr-name="{{::question.logicalName}}" ng-attr-id="{{::question.logicalName}}" uib-typeahead="value for value in getAutocompleteValues($viewValue)" typeahead-on-select="commitValue()" typeahead-min-length="0" autocomplete="off" ng-disabled="question.isReadOnly || disabled" ng-required="::question.isRequired" ng-pattern=":: question.regexp" ng-pattern-message="{{:: question.regexpErrorMessage}}">\r\n            <input ng-switch-default="" type="text" ng-model="question.value" ng-attr-name="{{::question.logicalName}}" ng-attr-id="{{::question.logicalName}}" ng-disabled="question.isReadOnly || disabled" ng-required="::question.isRequired" ng-pattern=":: question.regexp" ng-pattern-message="{{:: question.regexpErrorMessage}}">\r\n            <question-errors></question-errors>\r\n        </form-group>\r\n    </form>\r\n</div>\r\n'),n.put("app/directives/reCaptcha/reCaptcha.html",'<div>\r\n    <div ng-if="reCaptchaCheckingInProgress.value">\r\n        <div vc-recaptcha="" key="reCaptchaSiteKey.value" size="invisible" badge="bottomleft" ng-model="reCaptchaResponse.value" on-success="commitResponse(response)" on-create="start()" on-expire="reload()" on-error="error(e)" lang="ru"></div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/registration/cardAssignment.html",'<div class="lmx-card-assignment">\r\n    <h2>{{\'registration.cardStep.title\' | translate}}</h2>\r\n    <lmx-notifications area="registration"></lmx-notifications>\r\n    <form novalidate="" name="assignCardForm" ng-show="isVirtualCardEmissionAllowed !== undefined" ng-submit="assignCardForm.$valid && assignCard()">\r\n        <form-group label-text="{{\'registration.cardStep.cardNumber\' | translate}}">\r\n            <input type="text" ng-model="cardModel.cardNumber" ng-disabled="stepInProgress" id="lmx-cardNumber" name="cardNumber" required="" autofocus="">\r\n        </form-group>\r\n        <form-group ng-if="cvcCodeCardsRegistration" label-text="{{\'registration.cardStep.cvcCode\' | translate}}">\r\n            <input type="number" ng-model="cardModel.cvcCode" ng-disabled="stepInProgress" id="lmx-cvcCode" name="cvcCode">\r\n        </form-group>\r\n        <div class="lmx-hint">\r\n            <p ng-if="!isVirtualCardEmissionAllowed">\r\n                {{\'registration.cardStep.cardNeeded\' | translate}}\r\n            </p>\r\n        </div>\r\n        <div class="lmx-btn-container">\r\n            <div ng-hide="stepInProgress">\r\n                <button type="button" ng-click="cancel()">\r\n                    {{\'buttons.cancel\' | translate}}\r\n                </button>\r\n                <button ng-if="isVirtualCardEmissionAllowed" type="button" ng-click="emitVirtualCard()" id="lmx-registration-assignCard__doNotHave">\r\n                    {{\'cards.noCard\' | translate}}\r\n                </button>\r\n                <button type="submit" id="lmx-registration-assignCard__submit">\r\n                    {{\'buttons.complete\' | translate}}\r\n                </button>\r\n            </div>\r\n            <inline-loader line="">stepInProgress</inline-loader>\r\n        </div>\r\n    </form>\r\n</div>\r\n'),n.put("app/directives/registration/registration.html",'<div class="lmx-container lmx-registration">\r\n    <div class="lmx-registration" ng-class="\'lmx-\'+currentStep">\r\n        <!-- INITIAL-FORM -->\r\n        <div ng-if="!isRegistrationStarted" class="lmx-registration-form">\r\n            <registration-start></registration-start>\r\n        </div>\r\n        <!-- // INITIAL-FORM -->\r\n\r\n        <!-- STEPS -->\r\n        <div ng-if="isRegistrationStarted && !registrationCompleted" class="lmx-registration-steps" ng-switch="currentStep" loader="currentStep == undefined || inProgress">\r\n            <div ng-hide="inProgress">\r\n                <tender-offer ng-switch-when="AcceptTenderOffer"></tender-offer>\r\n                <lmx-user-phone ng-switch-when="ChangePhone" registration="true"></lmx-user-phone>\r\n                <lmx-user-email ng-switch-when="ChangeEmail" registration="true" email-skippable="emailSkippable"></lmx-user-email>\r\n                <lmx-user-password ng-switch-when="PasswordRequired" registration="true"></lmx-user-password>\r\n                <lmx-questionnaire ng-switch-when="Questions" registration="true" only-required=""></lmx-questionnaire>\r\n                <card-assignment ng-switch-when="AssignCard"></card-assignment>\r\n            </div>\r\n        </div>\r\n        <!-- // STEPS -->\r\n\r\n        <!-- COMPLETE-MESSAGE -->\r\n        <div ng-if="registrationCompleted" class="lmx-registration-finish" loader="inProgress">\r\n            <registration-finish></registration-finish>\r\n        </div>\r\n        <!-- // COMPLETE-MESSAGE -->\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/registration/registrationFinish.html","<div class=\"lmx-margin-bottom\">\r\n    <h2>{{'registration.finish.title' | translate}}</h2>\r\n    <p>{{'registration.finish.welcome' | translate}}</p>\r\n    <button type=\"button\" ng-click=\"continue()\">\r\n        {{(authorizeOnRegistrationComplete ? 'registration.finish.login' :\r\n        'registration.finish.close') | translate}}\r\n    </button>\r\n</div>\r\n"),n.put("app/directives/registration/registrationStart.html",'<div class="lmx-registration-start">\r\n    <h2>{{\'registration.title\' | translate}}</h2>\r\n    <lmx-notifications area="registration"></lmx-notifications>\r\n    <p ng-if="tokenForSocialRegistration" class="lmx-info-social-registration">\r\n        Начат процесс регистрации через социальную сеть. Чтобы отменить регистрацию,\r\n        <a class="lmx-pseudo-link" ng-click="cancel()" href="">нажмите&nbsp;здесь</a>\r\n    </p>\r\n    <div loader="acceptTenderOfferByCheck && (isOfferAndAgreementLoaded === undefined)">\r\n        <identifiers ng-if=":: identifiers.arr !== undefined" identifiers="identifiers.arr" ng-model="model.identifier" ng-change="resetFormModels(registrationForm)"></identifiers>\r\n        <form novalidate="" name="registrationForm" ng-submit="registrationForm.$valid && registration(registrationForm)" id="lmx-registrationForm" ng-hide="acceptTenderOfferByCheck && (isOfferAndAgreementLoaded === undefined)">\r\n            <form-group ng-if="!tokenForSocialRegistration && model.identifier === IDENTIFIERS.phone" label-text="{{\'identifiers.\' + model.identifier | translate}}" ng-class="::{\'lmx-required\': referralRegistration}">\r\n                <phone-input ng-model="registrationData.login" id="lmx-login_{{model.identifier}}" name="login" ng-disabled="inProgress || authInProgress || actionsInProgress" required="" autofocus=""></phone-input>\r\n            </form-group>\r\n            <div class="lmx-hint lmx-input-hint" ng-if="!tokenForSocialRegistration && model.identifier === IDENTIFIERS.phone">\r\n                <p ng-bind-html="\'registration.phoneHint\' | translate"></p>\r\n            </div>\r\n            <form-group ng-if="!tokenForSocialRegistration && model.identifier === IDENTIFIERS.card" label-text="{{\'identifiers.\' + model.identifier | translate}}" ng-class="::{\'lmx-required\': referralRegistration}">\r\n                <input type="text" ng-model="registrationData.login" id="lmx-login_{{model.identifier}}" name="login" ng-disabled="inProgress || authInProgress || actionsInProgress" placeholder="0000 0000 0000 0000" mask="9999 9999 9999 9999" clean="true" validate="false" restrict="reject" required="">\r\n            </form-group>\r\n\r\n            <div ng-if="passwordRequired">\r\n                <form-group label-text="{{\'registration.password\' | translate}}">\r\n                    <input type="password" ng-model="registrationData.password" id="lmx-password" name="password" ng-disabled="authInProgress || actionsInProgress" required="">\r\n                </form-group>\r\n                <div class="lmx-hint lmx-input-hint lmx-margin-bottom">\r\n                    <p>\r\n                        <span ng-if=":: registrationSmsCodeAsPassword" ng-bind-html="\'registration.codeHint\' | translate"></span>\r\n                        <a ng-click="resetPassword()" href="">{{\'registration.forgotPassword\' | translate}}</a>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            <form-group ng-if=":: referralRegistration" label-text="{{\'registration.referrerCardNumber\' | translate}}">\r\n                <input type="text" ng-model="referrerCardNumber.value" ng-disabled="authInProgress || actionsInProgress" name="referrerCardNumber" id="lmx-referrerCardNumber">\r\n            </form-group>\r\n            <form-group ng-if="acceptTenderOfferByCheck">\r\n                <input type="checkbox" id="lmx-userAgreesWithOfferByCheck" name="userAgreesWithOfferByCheck" ng-model="offer" ng-disabled="!isOfferAndAgreementLoaded || authInProgress || actionsInProgress" required="">\r\n                <label for="lmx-userAgreesWithOfferByCheck">\r\n                    {{\'registration.offerAccept\' | translate}}\r\n                    <a target="_blank" href="{{apiHost}}api/Files/{{::offerPdfFileId}}">{{\'registration.tenderOffer\' | translate}}</a>\r\n                </label>\r\n            </form-group>\r\n            <form-group ng-if="acceptTenderOfferByCheck">\r\n                <input type="checkbox" id="lmx-userAgreesWithPDPByCheck" name="userAgreesWithPDPByCheck" ng-model="agreement" ng-disabled="!isOfferAndAgreementLoaded || authInProgress || actionsInProgress" required="">\r\n                <label for="lmx-userAgreesWithPDPByCheck">\r\n                    {{\'registration.opdAgree\' | translate}}\r\n                    <a target="_blank" href="{{apiHost}}api/Files/{{::opdAgreementFileId}}">{{\'registration.opd\' | translate}}</a>\r\n                </label>\r\n            </form-group>\r\n            <div class="lmx-btn-container">\r\n                <button type="submit" ng-hide="authInProgress || actionsInProgress" ng-disabled="acceptTenderOfferByCheck && !isOfferAndAgreementLoaded" id="lmx-registration-phone__submit">\r\n                    {{\'registration.register\' | translate}}\r\n                </button>\r\n                <inline-loader line="">authInProgress || actionsInProgress</inline-loader>\r\n            </div>\r\n            <lmx-social ng-hide="authInProgress || actionsInProgress || tokenForSocialRegistration" class="lmx-center"></lmx-social>\r\n        </form>\r\n    </div>\r\n</div>\r\n'),
n.put("app/directives/registration/tenderOffer.html",'<div class="lmx-tenter-offer">\r\n    <h2>{{\'registration.tenderOfferStep.title\' | translate}}</h2>\r\n    <lmx-notifications area="registration"></lmx-notifications>\r\n    <form novalidate="" name="acceptTenderOfferForm" ng-submit="acceptTenderOfferForm.$valid && isOfferAndAgreementLoaded && acceptTenderOffer()" loader="inProgress || (isOfferAndAgreementLoaded === undefined)">\r\n        <lmx-scroller class="lmx-margin-bottom">\r\n            <div class="lmx-tender-offer-content" ng-bind-html="tenderOfferFile"></div>\r\n        </lmx-scroller>\r\n\r\n        <form-group>\r\n            <input type="checkbox" id="lmx-userAgreesWithOffer" name="userAgreesWithOffer" ng-model="offer" ng-disabled="stepInProgress" required="">\r\n            <label for="lmx-userAgreesWithOffer" ng-if="isOfferAndAgreementLoaded">\r\n                {{\'registration.tenderOfferStep.offerAccept\' | translate}}\r\n            </label>\r\n        </form-group>\r\n\r\n        <form-group>\r\n            <input type="checkbox" id="lmx-userAgreesWithPDP" name="userAgreesWithPDP" ng-model="agreement" ng-disabled="stepInProgress" required="">\r\n            <label for="lmx-userAgreesWithPDP" ng-if="isOfferAndAgreementLoaded">\r\n                {{\'registration.tenderOfferStep.opdAccept\' | translate}}\r\n                <a target="_blank" href="{{apiHost}}api/Files/{{::opdAgreementFileId}}">{{\'registration.tenderOfferStep.opd\' | translate}}</a>.\r\n            </label>\r\n        </form-group>\r\n\r\n        <div class="lmx-btn-container" ng-hide="inProgress || (isOfferAndAgreementLoaded === undefined)">\r\n            <div ng-hide="stepInProgress">\r\n                <button type="button" ng-click="cancel()" id="lmx-registration-offer__cancel">\r\n                    {{\'buttons.cancel\' | translate}}\r\n                </button>\r\n                <button type="submit" ng-disabled="!isOfferAndAgreementLoaded" id="lmx-registration-offer__submit">\r\n                    {{\'buttons.accept\' | translate}}\r\n                </button>\r\n            </div>\r\n            <inline-loader line="">stepInProgress</inline-loader>\r\n        </div>\r\n    </form>\r\n</div>\r\n'),n.put("app/directives/resetPassword/resetPassword.html",'<div class="lmx-container lmx-reset-password">\r\n    <h2>{{\'resetPassword.title\' | translate}}</h2>\r\n    <lmx-notifications area="resetPassword"></lmx-notifications>\r\n\r\n    <p ng-if="steps.start">{{\'resetPassword.identityHint\' | translate}}</p>\r\n    <identifiers ng-if="steps.start && identifiers.arr !== undefined" identifiers="identifiers.arr" ng-model="model.identifier" ng-change="resetFormModels()"></identifiers>\r\n\r\n    <div class="lmx-auth-frame">\r\n        <form novalidate="" ng-if="steps.start" name="forms.resetPasswordStart" id="lmx-resetPasswordStart" ng-submit="forms.resetPasswordStart.$valid && start()">\r\n            <form-group ng-if="!inProgress && model.identifier === IDENTIFIERS.phone" label-text="{{\'identifiers.\' + model.identifier | translate}}">\r\n                <phone-input ng-model="model.identity" id="lmx-startIdentity_{{model.identifier}}" name="startIdentity" ng-disabled="inProgress" required="" autofocus=""></phone-input>\r\n            </form-group>\r\n            <form-group ng-if="model.identifier === IDENTIFIERS.email" label-text="{{\'identifiers.\' + model.identifier | translate}}">\r\n                <input type="email" ng-model="model.identity" id="lmx-startIdentity_{{model.identifier}}" name="startIdentity" ng-disabled="inProgress" placeholder="example@mail.com" required="">\r\n            </form-group>\r\n            <div class="lmx-btn-container">\r\n                <div ng-hide="inProgress">\r\n                    <button type="button" class="lmx-btn-cancel" ng-click="cancel()">\r\n                        {{\'buttons.cancel\' | translate}}\r\n                    </button>\r\n                    <button type="submit" id="lmx-reset-password-submit">\r\n                        {{\'buttons.next\' | translate}}\r\n                    </button>\r\n                </div>\r\n                <inline-loader line="">inProgress</inline-loader>\r\n            </div>\r\n        </form>\r\n        <form novalidate="" ng-if="steps.confirm" name="forms.resetPasswordConfirm" ng-submit="forms.resetPasswordConfirm.$valid && confirm()">\r\n            <div class="lmx-hint">\r\n                <p ng-if=":: phoneIdentifier" ng-bind-html="(\'resetPassword.smsCodeHint\' | translate) + \' <strong>\' + phoneIdentifier + \'</strong>\'"></p>\r\n                <p ng-if=":: emailIdentifier" ng-bind-html="(\'resetPassword.emailCodeHint\' | translate) + \' <strong>\' + emailIdentifier + \'</strong>\'"></p>\r\n            </div>\r\n            <form-group ng-hide="isResetPasswordConfirmationCodeHidden()" class="lmx-confirm-code-field" label-text="{{\'resetPassword.confirmCode\' | translate}}">\r\n                <input ng-model="model.confirmCode" ng-disabled="inProgress" id="lmx-confirmCode" name="confirmcode" type="text" required="">\r\n            </form-group>\r\n            <div>\r\n                <a id="lmx-confirm-code-repeated" ng-click="start()" ng-hide="inProgress" href="">{{\'resetPassword.resendCode\' | translate}}</a>\r\n            </div>\r\n            <form-group label-text="{{\'resetPassword.newPassword\' | translate}}">\r\n                <input type="password" ng-model="model.newPassword" ng-disabled="inProgress" id="lmx-newPassword" name="newPassword" user-password-requirements="" required="">\r\n            </form-group>\r\n            <form-group label-text="{{\'resetPassword.newPasswordConfirmCode\' | translate}}">\r\n                <input type="password" ng-model="model.repeatPassword" ng-disabled="inProgress" id="lmx-newPasswordConfirm" name="newPasswordConfirm" is-equal-passwords="model.newPassword" required="">\r\n            </form-group>\r\n            <div class="lmx-btn-container">\r\n                <div ng-hide="inProgress">\r\n                    <button type="button" class="lmx-btn-cancel" id="lmx-confirm-code-cancel" ng-click="cancel()">\r\n                        {{\'buttons.cancel\' | translate}}\r\n                    </button>\r\n                    <button type="submit" id="lmx-confirm-code-submit">\r\n                        {{\'buttons.next\' | translate}}\r\n                    </button>\r\n                </div>\r\n                <inline-loader line="">inProgress</inline-loader>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/showcase/modal/buyCouponModal.html",'<div class="lmx-buy-coupon-modal" loader="inProgress">\r\n    <div class="modal-header">\r\n        <div class="lmx-modal-closer" ng-click="cancel()"></div>\r\n        <h2>{{\'showcase.buyCoupon.title\' | translate}}</h2>\r\n        <div class="lmx-modal-description">{{:: coupon.name}}</div>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="lmx-clearfix">\r\n            <div ng-if="!triedToBuy">\r\n                {{:: coupon.description}}\r\n            </div>\r\n            <div ng-if="triedToBuy">\r\n                <div ng-if="result.success">\r\n                    <span ng-bind-html="\'showcase.buyCoupon.couponBought\' | translate: {couponNumber: result.success.text}"></span>\r\n                    <br>{{\'showcase.buyCoupon.date\' | translate}}: {{::\r\n                    result.success.recievedDate | shortDateTime}}\r\n                    <span ng-if="result.success.expireDate"><br>{{\'showcase.buyCoupon.expirationDate\' | translate}} {{::\r\n                        result.success.expireDate | shortDateTime}}</span>\r\n                </div>\r\n                <div ng-if="result.error">\r\n                    <pre>{{\'showcase.buyCoupon.error\' | translate}}</pre>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer lmx-btn-container">\r\n        <div ng-if="!triedToBuy">\r\n            <button type="button" ng-click="buyCoupon(coupon.id)">\r\n                {{\'showcase.buyCoupon.payBonuses\' | translate}}\r\n            </button>\r\n            <button type="button" class="lmx-btn-cancel" ng-click="cancel()">\r\n                {{\'buttons.cancel\' | translate}}\r\n            </button>\r\n        </div>\r\n        <div ng-if="triedToBuy">\r\n            <button type="button" ng-click="cancel()">{{\'buttons.close\' | translate}}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/showcase/showcase.html",'<div class="lmx-container lmx-showcase">\r\n    <h2>{{\'showcase.title\' | translate}}</h2>\r\n\r\n    <div class="lmx-margin-bottom">\r\n        <a ng-click="changeType(false)" href="">\r\n            {{\'showcase.main\' | translate}}\r\n        </a>\r\n        <a ng-click="changeType(true)" href="">\r\n            {{\'showcase.categories\' | translate}}\r\n        </a>\r\n    </div>\r\n\r\n    <div loader="inProgress">\r\n        <div ng-if="!categoriesType && !inProgress" class="lmx-main-coupon">\r\n            <!--ITEM STARTS-->\r\n            <coupon ng-repeat="coupon in coupons | orderBy: \'id\'"></coupon>\r\n            <!--ITEM ENDS-->\r\n        </div>\r\n\r\n        <div ng-if="categoriesType" class="lmx-category-coupons">\r\n            <div class="lmx-left">\r\n                <a ng-if="!inProgress" class="lmx-btn" ng-repeat="(logicalName, categoryObject) in couponsByCategories" ng-click="showCategory(logicalName)" href="">\r\n                    {{:: categoryObject.name }}\r\n                </a>\r\n            </div>\r\n            <div ng-repeat="(logicalName, categoryObject) in couponsByCategories">\r\n                <div class="lmx-category-wrapper" ng-if="!selectedCategory || logicalName == selectedCategory">\r\n                    <div>\r\n                        <h5>\r\n                            <a ng-click="showCategory(logicalName)" href="">{{:: categoryObject.name }} ({{:: categoryObject.coupons.length\r\n                                }})</a>\r\n                        </h5>\r\n                    </div>\r\n                    <coupon ng-repeat="coupon in categoryObject.coupons | limitTo: selectedCategory? null : 2"></coupon>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/social/social.html",'<div class="lmx-social" ng-class="::{\'lmx-social-binding\': isBinding}">\r\n    <div ng-if=":: clients.length" ng-switch=":: isBinding">\r\n        <div ng-switch-when="false">\r\n            <div class="lmx-hint lmx-row" ng-bind-html="\'accounts.socials.login\' | translate"></div>\r\n\r\n            <ul loader="isProgress.getSocialInfo">\r\n                <li ng-repeat="client in clients">\r\n                    <img class="lmx-social-logo" title="{{:: client.name }}" ng-click="authHandler(client)" ng-src="{{:: socialImagesPath}}/{{:: client.providerType.toLowerCase()}}-logo.svg" fallback-image="">\r\n                </li>\r\n            </ul>\r\n        </div>\r\n\r\n        <div ng-switch-when="true">\r\n            <h3>{{\'accounts.socials.title\' | translate}}</h3>\r\n\r\n            <ul loader="isProgress.getSocialInfo">\r\n                <li ng-repeat="client in clients">\r\n                    <img class="lmx-social-logo" alt="{{:: client.name }}" ng-click="authHandler(client)" ng-src="{{:: socialImagesPath}}/{{:: client.providerType.toLowerCase()}}-logo.svg" fallback-image="">\r\n\r\n                    <div class="lmx-social-action">\r\n                        <a ng-click="toggleBind(client)" class="lmx-pseudolink" href="">{{\'accounts.socials.\' + (isBinded(client) ? \'unbind\' : \'bind\') |\r\n                            translate}}</a>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/subscriptions/subscriptions.html",'<div class="lmx-subscriptions">\r\n    <section>\r\n        <h3>{{\'subscriptions.title\' | translate}}</h3>\r\n        <div loader="inProgress">\r\n            <p>{{\'subscriptions.hint\' | translate}}</p>\r\n            <div ng-repeat="subscription in subscriptions track by subscription.externalId">\r\n                <form novalidate="" name="subscriptionsForm">\r\n                    <form-group>\r\n                        <div ng-repeat="notificationType in notificationTypes">\r\n                            <input type="checkbox" ng-attr-id="{{:: notificationType}}" ng-attr-name="{{:: notificationType}}" ng-model="subscription[notificationType].selected" ng-disabled="subscription[notificationType].readOnly" ng-click="submitSubscriptions()">\r\n                            <label ng-attr-for="{{:: notificationType}}">\r\n                                {{:: \'subscriptions.notificationTypes.\' + notificationType |\r\n                                translate}}\r\n                            </label>\r\n                        </div>\r\n                    </form-group>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </section>\r\n</div>\r\n'),n.put("app/directives/unregistration/modal/unregistrationModal.html",'<div>\r\n    <div class="modal-header">\r\n        <h2>{{\'unregistration.refuseToParticipateInLP\' | translate}}</h2>\r\n    </div>\r\n\r\n    <div class="modal-content-wrapper">\r\n        <form novalidate="" name="unregistration" ng-submit="unregistration.$valid && confirm()">\r\n            <div class="modal-body">\r\n                <div class="lmx-hint">\r\n                    <p ng-bind-html="\'unregistration.message\' | translate"></p>\r\n                </div>\r\n                <form-group>\r\n                    <textarea ng-disabled="inProgress" placeholder="{{\'unregistration.reason\' | translate}}" ng-model="model.reason"></textarea>\r\n                </form-group>\r\n                <form-group ng-if=":: isConfirmation" class="lmx-confirm-code-field">\r\n                    <div class="lmx-hint">\r\n                        <span>{{\'unregistration.enterConfirmCode\' | translate}}\r\n                            <p ng-if=":: currentPhone">{{::currentPhone}}</p></span>\r\n                    </div>\r\n                    <input ng-model="model.confirmCode" ng-disabled="inProgress" id="lmx-confirmCode" name="confirmcode" type="text" required="">\r\n                </form-group>\r\n            </div>\r\n            <div class="modal-footer lmx-btn-container">\r\n                <button ng-disabled="inProgress" type="button" ng-click="cencel()">\r\n                    {{\'unregistration.cancel\' | translate}}\r\n                </button>\r\n                <button ng-disabled="inProgress" type="submit">\r\n                    {{\'unregistration.confirm\' | translate}}\r\n                </button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/unregistration/unregistration.html",'<div class="lmx-unregistration">\r\n    <a class="lmx-pseudolink" ng-click="openUnregistrationModal()" href="">{{\'unregistration.refuseToParticipateInLP\' | translate}}</a>\r\n</div>\r\n'),n.put("app/directives/userAlert/userAlertView.html",'<div class="lmx-alert-message" ng-bind-html="message"></div>\r\n<div class="modal-footer">\r\n    <button type="button" ng-click="close()">{{:: buttonText}}</button>\r\n</div>\r\n'),n.put("app/directives/userConfirmation/userConfirmationView.html",'<div class="lmx-alert-message" ng-bind-html="message"></div>\r\n<div class="modal-footer">\r\n    <button type="button" ng-click="ok()" autofocus="">{{:: confirmButtonText}}</button>\r\n    <button type="button" class="lmx-btn-cancel" ng-click="cancel()">\r\n        {{\'buttons.no\' | translate}}\r\n    </button>\r\n</div>\r\n'),n.put("app/directives/userEmail/userEmail.html",'<div class="lmx-user-email lmx-row">\r\n    <div ng-if=":: registration">\r\n        <h2>\r\n            {{\'registration.emailStep.\' + (step === 1 ? \'emailTitle\' : \'codeTitle\') | translate}}\r\n        </h2>\r\n        <lmx-notifications area="registration"></lmx-notifications>\r\n    </div>\r\n    <div loader="isChangeProcessStarted === undefined">\r\n        <div ng-if="isChangeProcessStarted === false" class="lmx-settings-line">\r\n            <h3>Email</h3>\r\n            <lmx-notifications area="userEmail"></lmx-notifications>\r\n            <div class="lmx-current-value-container">\r\n                <div class="lmx-current-value">{{:: currentEmail}}</div>\r\n                <div>\r\n                    <a ng-click="openForm()" class="lmx-pseudolink" href="">{{\'buttons.change\'|translate}}</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div ng-if="isChangeProcessStarted" class="lmx-user-email-changing">\r\n            <div ng-if=":: !registration">\r\n                <h3>Email</h3>\r\n                <lmx-notifications area="userEmail"></lmx-notifications>\r\n            </div>\r\n            <form novalidate="" name="form" ng-submit="form.$valid && next(form)">\r\n                <div ng-if="step === 1">\r\n                    <div ng-if=":: !registration" class="lmx-hint">\r\n                        <p ng-bind-html="\'contacts.userEmail.emailHint\' | translate"></p>\r\n                    </div>\r\n\r\n                    <form-group label-text="{{(registration ? \'registration.emailStep\' : \'contacts.userEmail\') + \'.email\' | translate}}">\r\n                        <input type="email" ng-model="model.newEmail" name="email" id="lmx-newEmail" ng-disabled="loader.inProgress" required="" autofocus="">\r\n                    </form-group>\r\n\r\n                    <div ng-if="emailSkippable" class="lmx-margin-bottom">\r\n                        <a ng-click="skipStep()" href="">{{\'registration.emailStep.skipEmailStep\' | translate}}</a>\r\n                    </div>\r\n                </div>\r\n\r\n                <div ng-if="step === 2">\r\n                    <div class="lmx-hint" ng-switch=":: !!registration">\r\n                        <p ng-switch-when="true">\r\n                            {{\'registration.emailStep.codeHint\' | translate}}\r\n                        </p>\r\n                        <p ng-switch-when="false" ng-bind-html="(\'contacts.userEmail.codeHint\' | translate) + \' <strong>\' + newEmail + \'</strong>\'"></p>\r\n                    </div>\r\n\r\n                    <form-group label-text="{{(registration ? \'registration.emailStep\' : \'contacts.userEmail\') + \'.confirmationCode\' | translate}}">\r\n                        <input type="text" ng-model="model.confirmationCode" name="confirmcode" id="lmx-confirmationCode" integer="" ng-disabled="loader.inProgress" required="" autofocus="">\r\n                    </form-group>\r\n\r\n                    <div ng-if="emailSkippable" class="lmx-margin-bottom">\r\n                        <a ng-click="skipStep()" href="">{{\'registration.emailStep.skipCodeStep\' | translate}}</a>\r\n                    </div>\r\n\r\n                    <div class="lmx-margin-bottom" ng-hide="loader.inProgress">\r\n                        <a ng-click="reSendCode()" id="lmx-changeEmail-resend" href="">\r\n                            {{(registration ? \'registration.emailStep\' : \'contacts.userEmail\') +\r\n                            \'.sendConfirmCode\' | translate}} </a><br>\r\n                        <a ng-click="reEnterEmail(form)" id="lmx-changeEmail-reenter" href="">\r\n                            {{(registration ? \'registration.emailStep\' : \'contacts.userEmail\') +\r\n                            \'.resetEmail\' | translate}}\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div class="lmx-btn-container">\r\n                    <inline-loader line="">loader.inProgress</inline-loader>\r\n                    <div ng-hide="loader.inProgress">\r\n                        <button type="button" ng-click="closeForm()" class="lmx-btn-cancel" id="lmx-changeEmail-cancel">\r\n                            {{\'buttons.cancel\' | translate}}\r\n                        </button>\r\n                        <button type="submit" id="lmx-changeEmail-continue">\r\n                            {{\'buttons.next\' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/userInfo/userInfo.html",'<div class="lmx-user-info lmx-row" loader="!isInfoLoaded" ng-if="isAuth()">\r\n    <div ng-if=":: isInfoLoaded">\r\n        <dl class="lmx-clearfix">\r\n            <dt class="lmx-user-info__name">\r\n                <a ng-href="{{baseUrl}}#personal">\r\n                    <span>{{userInfo.lastName}}</span>\r\n                    <span>{{userInfo.firstName}}</span>\r\n                    <span>{{userInfo.patronymicName}}</span>\r\n                </a>\r\n            </dt>\r\n            <dd></dd>\r\n        </dl>\r\n\r\n        <dl class="lmx-user-balance lmx-clearfix" ng-class="{\'lmx-no-balance\': userInfo.baseBalanceAccount === undefined}">\r\n            <dt class="lmx-user-info__balance lmx-user-info__key">\r\n                {{\'userInfo.balance\' | translate}}:&nbsp;\r\n            </dt>\r\n            <dd class="lmx-user-info__balance lmx-user-info__value">\r\n                <span ng-bind="userInfo.baseBalanceAccount.balance | number: 2"></span>&nbsp;{{userInfo.baseBalanceAccount.currency.nameCases.abbreviation}} (<a ng-href="{{baseUrl}}#balance">{{\'userInfo.accounts\' | translate}}: {{userInfo.balanceAccounts.length}}</a>)\r\n                <span class="lmx-no-balance-message lmx-hidden">0</span>\r\n            </dd>\r\n\r\n            <dt class="lmx-user-info__not-activated lmx-user-info__key">\r\n                {{\'userInfo.notActivatedBonuses\' | translate}}:&nbsp;\r\n            </dt>\r\n            <dd class="lmx-user-info__not-activated lmx-user-info__value">\r\n                <span ng-bind="userInfo.baseBalanceAccount.notActivated | number: 2"></span>&nbsp;{{userInfo.baseBalanceAccount.currency.nameCases.abbreviation}}\r\n                <span class="lmx-no-balance-message lmx-hidden">0</span>\r\n            </dd>\r\n\r\n            <dt class="lmx-user-info__accumulated lmx-user-info__key">\r\n                {{\'userInfo.accumulatedBonuses\' | translate}}:&nbsp;\r\n            </dt>\r\n            <dd class="lmx-user-info__accumulated lmx-user-info__value">\r\n                <span ng-bind="userInfo.baseBalanceAccount.accumulated | number: 2"></span>&nbsp;{{userInfo.baseBalanceAccount.currency.nameCases.abbreviation}}\r\n                <span class="lmx-no-balance-message lmx-hidden">0</span>\r\n            </dd>\r\n        </dl>\r\n\r\n        <dl class="lmx-clearfix">\r\n            <dt ng-if=":: statusAttribute" class="lmx-user-info__attribute lmx-user-info__key">\r\n                <span ng-bind=":: statusAttribute.info.name + \':&nbsp;\'"></span>\r\n            </dt>\r\n            <dd ng-if=":: statusAttribute" class="lmx-user-info__attribute lmx-user-info__value">\r\n                <span ng-bind=":: statusAttribute.value.stringValue"></span>\r\n            </dd>\r\n\r\n            <dt ng-if=":: purchasesAttribute" class="lmx-user-info__attribute lmx-user-info__key">\r\n                <span ng-bind=":: purchasesAttribute.info.name + \':&nbsp;\'"></span>\r\n            </dt>\r\n            <dd ng-if=":: purchasesAttribute" class="lmx-user-info__attribute lmx-user-info__value">\r\n                <span ng-bind=":: purchasesAttribute.value.doubleValue | number: 2"></span>&nbsp;{{\'userInfo.purchasesAttributeCurrency\' | translate}}\r\n            </dd>\r\n        </dl>\r\n\r\n        <div class="lmx-user-info__logout lmx-clearfix">\r\n            <a ng-click="logout(isPassiveLogout)" class="lmx-right" href="">{{\'userInfo.logout\' | translate}}</a>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/userPassword/userPassword.html",'<div class="lmx-user-password lmx-row">\r\n    <div ng-if=":: !registration" class="lmx-settings-line">\r\n        <div ng-if="!isChangeProcessStarted" class="lmx-info">\r\n            <h3>{{\'accounts.userPassword.password\' | translate}}</h3>\r\n            <lmx-notifications area="userPassword"></lmx-notifications>\r\n            <div class="lmx-current-value-container">\r\n                <div class="lmx-current-value">\r\n                    <span>**********</span>\r\n                </div>\r\n                <div>\r\n                    <a ng-click="openForm()" class="lmx-pseudolink" href="">{{\'buttons.change\'|translate}}</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div ng-if="isChangeProcessStarted" class="lmx-user-password-changing">\r\n            <h3>{{\'accounts.userPassword.title\' | translate}}</h3>\r\n            <lmx-notifications area="userPassword"></lmx-notifications>\r\n            <form novalidate="" name="form" ng-submit="form.$valid && save()">\r\n                <form-group label-text="{{\'accounts.userPassword.currentPassword\' | translate}}">\r\n                    <input type="password" ng-model="model.currentPassword" ng-disabled="inProgress" name="currentPassword" id="lmx-currentPassword" autofocus="" required="">\r\n                </form-group>\r\n\r\n                <form-group label-text="{{\'accounts.userPassword.newPassword\' | translate}}">\r\n                    <input type="password" ng-model="model.newPassword" ng-disabled="inProgress" name="newPassword" id="lmx-newPassword" required="" user-password-requirements="">\r\n                </form-group>\r\n\r\n                <form-group label-text="{{\'accounts.userPassword.repeatPassword\' | translate}}">\r\n                    <input type="password" ng-model="model.repeatPassword" ng-disabled="inProgress" name="repeatPassword" id="lmx-repeatPassword" is-equal-passwords="model.newPassword" required="">\r\n                </form-group>\r\n\r\n                <div class="lmx-btn-container">\r\n                    <inline-loader line="">inProgress</inline-loader>\r\n                    <div ng-hide="inProgress">\r\n                        <button type="button" id="lmx-settings-cancel" ng-click="closeForm()" class="lmx-btn-cancel">\r\n                            {{\'buttons.cancel\' | translate}}\r\n                        </button>\r\n                        <button type="submit" id="lmx-settings-submit">\r\n                            {{\'buttons.approve\' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n\r\n    <div ng-if=":: registration">\r\n        <h2>{{\'registration.passwordStep.title\' | translate}}</h2>\r\n        <lmx-notifications area="registration"></lmx-notifications>\r\n        <form novalidate="" name="setPasswordForm" ng-submit="setPasswordForm.$valid && setPassword()">\r\n            <form-group label-text="{{\'registration.passwordStep.password\' | translate}}">\r\n                <input type="password" ng-model="model.currentPassword" id="lmx-password" name="password" ng-disabled="inProgress" user-password-requirements="" required="">\r\n            </form-group>\r\n            <form-group label-text="{{\'registration.passwordStep.repeatPassword\' | translate}}">\r\n                <input type="password" ng-model="model.repeatPassword" id="lmx-passwordConfirm" name="passwordConfirm" ng-disabled="inProgress" is-equal-passwords="model.currentPassword" required="">\r\n            </form-group>\r\n            <div class="lmx-btn-container">\r\n                <inline-loader line="">inProgress</inline-loader>\r\n                <div ng-hide="inProgress">\r\n                    <button type="button" ng-click="closeForm()" class="lmx-btn-cancel" id="lmx-registration-password__cancel">\r\n                        {{\'buttons.cancel\' | translate}}\r\n                    </button>\r\n                    <button type="submit" id="lmx-registration-password__submit">\r\n                        {{\'buttons.next\' | translate}}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n'),n.put("app/directives/userPhone/userPhone.html",'<div class="lmx-user-phone lmx-row">\r\n    <div ng-if=":: registration">\r\n        <h2 ng-show=":: isChangeProcessStarted">\r\n            {{\'registration.phoneStep.\' + (step === 1 ? \'numberTitle\' : \'codeTitle\') | translate}}\r\n        </h2>\r\n        <lmx-notifications area="registration"></lmx-notifications>\r\n    </div>\r\n    <div loader="isChangeProcessStarted === undefined">\r\n        <div ng-if="isChangeProcessStarted === false" class="lmx-settings-line">\r\n            <h3>\r\n                {{(registration ? \'registration.phoneStep\' : \'contacts.userPhone\') +\r\n                \'.phone\'|translate}}\r\n            </h3>\r\n            <lmx-notifications area="userPhone"></lmx-notifications>\r\n            <div class="lmx-current-value-container">\r\n                <div class="lmx-current-value">{{currentPhoneNumber}}</div>\r\n                <div>\r\n                    <a ng-click="openForm()" class="lmx-pseudolink" href="">{{\'buttons.change\'|translate}}</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div ng-if="isChangeProcessStarted" class="lmx-user-phone-changing">\r\n            <div ng-if=":: !registration">\r\n                <h3>{{\'contacts.userPhone.title\' | translate}}</h3>\r\n                <lmx-notifications area="userPhone"></lmx-notifications>\r\n            </div>\r\n            <form novalidate="" name="form" ng-submit="form.$valid && next(form)">\r\n                <div ng-if="step === 1">\r\n                    <div class="lmx-hint">\r\n                        <p ng-bind-html="(registration ? \'registration.phoneStep\' : \'contacts.userPhone\') + \'.numberHint\' | translate"></p>\r\n                    </div>\r\n                    <form-group>\r\n                        <phone-input ng-model="model.newPhone" name="newPhone" id="lmx-newPhone" ng-disabled="loader.inProgress" required=""></phone-input>\r\n                    </form-group>\r\n                </div>\r\n\r\n                <div ng-if="step === 2">\r\n                    <div class="lmx-hint">\r\n                        <p ng-bind-html="((registration ? \'registration.phoneStep\' : \'contacts.userPhone\') + \'.codeHint\' | translate) + \' <b>\' + newPhone + \'</b>\'"></p>\r\n                    </div>\r\n                    <form-group label-text="{{(registration ? \'registration.phoneStep\' : \'contacts.userPhone\') + \'.confirmationCode\' | translate}}">\r\n                        <input type="text" ng-model="model.confirmationCode" name="confirmationCode" id="lmx-confirmationCode" ng-disabled="loader.inProgress" autofocus="" required="">\r\n                    </form-group>\r\n                    <div class="lmx-margin-bottom" ng-hide="loader.inProgress">\r\n                        <div>\r\n                            <a ng-click="reSendCode()" id="lmx-changePhone-resendCode" href="">\r\n                                {{(registration ? \'registration.phoneStep\' : \'contacts.userPhone\') +\r\n                                \'.sendConfirmCode\' | translate}}\r\n                            </a>\r\n                        </div>\r\n                        <div>\r\n                            <a ng-click="reEnterPhone(form)" id="lmx-changePhone-reenterPhone" href="">\r\n                                {{(registration ? \'registration.phoneStep\' : \'contacts.userPhone\') +\r\n                                \'.resetPhone\' | translate}}\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="lmx-btn-container">\r\n                    <inline-loader line="">loader.inProgress</inline-loader>\r\n                    <div ng-hide="loader.inProgress">\r\n                        <button type="button" ng-click="closeForm()" class="lmx-btn-cancel" id="lmx-changePhone-cancel">\r\n                            {{\'buttons.cancel\' | translate}}\r\n                        </button>\r\n                        <button type="submit" id="lmx-changePhone-submit">\r\n                            {{\'buttons.next\' | translate}}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),
n.put("app/directives/userStatus/userStatus.html",'<div class="lmx-container lmx-user-status-container">\r\n    <section>\r\n        <dt class="lmx-user-status__name">\r\n            <a ng-href="{{:: baseUrl}}#personal">\r\n                <span>{{:: userInfo.lastName}}</span>\r\n                <span>{{:: userInfo.firstName}}</span>\r\n                <span>{{:: userInfo.patronymicName}}</span>\r\n            </a>\r\n        </dt>\r\n\r\n        <div class="lmx-current-user-status">\r\n            <div ng-repeat="status in userStatus.statuses track by $index" ng-if=":: status.isCurrent">\r\n                <dl class="lmx-user-status">\r\n                    <dt>{{\'status.currentLevel\' | translate}}:</dt>\r\n                    <dd>{{:: status.name}}</dd>\r\n                </dl>\r\n                <dl class="lmx-user-status">\r\n                    <dt>{{\'status.countMeetcoin\' | translate}}:</dt>\r\n                    <dd>{{:: userStatus.balance}}</dd>\r\n                </dl>\r\n            </div>\r\n            <div ng-repeat="status in userStatus.statuses track by $index" ng-if=":: status.amountToThisLevel === 0 && ($index === userStatus.statuses.length - 1 || userStatus.statuses[$index + 1].amountToThisLevel > 0)" ng-init="currentLevelNextMonth = {name: status.name}">\r\n                <dl class="lmx-user-status">\r\n                    <dt>\r\n                        {{\'status.currentLevelNextMonth\' | translate}}\r\n                        "{{::currentLevelNextMonth.name}}"\r\n                        {{\'status.necessaryForNextLevel.nextLevel\' | translate | lowercase}}\r\n                    </dt>\r\n                </dl>\r\n                <dl ng-if=":: status.amountToThisLevel === 0 && userStatus.statuses[$index + 1].amountToThisLevel > 0 && $index !== userStatus.statuses.length - 1" ng-init="nextStatus = {amountToNextLevel: userStatus.statuses[$index + 1].amountToThisLevel, nextLevelName: userStatus.statuses[$index + 1].name}" class="lmx-user-status">\r\n                    <dt>\r\n                        {{\'status.necessaryForNextLevel.necessary\' | translate}} {{::\r\n                        nextStatus.amountToNextLevel}} {{\'status.necessaryForNextLevel.meetcoinFor\'\r\n                        | translate | lowercase}} "{{:: nextStatus.nextLevelName}}"\r\n                        {{\'status.necessaryForNextLevel.nextLevel\' | translate | lowercase}}\r\n                    </dt>\r\n                </dl>\r\n            </div>\r\n        </div>\r\n        <dl class="lmx-user-status">\r\n            <dt>{{\'status.countBonuses\' | translate}}:</dt>\r\n            <dd>{{:: userInfo.balanceAccounts[0].balance}}</dd>\r\n        </dl>\r\n    </section>\r\n</div>\r\n')}]);
// This is the template to generate constant with gulp task 'fallbackYamlTranslations'
(function(angular) {
    var fallbackYamlTranslations = `﻿imageNotFound: "Изображение отсутствует"
showAll: "Показать все"
show: "Показать"
hide: "Скрыть"
buttons:
 save: "Сохранить"
 change: "Изменить"
 cancel: "Отмена"
 approve: "Подтвердить"
 yes: "Да"
 no: "Нет"
 accept: "Принять"
 next: "Далее"
 complete: "Завершить"
 close: "Закрыть"
 send: "Отправить"
 attachFile: "Прикрепить файл"
 delete: "Удалить"
 viewMore: "Посмотреть подробнее"
 backToList: "Вернуться к списку"
 reload: "Обновить страницу"
plurals:
 merchant_plural:
  one: "{{ number }} магазин"
  few: "{{ number }} магазина"
  many: "{{ number }} магазинов"
 minute_plural:
  one: "{{number}} минуту"
  few: "{{number}} минуты"
  many: "{{number}} минут"
alerts:
 areYouSure: "Вы уверены?"
 localeFileUploadFailed: "Не найден файл локализации &laquo;{{locale}}&raquo;"
 systemError: "Системная ошибка"
validationMessages:
 defaultMsg: "Неправильный ввод {0}"
 email: "Пожалуйста, введите правильный email"
 minLength: "Минимум символов: {0} (сейчас {1})"
 maxLength: "Максимум {0} символов (сейчас {1})"
 min: "Минимум {0}"
 max: "Максимум {0}"
 required: "Это поле обязательно"
 date: "Пожалуйста, введите корректную дату"
 pattern: "Формат {0}"
 number: "Пожалуйста, введите число"
 url: "Пожалуйста, введите url в формате http(s)://www.google.com"
 greaterThan: "Больше, чем {0}"
 greaterThanEqual: "Больше или равно {0}"
 lessThan: "Меньше, чем {0}"
 lessThanEqual: "Меньше или равно {0}"
 requiredItems: "Необходимо выбрать хотя бы один элемент"
 digitsAfterComma: "Неверное количество знаков после запятой. Должно быть {0}"
 integer: "Должно быть целое число"
 notEmptyGuid: "Невозможно использовать пустое значение внешнего ключа"
 isGuid: "Значение не соответствует типу Guid"
 isPhone: "Номер должен начинаться с 7 и состоять из 11 цифр"
 isEmail: "Пожалуйста, введите правильный email"
 isEqualPasswords: "Пароли не совпадают"
dateRange:
 from: "с"
 to: "по"
 toTime: "до"
 since: "с"
reCaptcha:
 error: "Ошибка взаимодействия с сервером валидации, обратитесь в службу технической поддержки"
file:
 error: "Ошибка загрузки файла"
 maxsizeError: "Превышен максимальный размер файла (5 МБ)"
map:
 mon: "Пн"
 tue: "Вт"
 wed: "Ср"
 thu: "Чт"
 fri: "Пт"
 sat: "Сб"
 sun: "Вс"
 weekend: "Выходной"
 breakTime: "обед"
 closed: "Сейчас закрыто"
 opened: "Сейчас открыто"
 closedButWillOpenSoon: "Закрыто, откроется через {{minutes}}"
 openedButWillCloseSoon: "Открыто, закроется через {{minutes}}"
 closedForLunch: "Закрыто на обед"
 openedButWillCloseSoonForLunch: "Открыто, закроется на обед через {{minutes}}"
 closedForLunchButWillOpenSoon: "Закрыто на обед, откроется через {{minutes}}"
datePicker:
 day: "День"
 month: "Месяц"
 year: "Год"
 date: "Дата"
 time: "Время"
accounts:
 userPassword:
  title: "Пароль"
  password: "Пароль"
  currentPassword: "Текущий пароль"
  newPassword: "Новый пароль"
  repeatPassword: "Подтверждение пароля"
  alerts:
   passwordUpdated: "Пароль успешно изменён"
 socials:
  title: &socials "Социальные сети"
  login: "Войти с&nbsp;помощью социальных сетей"
  bind: "Привязать"
  unbind: "Отвязать"
announcement:
 title: &announcement "Реклама"
anonymousFeedback:
 title: &anonymousFeedback "Задать вопрос"
 hint: "Отправка письма будет выполнена через почтовый клиент, установленный на&nbsp;Вашем устройстве"
 theme: "Тема письма"
 message: "Ваше сообщение"
 alerts:
  mailClient: "Происходит запуск почтового клиента. В&nbsp;случае, если по&nbsp;истечению некоторого времени ничего не&nbsp;произошло, отправьте письмо непосредственно со&nbsp;своей электронной почты на&nbsp;адрес {{supportEmail}}"
authentication:
 title: &authentication "Вход в Личный кабинет"
 login: "Войти"
 password: "Пароль"
 code: "Код подтверждения"
 resendCode: "Выслать код подтверждения ещё раз"
 resendCodeCompleted: "Код подтверждения выслан повторно"
 forgotPassword: "Забыли пароль?"
 register: "Зарегистрироваться"
 alerts:
  authenticationNeeded: "Необходима авторизация"
  wrongCredentials: "Неверное имя пользователя или пароль. Проверьте правильность введенных данных."
identifiers:
 phone: "Номер телефона"
 card: "Номер карты"
 email: "Email"
balance:
 title: &balance "Детальный баланс"
 amount: "Баланс"
 notActivatedAmount: "К зачислению"
 period: "Период"
 date: "Дата"
 activationAmount: "К зачислению"
 expirationAmount: "Сгорят"
 lastWeekChanges: "Изменение баланса в течение недели"
 infoNotFound: "Нет действующих счетов"
 lifeTimePeriod:
  fromWeekToMonth: "От недели до месяца"
  fromMonthToYear: "От месяца до года"
  fromYear: "Через год и более"
brands:
 title: &brands "Бренды"
 site: "Перейти на сайт бренда"
 locations: "Адреса"
cards:
 title: &cards "Карты"
 personalCards: "Мои карты"
 accountCards: "Семейный счёт"
 attachCardModal:
  title: "Объединение карт"
  separationImpossible: "Разъединение карт будет невозможно"
  confirmCode: "Введите код подтверждения, отправленный владельцу <b>прикрепляемой&nbsp;карты</b>"
  resendConfirmCode: "Выслать код подтверждения ещё раз"
  cardNumber: "Номер прикрепляемой карты"
  password: "Пароль от Вашего Личного кабинета"
  code: "Код подтверждения"
  codeSent: "Код подтверждения отправлен"
 blockCardModal:
  blockTitle: "Блокировка карты"
  unblockTitle: "Разблокировка карты"
  password: "Пароль от Вашего Личного кабинета"
 graphicalCodesModal:
  barCode: "Штрих-код"
  qrCode: "QR-код"
 replaceCardModal:
  title: "Замена карты"
  cardNumber: "Номер новой карты"
  password: "Пароль от Вашего Личного кабинета"
  cvcCode: "CVC-код"
 setCardModal:
  title: "Привязка физической карты"
  cardNumber: "Введите номер карты"
 actions:
  set: "Добавить карту"
  attach: "Добавить карту к счёту"
  block: "Заблокировать"
  unblock: "Разблокировать"
  replace: "Заменить"
 noCard: "Нет карты"
 replaceHint: "Для того, чтобы заменить карту на&nbsp;новую, её&nbsp;необходимо предварительно <strong>заблокировать</strong>"
 info:
  owner: "Владелец"
  paid: "Израсходовано"
  blocked: "Заблокирована"
favoriteGoods:
 title: &favoriteGoods "Любимые вкусы"
 actions:
  edit: "Редактировать"
 info:
  limitation:
   part1: "Любимый вкус можно изменить 1 раз в месяц, так же эта возможность появляется, если ваш любимый вкус попадает под действие"
   part2: "промо акции"
  description: "В этом разделе вы можете назначить Любимый вкус для приобретения его в магазинах сети по самой выгодной цене - со скидкой 15%"
 alreadyChanged: "Вы уже изменяли этот любимый вкус"
 noFavoriteGood: "Любимый вкус не выбран"
 favoriteGoodsEmpty: "Нет любимых вкусов"
 modal:
  selectGood: "Выберите товар"
  close: "Закрыть"
  selectFavoriteGood: "Назначить любимым вкусом"
  instead: "вместо"
contacts:
 title: "Контакты"
 userPhone:
  title: "Номер телефона"
  phone: "Номер телефона"
  confirmationCode: "Код подтверждения"
  numberHint: "На&nbsp;данный номер будет выслано SMS с&nbsp;кодом подтверждения"
  codeHint: "Код подтверждения отправлен Вам по&nbsp;SMS на&nbsp;номер"
  sendConfirmCode: "Выслать код подтверждения ещё раз"
  resetPhone: "Повторить ввод номера телефона"
  alerts:
   codeSent: "Код подтверждения отправлен"
   phoneNumberUpdated: "Номер телефона успешно изменён"
 userEmail:
  email: "Адрес электронной почты"
  resetEmail: "Повторить ввод электронной почты"
  emailHint: "Введите <strong>новый</strong> электронный адрес. На&nbsp;этот адрес Вы&nbsp;получите письмо с&nbsp;дальнейшей инструкцией"
  codeHint: "Введите код подтверждения, который был отправлен на&nbsp;почту"
  confirmationCode: "Код подтверждения"
  sendConfirmCode: "Выслать код подтверждения ещё раз"
  alerts:
   emailUpdated: "Email успешно изменён"
   codeSent: "Код подтверждения отправлен"
coupons:
 title: "Купоны"
 coupon: "Купон"
 viewOnSite: "Перейти к купону на сайте"
 date: "Дата покупки"
 expirationDate: "Истекает"
 refund: "Вернуть купон"
 price: "Стоимость купона"
 description: "Описание акции"
 noDescription: "Описание акции отсутствует"
 buy: "Купить за"
 login: "Войти, чтобы купить"
 imageNotFound: "Изображение купона отсутствует"
feedback:
 title: &feedback "Чат"
 askQuestion: "Задайте свой вопрос оператору"
 you: "Вы"
 operator: "Оператор"
 file: "Файл"
 typeText: "Введите текст..."
history:
 title: &history "История операций"
 fromDate: "В период с"
 toDate: "по"
 allCards: "Все карты"
 resetFilters: "Сбросить фильтры"
 date: "Дата"
 cardNumber: "Номер карты"
 description: "Описание"
 operation: "Операция"
 amount: "Сумма"
 showMore: "Показать ещё"
 goToFullHistory: "Перейти к полной истории операций"
 notFound: "По Вашему запросу ничего не найдено, попробуйте поменять параметры фильтров"
 gift:
  purchase: "Покупка"
  withdraw: "Оплата"
  withdrawData: "Списание"
  rewardData: "Начисление"
  bonus: "Бонусы"
  discount: "Скидка"
  gift: "Подарок"
  charging: "Начисление"
 giftRefund:
  purchase: "Покупка"
  withdrawData: "Возврат оплаты"
  withdraw: "Возврат оплаты"
  rewardData: "Возврат бонусов"
  bonus: "Возврат бонусов"
  discount: "Скидка"
  gift: "Подарок"
  charging: "Начисление"
merchants:
 title: &merchants "Магазины"
 onMap: "На карте"
 asList: "Списком"
 showOnMap: "Показать на карте"
 noRegionInfo: "Не найдена информация о регионах"
 showAll: "Показать все"
 hide: "Скрыть магазины"
 notFound: "Не найдена информация о магазинах"
 filteredNotFound: "По Вашему запросу ничего не найдено, попробуйте поменять параметры фильтров"
 offers: "Акции в магазине"
 chooseRegion: "Выберите регион"
 chooseCity: "Выберите город"
messages:
 title: &messages "Уведомления"
 notFound: "Уведомления отсутствуют"
offers:
 title: &offers "Акции"
 noActiveOffers: "Действующие акции отсутствуют"
 noFutureOffers: "Будущие акции отсутствуют"
 date: "Дата проведения акции"
 description: "Описание"
 instructions: "Инструкции"
 merchants: "Магазины"
 showAllMerchants: "Показать все"
 hideMerchants: "Скрыть магазины"
personal:
 title: "Введите свои данные"
 alerts:
  incorrectFields: "Некоторые поля анкеты заполнены неверно"
  dataUpdated: "Личные данные обновлены"
personalGoods:
 title: &personalGoods "Персональные товары"
 myGoodsOffers: "Мои товары"
 activeOffers: "Действующие акции"
 futureOffers: "Будущие акции"
 noActiveOffers: "Нет действующих акций"
 availableGoodsCount: "Ещё можно выбрать товаров: {{availableCount}} из {{maxGoodsCount}}"
 maxGoodsCount: "Выбрано максимально допустимое количество товаров"
 editingNotAvailable: "Редактирование списка товаров возможно только в&nbsp;период"
 goodsSelected: "Выбрано товаров: {{approvedCount}} из {{maxGoodsCount}}"
 offerPeriod: "Срок действия акции"
 alerts:
  maxGoodsCount: "Выбрано максимально допустимое количество товаров"
  approvedGoodsNotEditable: "Изменить список подтверждённых товаров невозможно"
  approvalConfirm: "Вы&nbsp;уверены, что хотите подтвердить выбранные товары? Изменить список подтверждённых товаров невозможно"
  noGoodsSelected: "Не выбран ни один товар"
  approvalMessage: "Товары успешно добавлены! Приятных покупок!"
personalOffers:
 title: &personalOffers "Персональные предложения"
 noActiveOffers: "Нет действующих акций"
 offer: "Предложение"
 offerPeriod: "Срок действия акции"
 details: "Детали"
 detailPeriodTitle: "Срок действия предложения по позиции"
 detailPeriod: "С {{offerBeginning}} до {{offerEnd}}"
 offerBeginning: "начала акции"
 offerEnd: "конца акции"
 goodsCode: "Код товара"
 viewOnMap: "Посмотреть на карте"
 showOnMap: "Показать на карте"
 discountTypes:
  cashback: "Бонус"
  discount: "Скидка"
 discountTypesCurrency:
  cashback: "б."
  discount: "р."
 discountDescription:
  amount: "{{type}} {{value}} {{currency}} от суммы товара"
  amountPerMeasure: "{{type}} {{value}} {{currency}} за каждые {{step}} р."
  amountPerUnit: "{{type}} {{value}} {{currency}} за единицу товара"
  percent: "{{type}} {{value}}% от суммы товара"
  pricePerUnit: "Стоимость товара {{value}} р."
 pricePerUnitDiscountHint:
  cashback: "Разница между исходной ценой и указанной будет предоставлена в виде бонусов"
  discount: "Разница между исходной ценой и указанной будет предоставлена в виде скидки"
registration:
 title: &registration "Регистрация"
 phoneNumber: "Номер телефона"
 password: "Пароль"
 referrerCardNumber: "Номер карты друга (необязательно)"
 phoneHint: "На&nbsp;данный номер будет выслано SMS с&nbsp;кодом подтверждения"
 codeHint: "Код подтверждения, отправленный по&nbsp;SMS."
 forgotPassword: "Забыли пароль?"
 offerAccept: "Я принимаю"
 tenderOffer: "условия оферты"
 opdAgree: "Я подтверждаю своё согласие на"
 opd: "обработку персональных данных"
 register: "Зарегистрироваться"
 referrerCodeMessage: "Вы&nbsp;уже установили код друга.<br>Повторный ввод для продолжения регистрации не&nbsp;требуется"
 tenderOfferStep:
  title: "Оферта"
  offerAccept: "Вы принимаете условия оферты."
  opdAccept: "Вы подтверждаете своё согласие на"
  opd: "обработку Ваших персональных данных"
  alerts:
   offerFileError: "Ошибка получения файла оферты."
   offerFileFormatError: "Некорректный формат файла оферты."
   opdFileError: "Ошибка получения файла согласия на обработку персональных данных."
 phoneStep:
  phone: "Номер телефона"
  resetPhone: "Повторить ввод номера телефона"
  confirmationCode: "Код подтверждения"
  sendConfirmCode: "Выслать код подтверждения ещё раз"
  numberTitle: "Введите номер телефона"
  codeTitle: "Введите код подтверждения"
  numberHint: "На&nbsp;данный номер будет выслано SMS с&nbsp;кодом подтверждения"
  codeHint: "Код подтверждения отправлен Вам по&nbsp;SMS на&nbsp;номер"
  alerts:
   codeSent: "Код подтверждения отправлен"
 emailStep:
  email: "Адрес электронной почты"
  confirmationCode: "Код подтверждения"
  sendConfirmCode: "Выслать код подтверждения ещё раз"
  resetEmail: "Повторить ввод электронной почты"
  emailTitle: "Введите адрес электронной почты"
  codeTitle: "Введите код подтверждения"
  skipEmailStep: "Пропустить шаг ввода электронной почты"
  skipCodeStep: "Пропустить шаг ввода кода подтверждения"
  codeHint: "На Вашу электронную почту был отправлен код подтверждения, введите его ниже"
  alerts:
   codeSent: "Код подтверждения отправлен"
 passwordStep:
  title: "Установите пароль"
  password: "Пароль"
  repeatPassword: "Подтверждение пароля"
 cardStep:
  title: "Введите номер карты"
  cardNumber: "Номер карты"
  cvcCode: "CVC-код"
  cardNeeded: "Завершить регистрацию возможно только при наличии на руках карты"
 finish:
  title: "Регистрация успешно завершена"
  welcome: "Добро пожаловать в программу лояльности!"
  login: "Войти в Личный кабинет"
  close: "Закрыть"
resetPassword:
 title: "Восстановление пароля"
 identity: "Номер телефона / Email"
 confirmCode: "Код подтверждения"
 newPassword: "Новый пароль"
 newPasswordConfirmCode: "Подтверждение нового пароля"
 identityHint: "Укажите контакт для восстановления пароля"
 smsCodeHint: "Код подтверждения отправлен Вам по&nbsp;SMS на&nbsp;номер"
 emailCodeHint: "Введите код подтверждения, который был отправлен на&nbsp;почту"
 resendCode: "Выслать код подтверждения ещё раз"
 alerts:
  codeSent: "Код подтверждения отправлен"
showcase:
 title: &showcase "Витрина"
 main: "Основные"
 categories: "Категории"
 buyCoupon:
  title: "Покупка купона"
  couponBought: "Купон номер <b>{{couponNumber}}</b> успешно приобретен."
  date: "Дата приобретения"
  expirationDate: "Купон доступен до"
  error: "Ошибка приобретения купона"
  payBonuses: "Оплатить бонусами"
status:
 title: &status "Статус пользователя"
 currentAmount: "Сумма покупок"
 nextStatus: "Осталось до следующего статуса"
 bonuses: "Бонусы"
 countMeetcoin: "Количество миткоинов"
 currentLevel: "Текущий уровень"
 currentLevelNextMonth: "Вы достигли уровня"
 necessaryForNextLevel:
  necessary: "Необходимо еще"
  meetcoinFor: "Миткоинов для уровня"
  nextLevel: "В следующем месяце"
 countBonuses: "Количество бонусных рублей"
subscriptions:
 title: "Управление подписками"
 error: "Должны быть указаны типы отображаемых подписок и типы оповещений"
 hint: "Получать рекламные рассылки по следующим каналам"
 notificationTypes:
  smsNotification: "SMS"
  emailNotification: "Email"
  pushNotification: "Push"
  viberNotification: "Viber"
  socialNetworksNotification: "Соц. сети"
userInfo:
 title: &userInfo "Информация о пользователе"
 balance: "Баланс"
 accounts: "счетов"
 notActivatedBonuses: "Бонусов к активации"
 accumulatedBonuses: "Получено бонусов"
 logout: "Выйти"
 purchasesAttributeCurrency: "р."
obsoleteBrowserAlert: 'Вы пользуетесь устаревшим браузером, который не поддерживает современные технологии и представляет угрозу Вашей безопасности.<br>Сайт может отображаться некорректно. Рекомендуем установить один из перечисленных браузеров:<br><a href="https://www.google.com/chrome/" target="_blank">Google Chrome</a>, <a href="https://www.mozilla.org/firefox/" target="_blank">Mozilla Firefox</a>'
unregistration:
 refuseToParticipateInLP: "Отказ от участия в программе лояльности"
 message: "Нам очень жаль, что Вы отказываетесь от участия в программе лояльности.<br>Пожалуйста, напишите причину Вашего отказа. Мы обязательно учтем это в дальнейшей работе. Спасибо!"
 reason: "Пожалуйста, введите причину Вашего отказа"
 enterConfirmCode: "Введите код подтверждения, который был отправлен на номер"
 refuse: "Отказаться"
 endRefuse: "Уважаемый клиент, Ваше участие в программе лояльности завершено.<br>Ваши персональные данные удалены из системы.<br>Для повторного принятия участия в будущем, Вам необходимо пройти повторную регистрацию в программе лояльности"
 confirm: "Подтвердить"
 cancel: "Отмена"
settings:
 accountsTitle: "Аккаунты"
questionnaire:
 title: &questionnaire "Личные данные"
 customAnswerPlaceholder: "Введите свой ответ"
menu:
 authentication: *authentication
 registration: *registration
 settings: "Настройки"
 balance: *balance
 cards: *cards
 history: *history
 personalOffers: *personalOffers
 personalGoods: *personalGoods
 favoriteGoods: *favoriteGoods
 socials: *socials
 messages: *messages
 feedback: *feedback
 status: *status
 userInfo: *userInfo
 anonymousFeedback: *anonymousFeedback
 offers: *offers
 showcase: *showcase
 brands: *brands
 announcement: *announcement
 merchants: *merchants
 personalData: *questionnaire
`;

    angular.module('lmxApp').constant('FALLBACK_YAML_TRANSLATIONS', fallbackYamlTranslations);
})(angular);
